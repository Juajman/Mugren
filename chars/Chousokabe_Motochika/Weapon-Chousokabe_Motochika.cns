;var(10):援軍行動回数
;var(20):移動までの時間
;var(30):時間判別
;var(39):2P〜4Pカラー用
;var(50):援軍行動判別

;カラクリ兵器（本体生成・待機）
[statedef 29000]
type = S
movetype= I
physics = N
anim = 90000
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 29000]
type = RemoveExplod
trigger1 = !time

[state 12000]
type = ParentVarSet
trigger1 = (prevstateno=20500||prevstateno=21500||prevstateno=22500)&&!time&&root,fvar(23)>=90000
var(40) = 10+var(40)

[state 29000]
type = ParentVarSet
trigger1 = (prevstateno=20500||prevstateno=21500||prevstateno=22500)&&!time
var(12) = 0

[state 29000]
type = Turn
trigger1 = ifelse(teamside=1,facing=-1,facing=1)

[state 806]
type = ScreenBound
trigger1 = 1
value = 0

[state 29000]
type = PosSet
trigger1 = root,fvar(12)&&root,numhelper(30000)&&root,numhelper(30005)
x = ifelse(facing=-1,floor(root,fvar(12))+ifelse((root,var(12)=[1,2000]),40,140),-floor((root,fvar(12)-floor(root,fvar(12)))*10000)-ifelse((root,var(12)=[1,2000]),40,140))
y = -floor(24*const(size.yscale))
persistent=0

[state 190]
type = varset
trigger1 = teamside=2 && (enemynear(numenemy-1),name="Chousokabe Motochika"||enemynear(0),name="Chousokabe Motochika")
var(39) = 1

[state 20000]
type = PalFX
trigger1 = !time
add = 0,0,0
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = 1
attr = SCA,AA,AT,AP
slot = 0
stateno = stateno
time=-1

[state 190]
type = hitOverride
trigger1 = 1
slot = 1
stateno = stateno
time=-1

;仁王車1
[state -2]
type = Helper
trigger1 = time && (root,var(12)=[1,2000]) &&!numhelper(20010)
id = 20010
stateno=20010
name = "nioh_pedestal"
pos = 0,-8
postype = P1
ownpal = 1
pausemovetime=999999
supermovetime=999999

;仁王車2
[state -2]
type = Helper
trigger1 = time && (root,var(12)=[1,2000]) &&!numhelper(20025)
id = 20025
stateno=20025
name = "nioh_hand1"
pos = 0,-8
postype = P1
ownpal = 1
pausemovetime=999999
supermovetime=999999

;滅騎
[state 190]
type = ChangeState
trigger1 = time && root,var(12)=[10001,15000]
value = 22008;-8;debug

;木騎
[state 190]
type = ChangeState
trigger1 = time && root,var(12)=[2001,5000]
value = 21008;-8;debug

;仁王車
[state 190]
type = ChangeState
trigger1 = time && root,var(12)>0
value = 20008;-8;debug

;ダメージ食らい判別(通常技)
[statedef 29500]
type = S
movetype= I
physics = N
;anim = 90000
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 190]
type = ParentVarAdd
trigger1 = Gethitvar(damage)&&(root,var(12)=[1,1999])&&gethitvar(damage)<1000
var(12) = ifelse(gethitvar(damage)>=(root,var(12)-1),-root,var(12)+1,-ifelse(gethitvar(damage)<24,ifelse(24>=(root,var(12)-1),-root,var(12)+1,24),gethitvar(damage)))

[state 190]
type = ParentVarAdd
trigger1 = Gethitvar(damage)&&(root,var(12)=[2001,9999])&&gethitvar(damage)<1000
var(12) = ifelse((gethitvar(damage)+2000)>=(root,var(12)-1),-root,var(12)+2001,-ifelse(gethitvar(damage)<24,ifelse((24+2000)>=(root,var(12)-1),-root,var(12)+2001,24),gethitvar(damage)))

[state 190]
type = ParentVarAdd
trigger1 = Gethitvar(damage)&&(root,var(12)=[10001,19999])&&gethitvar(damage)<1000
var(12) = ifelse((gethitvar(damage)+10000)>=(root,var(12)-1),-root,var(12)+10001,-ifelse(gethitvar(damage)<24,ifelse((24+10000)>=(root,var(12)-1),-root,var(12)+10001,24),gethitvar(damage)))

[state 20000]
type = ChangeState
trigger1 = !time
value = var(55)

;ダメージ食らい判別(必殺技)
[statedef 29550]
type = S
movetype= I
physics = N
;anim = 90000
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 190]
type = ParentVarAdd
trigger1 = Gethitvar(damage)&&(root,var(12)=[1,1999])&&gethitvar(damage)<1000
var(12) = floor(ifelse(gethitvar(damage)*.5>=(root,var(12)-1),-root,var(12)+1,-ifelse(gethitvar(damage)<12,ifelse(12*.5>=(root,var(12)-1),-root,var(12)+1,12*.5),gethitvar(damage)*.5)))

[state 190]
type = ParentVarAdd
trigger1 = Gethitvar(damage)&&(root,var(12)=[2001,9999])&&gethitvar(damage)<1000
var(12) = floor(ifelse((gethitvar(damage)*2+2000)>=(root,var(12)-1),-root,var(12)+2001,-ifelse(gethitvar(damage)<12,ifelse((12*2+2000)>=(root,var(12)-1),-root,var(12)+2001,12*2),gethitvar(damage)*2.0)))

[state 190]
type = ParentVarAdd
trigger1 = Gethitvar(damage)&&(root,var(12)=[10001,19999])&&gethitvar(damage)<1000
var(12) = floor(ifelse((gethitvar(damage)*2+10000)>=(root,var(12)-1),-root,var(12)+10001,-ifelse(gethitvar(damage)<12,ifelse((12*2+10000)>=(root,var(12)-1),-root,var(12)+10001,12*2),gethitvar(damage)*2.0)))

[state 20000]
type = ChangeState
trigger1 = !time
value = var(55)

;仁王車（本体）
[statedef 20000]
type = S
movetype= I
physics = N
sprpriority = -4
velset = 0,0

[state 190]
type = varset
trigger1 = teamside=2 && (enemynear(numenemy-1),name="Chousokabe Motochika"||enemynear(0),name="Chousokabe Motochika")
var(39) = 1

[state 20000]
type= PosSet
trigger1 = !time&& (roundstate<2||(roundstate=2&&root,numexplod(40000)))
x = floor(root,fvar(22))

;仁王車1
[state -2]
type = Helper
trigger1 = time && !numhelper(20010)
id = 20010
stateno=20010
name = "nioh_pedestal"
pos = 0,-8
postype = P1
ownpal = 1
pausemovetime=999999
supermovetime=999999

;仁王車2
[state -2]
type = Helper
trigger1 = time && !numhelper(20025)
id = 20025
stateno=20025
name = "nioh_hand1"
pos = 0,-8
postype = P1
ownpal = 1
pausemovetime=999999
supermovetime=999999

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=1
var(12) = ifelse(-var(12)>=(root,var(12)-1),-root,var(12)+1,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=1
value = 20500

[state 20000]
type = varset
trigger1 = !time
var(40) = 0

[state 190]
type = ChangeState
trigger1 = (root,var(40)=[4,8])||root,fvar(23)>=90000
value = 20009

[state 190]
type = null;ChangeState
trigger1 = root,fvar(23)>=90000
value = 20500

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 900]
type = Turn
triggerall = vel x!=0&&facing!=root,facing
trigger1 = ifelse(vel x<0,parentdist x>=5,parentdist x<=5)
trigger2 = numhelper(30000)
trigger2 = vel x>0&&ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(20+const(size.ground.front))
trigger3 = numhelper(30000)
trigger3 = vel x<0&&ifelse(facing=1,-(helper(30005),pos x-pos x),(helper(30000),pos x-pos x))<(20+const(size.ground.back))

[State 900, 4]
type = VelSet
triggerall = root,numexplod(50000)
trigger1 = parentdist x>140||parentdist x<-140
x = 3.0*ifelse(parentdist x<-140,-1,1)

[State 900, 4]
type = VelSet
trigger1 = ifelse(vel x<0,parentdist x>=5,parentdist x<=5)
trigger2 = numhelper(30000)
trigger2 = vel x>0&&ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(20+const(size.ground.front))
trigger3 = numhelper(30000)
trigger3 = vel x<0&&ifelse(facing=1,-(helper(30005),pos x-pos x),(helper(30000),pos x-pos x))<(20+const(size.ground.back))
x = 0

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
trigger1 = !(Anim=[20000+var(39)*3000,20001+var(39)*3000])
trigger2 = Anim=20000+var(39)*3000 && !vel x && AnimElemTime(1)>=12
trigger3 = Anim=20000+var(39)*3000 && vel x!=0 && AnimElemTime(1)>=3
value = 20001+var(39)*3000

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
trigger1 = Anim=20001+var(39)*3000 &&!vel x && AnimElemTime(1)>=3
trigger2 = Anim=20001+var(39)*3000 && vel x!=0 && AnimElemTime(1)>=3
value = 20000+var(39)*3000

[state 29000]
type = ChangeState
trigger1 = !root,var(12)&&roundstate=0
value = 29000

;仁王車（本体・到着時）
[statedef 20008]
type = S
movetype= I
physics = N
anim = 20000+var(39)*3000
sprpriority = -4
velset = 0,0

[state 190]
type = varset
trigger1 = teamside=2 && (enemynear(numenemy-1),name="Chousokabe Motochika"||enemynear(0),name="Chousokabe Motochika")
var(39) = 1

[state 29000]
type = PosSet
trigger1 = !(root,fvar(12)&&root,numhelper(30000)&&root,numhelper(30005))
x = ifelse(facing=-1,320,-320)
y = -floor(24*const(size.yscale))
persistent=0

[state 29000]
type = ParentVarSet
trigger1 = !(root,fvar(12)&&root,numhelper(30000)&&root,numhelper(30005))
fvar(22) = floor(pos x)*ifelse(root,teamside=2,-1,1)

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=1
var(12) = ifelse(-var(12)>=(root,var(12)-1),-root,var(12)+1,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 20000]
type = ParentVarSet
trigger1 = !time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(root,var(40)=1||(root,var(40)=-1&&root,var(42)>=root,var(41)))
var(40) = 11

[state 20000]
type = ParentVarSet
trigger1 = time&&root,var(40)=[10,11]
var(40) = 11

[state 20000]
type = ParentVarSet
trigger1 = numhelper(18000)&&root,var(42)>=root,var(41)
trigger1 = ifelse(facing=1,helper(18000),pos x-pos x,-(helper(18000),pos x-pos x))<10
trigger2 = ifelse(vel x<0,parentdist x>=5,parentdist x<=5)&&time>=90
trigger2 = numhelper(30000)
trigger2 = vel x>0&&ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))>(40+const(size.ground.front))
trigger3 = ifelse(vel x<0,parentdist x>=5,parentdist x<=5)&&time>=90
trigger3 = numhelper(30000)
trigger3 = vel x<0&&ifelse(facing=1,-(helper(30005),pos x-pos x),(helper(30000),pos x-pos x))>(40+const(size.ground.back))
var(40) = 1

[State 900, 4]
type = VelSet
trigger1 = root,numexplod(50000)
x = 3.0

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[State 900, 4]
type = ChangeState
trigger1 = numhelper(18000)
trigger1 = ifelse(facing=1,helper(18000),pos x-pos x,-(helper(18000),pos x-pos x))<10
trigger2 = ifelse(vel x<0,parentdist x>=5,parentdist x<=5)&&time>=90
trigger2 = numhelper(30000)
trigger2 = vel x>0&&ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))>(40+const(size.ground.front))
trigger3 = ifelse(vel x<0,parentdist x>=5,parentdist x<=5)&&time>=90
trigger3 = numhelper(30000)
trigger3 = vel x<0&&ifelse(facing=1,-(helper(30005),pos x-pos x),(helper(30000),pos x-pos x))>(40+const(size.ground.back))
value = 20000

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = Anim!=20001+var(39)*3000
trigger1 = !vel x && AnimElemTime(1)>=8
trigger2 = vel x!=0 && AnimElemTime(1)>=3
value = 20001+var(39)*3000

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = Anim!=20000+var(39)*3000
trigger1 = !vel x && AnimElemTime(1)>=2
trigger2 = vel x!=0 && AnimElemTime(1)>=3
value = 20000+var(39)*3000

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20500

;攻撃前待機ステート
[statedef 20009]
type=S
movetype=U
physics = N
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
trigger2 = var(50)=8 && time<(30+ifelse(root,var(57)>=4,40,ifelse(root,var(57)=3,33,ifelse(root,var(57)=2,22,ifelse(root,var(57)=1,12,0)))))
var(30) = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(prevstateno!=[29500,29550])
var(30) = 0

[state 190]
type = VarSet
trigger1 = !var(30)&&!time&&prevstateno!=20040&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(prevstateno!=[29500,29550])
var(50) = ifelse(root,fvar(23)>=90000,10,ifelse(root,var(40)<0||root,var(40)>=9,4,root,var(40)))

[state 190]
type = VarSet
trigger1 = !var(30)&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&!time
var(35) = ifelse(P2dist X<0,-1,1)

[state 190]
type = Turn
trigger1 = !var(30)&&!time&&P2dist X<0

[state 19000]
type = ParentVarAdd
trigger1 = !var(30)&&!time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&((var(50)=[4,6])||root,fvar(23)>=90000)
var(42) = -floor(ifelse(floor(root,var(43)/1000)<50,120-floor((floor(root,var(43)/1000)-1)*1.0/1.50),81)*(1.0+((floor((root,var(41)-72)*3.125/2)-floor(root,var(43)/1000))*1.00/200)*(root,var(43)<floor((root,var(41)-72)*3.125/2))))
persistent=0

;援軍使用回数
[state 13000]
type = varset
trigger1 = !var(30)&&!time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&!var(40)
var(10) = 0

[state 13000]
type = varadd
trigger1 = !var(30)&&!time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(10) = ifelse(var(50)>=8,3,1)

;援軍使用不能時間
[state 12000]
type = VarSet
trigger1 = !var(30)&&!time
var(40) = floor(ifelse((prevstateno=[13500,13600])||(prevstateno=[15000,15031]),3,var(10))*75*(1.0+floor((100-floor(root,var(43)/1000))*1.0/25)))

;援軍使用不能時間
[state 12000]
type = VarSet
trigger1 = !var(30)&&!time
trigger1 = floor(ifelse((prevstateno=[13500,13600])||(prevstateno=[15000,15031]),3,var(10))*75*(1.0+floor((100-floor(root,var(43)/1000))*1.0/25)))>600
var(40) = 600

[state 12000]
type = ParentVarSet
trigger1 = !var(30)&&!time
var(40) = -1

;BASARAゲージ回復不能時間
[state 2000]
type = ParentVarAdd
trigger1 = !var(30)&&!time&&(var(50)=[7,9])
var(9)=ifelse((root,var(9)=[1,999]),420-root,var(9),420)

[state 13500]
type = NotHitBy
trigger1 = !var(30)&&!time&&(var(50)=[8,9])
value = SCA

[state 13500]
type = SuperPause
trigger1 = !var(30)&&!time&&var(50)=8&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
time = 30+ifelse(root,var(57)>=4,40,ifelse(root,var(57)=3,33,ifelse(root,var(57)=2,22,ifelse(root,var(57)=1,12,0))))+14
movetime=30+ifelse(root,var(57)>=4,40,ifelse(root,var(57)=3,33,ifelse(root,var(57)=2,22,ifelse(root,var(57)=1,12,0))))+14
p2defmul = 1
sound = -1
anim = -1
darken = 0
poweradd = 0

;ゲージ減少
[state 13500]
type = PowerAdd
trigger1 = !var(30)&&!time&&var(50)=8
value = -1000*(root,var(57)+1)

[state 13000]
type = ParentVaradd
trigger1 = !var(30)&&!time&&(var(50)=[7,9])
var(42) = -200

;援軍レベル減少
[state 13500]
type = ParentVarAdd
trigger1 = !var(30)&&!time&&var(50)=8
var(43) = ifelse(root,var(43)<=30000,-root,var(43)+1000,-30000)

;援軍カウンター使用回数
[state 13500]
type = ParentVarAdd
trigger1 = !var(30)&&!time&&var(50)=8&&root,var(57)<5
var(57) = 1

[state 13500]
type = PlaySND
trigger1 = !var(30)&&!time&&var(50)=8
value = 3500,0

[state 13500]
type = PlaySND
trigger1 = !var(30)&&!time&&var(50)=9
value = 3600,0

;カットイン
[state 13500]
type = Helper
trigger1 = !var(30)&&!time&&var(50)=8
id = 7565
stateno=7565
pos = 0,0
postype = p1
ignorehitpause=1
supermovetime=60

[state 190]
type = StatetypeSet
trigger1 = var(30)=ifelse(var(50)=10,24,ifelse(var(50)=8,ifelse(root,var(57)>=5,59,ifelse(root,var(57)=4,52,ifelse(root,var(57)=3,43,ifelse(root,var(57)=2,33,19))))-18,ifelse(var(50)=7,1,(12+(var(50)=6)*4+(var(50)=4)*7))))-1
trigger2 = root,var(12)=9000&&var(30)>=4
movetype=A

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = !(var(30)>=9 &&var(50)=5) && (var(30)>=13 && var(10)=2&&var(50)=4)
trigger1 = !(Anim=[20000+var(39)*3000,20001+var(39)*3000])
trigger2 = Anim=20000+var(39)*3000 && !vel x && AnimElemTime(1)>=12
trigger3 = Anim=20000+var(39)*3000 && vel x!=0 && AnimElemTime(1)>=3
value = 20001+var(39)*3000

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = !(var(30)>=9 &&var(50)=5) && (var(30)>=13 && var(10)=2&&var(50)=4)
trigger1 = Anim=20001+var(39)*3000 &&!vel x && AnimElemTime(1)>=3
trigger2 = Anim=20001+var(39)*3000 && vel x!=0 && AnimElemTime(1)>=3
value = 20000+var(39)*3000

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
trigger1 = !(Anim=[20004+var(39)*3000,20005+var(39)*3000]) && (var(30)=[13,15]) && var(10)=2&&var(50)=4
trigger2 = !(Anim=[20004+var(39)*3000,20005+var(39)*3000]) && (var(30)=[9,11]) && var(50)=5
value = 20004+var(39)*3000
elem = 2

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
trigger1 = Anim!=20002+var(39)*3000 && var(30)>=16 && var(10)=2&&var(50)=4
trigger2 = Anim!=20002+var(39)*3000 && var(30)>=12 &&var(50)=5
value = 20002+var(39)*3000

[state 190]
type = ChangeState
trigger1 = var(30)=ifelse(var(50)=10,24,ifelse(var(50)=8,ifelse(root,var(57)>=5,59,ifelse(root,var(57)=4,52,ifelse(root,var(57)=3,43,ifelse(root,var(57)=2,33,19))))-18,ifelse(var(50)=7,1,(15+(var(50)=6)*1+(var(50)=4)*4))))
value = 20000+(var(50))*10+(var(10)=2&&var(50)=4)*5+(var(50)=10)*400

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=1
var(12) = ifelse(-var(12)>=(root,var(12)-1),-root,var(12)+1,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = PalFX
trigger1 = root,fvar(23)>=90000 && var(31)=10
add = 255,128,128
time = 4

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20500

;仁王車（本体・張り手）
[statedef 20040]
type = S
movetype= A
physics = N
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別(暗転中以外)
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(prevstateno!=[29500,29550])
var(30) = 0

[state 12000]
type = ParentVarSet
trigger1 = var(30)=35
var(40) = 10+var(40)

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 12000]
type = VelSet
trigger1 = 1
x = 0

;追加入力
[state 20000]
type = varset
trigger1 = !time
var(7) = 0

[state 20000]
type = varset
trigger1 = var(30)<16 && root,var(40)=4
var(7) = 1

[state 12000]
type = PlaySND
trigger1 = var(30)=0
value = 7300,4
channel = 10

[state 12000]
type = PlaySND
trigger1 = var(30)=35
value = 20000,0
channel = 10

[state 190]
type = Helper
trigger1 = var(30)=0||var(30)=35
id  = 26000
stateno=26000
name = "attachment"
pos = floor(90*const(size.xscale)),-floor(228*const(size.yscale))
postype = P1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = VarSet
trigger1 = numhelper(20025)
var(19) = ifelse(helper(20025),movecontact=1,(14+12)*ifelse(helper(20025),moveguarded||!helper(20025),numtarget,-1,1),0)

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = numhelper(20025)
trigger1 = helper(20025),movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(helper(20025),moveguarded||!helper(20025),numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1&&helper(20025),numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1&&helper(20025),numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;引き剥がし効果
[state 12000]
type = ParentVarSet
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1&&helper(20025),numtarget&&root,var(6)!=0
var(6) = 0
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1
fvar(15) = .00005*floor(ifelse(27*root,fvar(14)<1,1+(root,var(2)%5=1),27*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

[state 12000]
type = AttackDist
trigger1 = var(30)=16
value = 0

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=1
var(12) = ifelse(-var(12)>=(root,var(12)-1),-root,var(12)+1,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = Anim!=20001+var(39)*3000
trigger1 = !vel x && AnimElemTime(1)>=12
trigger2 = vel x!=0 && AnimElemTime(1)>=3
value = 20001+var(39)*3000

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = Anim!=20000+var(39)*3000
trigger1 = !vel x && AnimElemTime(1)>=3
trigger2 = vel x!=0 && AnimElemTime(1)>=3
value = 20000+var(39)*3000

[state 190]
type = ChangeState
trigger1 = var(30)=35
value = 20000+(var(7)=1)*9

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20500

;仁王車（本体・張り手・追加入力）
[statedef 20045]
type = S
movetype= A
physics = N
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別
[state 20000]
type = varadd
trigger1 = 1
var(30) = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(prevstateno!=[29500,29550])
var(30) = 0

[state 12000]
type = ParentVarSet
trigger1 = var(30)=57
var(40) = 10+var(40)

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 12000]
type = VelSet
trigger1 = 1
x = 0

[state 12000]
type = PlaySND
trigger1 = var(30)=0
trigger2 = var(30)=53
value = 7300,4
channel = 10

[state 12000]
type = PlaySND
trigger1 = var(30)=35
value = 20000,0
channel = 10

[state 190]
type = Helper
trigger1 = var(30)=0||var(30)=35
id  = 26000
stateno=26000
name = "attachment"
pos = floor(100*const(size.xscale)),-floor(220*const(size.yscale))
postype = P1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = VarSet
trigger1 = numhelper(20025)
var(19) = ifelse(helper(20025),movecontact=1,(14+12)*ifelse(helper(20025),moveguarded||!helper(20025),numtarget,-1,1),0)

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = numhelper(20025)
trigger1 = helper(20025),movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1&&helper(20025),numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1&&helper(20025),numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;引き剥がし効果
[state 12000]
type = ParentVarSet
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1&&helper(20025),numtarget&&root,var(6)!=0
var(6) = 0
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1
fvar(15) = .00005*floor(ifelse(27*root,fvar(14)<1,1+(root,var(2)%5=1),27*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

[state 12000]
type = AttackDist
trigger1 = var(30)=16
value = 0

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=1
var(12) = ifelse(-var(12)>=(root,var(12)-1),-root,var(12)+1,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state 190]
type = ChangeAnim
trigger1 = Anim!=20009+var(39)*3000 && (var(30)=[0,52))
value = 20009+var(39)*3000

[state 190]
type = ChangeAnim
trigger1 = Anim!=20008+var(39)*3000 && (var(30)=[0,52))
value = 20008+var(39)*3000

[state 190]
type = ChangeAnim
trigger1 = Anim!=20003+var(39)*3000 && var(30)=[53,55]
value = 20003+var(39)*3000
elem = 2

[state 190]
type = ChangeAnim
trigger1 = Anim!=20002+var(39)*3000 && var(30)=[53,55]
value = 20002+var(39)*3000
elem = 2

[state 190]
type = ChangeAnim
trigger1 = Anim!=20005+var(39)*3000 && var(30)=[56,58]
value = 20005+var(39)*3000
elem = 2

[state 190]
type = ChangeAnim
trigger1 = Anim!=20004+var(39)*3000 && var(30)=[56,58]
value = 20004+var(39)*3000
elem = 2

[state 190]
type = ChangeState
trigger1 = var(30)=59
value = 20000

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20500

;腕接着エフェクト
[statedef 26000]
type = A
physics = N
ctrl = 0
anim = 26000
sprpriority = -2

[state 7990]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 7710]
type = AngleDraw
trigger1 = 1
value = 0
scale = const(size.xscale)*(.75+time*.25),const(size.yscale)*(.75+time*.25)

[state 7710]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*50,256

[state 7700]
type = DestroySelf
trigger1 = Time>=6

;仁王車（本体・往復張り手）
[statedef 20050]
type = S
movetype= A
physics = N
;anim = 20002+var(39)*3000
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別(暗転中以外)
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(prevstateno!=[29500,29550])
var(30) = 0

[state 12000]
type = ParentVarSet
trigger1 = var(30)=51
var(40) = 10+var(40)

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 12000]
type = PlaySND
trigger1 = var(30)=0
trigger2 = var(30)=24
value = 7300,4
channel = 10

[state 12000]
type = VelSet
trigger1 = 1
x = 2.0

[state 20000]
type = VelSet
trigger1 = numhelper(30000)
trigger1 = vel x>0&&ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(20+const(size.ground.front))
trigger2 = numhelper(30000)
trigger2 = vel x<0&&ifelse(facing=1,-(helper(30005),pos x-pos x),(helper(30000),pos x-pos x))<(20+const(size.ground.back))
x = 0

[state 12000]
type = ChangeAnim
trigger1 = var(30)=21
value = 20006+var(39)*3000

;Attack Lv.4
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = Anim=20002+var(39)*3000 && (var(30)=[0,20])
damage = floor(27*ifelse(root,fvar(1)<.25,.25,root,fvar(1))*root,fvar(2)*root,fvar(3)*root,fvar(4)*1.22),floor(ceil(27*root,fvar(3)*root,fvar(4)*1.0/4)*1.22)
ground.slidetime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
ground.hittime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
guard.hittime = 15
pausetime = 1,15
ground.velocity = -13.5*var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -13.5*var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = var(35)*ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0015,-6.0*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),57+13,40-ifelse(floor(root,var(14)/60)>9,9,floor(root,var(14)/60))+13)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,2)
guardsound = s7000,2
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = -4

[state 200]
type = movehitreset
trigger1 = anim=20006+var(39)*3000
persistent=0

;Attack Lv.4
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = Anim=20006+var(39)*3000 && (var(30)=[24,50])
damage = floor(27*ifelse(root,fvar(1)<.25,.25,root,fvar(1))*root,fvar(2)*root,fvar(3)*root,fvar(4)*1.22),floor(ceil(27*root,fvar(3)*root,fvar(4)*1.0/4)*1.22)
ground.slidetime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
ground.hittime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
guard.hittime = 15
pausetime = 1,15
ground.velocity = -13.5*var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -13.5*var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = var(35)*ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0015,-6.0*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),57+13,40-ifelse(floor(root,var(14)/60)>9,9,floor(root,var(14)/60))+13)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,2)
guardsound = s7000,2
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = -4

[state -1]
type = targetstate
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
value = 926+10*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(27*root,fvar(14)<1,1+(root,var(2)%5=1),27*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%6

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 12000]
type = AttackDist
trigger1 = var(30)=51
value = 0

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=1
var(12) = ifelse(-var(12)>=(root,var(12)-1),-root,var(12)+1,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state 190]
type = VelSet
trigger1 = var(30)=51
x = 0

[state 190]
type = ChangeState
trigger1 = var(30)=51
value = 20000

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20500

;仁王車（本体・突進）
[statedef 20060]
type = S
movetype= A
physics = N
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別(暗転中以外)
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(prevstateno!=[29500,29550])
var(30) = 0

[state 12000]
type = ParentVarSet
trigger1 = var(30)=(30-(floor(root,var(43)/1000)=[50,99])*8-(floor(root,var(43)/1000)<50)*16)
var(40) = 10+var(40)

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 12000]
type = VelSet
trigger1 = var(30)<(40-(floor(root,var(43)/1000)=[50,99])*10-(floor(root,var(43)/1000)<50)*20)
x = 8.0-(floor(root,var(43)/1000)=[50,99])*1.5-(floor(root,var(43)/1000)<50)*3

[state 20000]
type = VelSet
trigger1 = numhelper(30000)
trigger1 = vel x>0&&ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(20+const(size.ground.front))
trigger2 = numhelper(30000)
trigger2 = vel x<0&&ifelse(facing=1,-(helper(30005),pos x-pos x),(helper(30000),pos x-pos x))<(20+const(size.ground.back))
x = 0

[state 20000]
type = ChangeAnim
triggerall = root,numexplod(50000)
trigger1 = var(30)=(40-(floor(root,var(43)/1000)=[50,99])*10-(floor(root,var(43)/1000)<50)*20)
value = 20000+var(39)*3000

;Attack Lv.4
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = (var(30)=[0,39-(floor(root,var(43)/1000)=[50,99])*10-(floor(root,var(43)/1000)<50)*20])
damage = floor(27*ifelse(root,fvar(1)<.25,.25,root,fvar(1))*root,fvar(2)*root,fvar(3)*root,fvar(4)*1.22),floor(ceil(27*root,fvar(3)*root,fvar(4)*1.0/4)*1.22)
ground.slidetime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
ground.hittime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
guard.hittime = 15
pausetime = 1,13
ground.velocity = -13.5*var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -13.5*var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),57+13,40-ifelse(floor(root,var(14)/60)>9,9,floor(root,var(14)/60))+13)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,2)
guardsound = s7000,2
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = -4

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;引き剥がし効果
[state 12000]
type = ParentVarSet
trigger1 = movehit=1&&numtarget&&root,var(6)!=0
var(6) = 0
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(27*root,fvar(14)<1,1+(root,var(2)%5=1),27*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%6
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 12000]
type = AttackDist
trigger1 = var(30)=(40-(floor(root,var(43)/1000)=[50,99])*10-(floor(root,var(43)/1000)<50)*20)
value = 0

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=1
var(12) = ifelse(-var(12)>=(root,var(12)-1),-root,var(12)+1,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = Anim!=20005+var(39)*3000 && var(30)<(40-(floor(root,var(43)/1000)=[50,99])*10-(floor(root,var(43)/1000)<50)*20)
trigger1 = !vel x && AnimElemTime(1)>=12
trigger2 = vel x!=0 && AnimElemTime(1)>=3
value = 20005+var(39)*3000

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = Anim!=20004+var(39)*3000 && var(30)<(40-(floor(root,var(43)/1000)=[50,99])*10-(floor(root,var(43)/1000)<50)*20)
trigger1 = !vel x && AnimElemTime(1)>=3
trigger2 = vel x!=0 && AnimElemTime(1)>=3
value = 20004+var(39)*3000

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = Anim!=20001+var(39)*3000 && var(30)>=(40-(floor(root,var(43)/1000)=[50,99])*10-(floor(root,var(43)/1000)<50)*20)
trigger1 = !vel x && AnimElemTime(1)>=12
trigger2 = vel x!=0 && AnimElemTime(1)>=3
value = 20001+var(39)*3000

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = Anim!=20000+var(39)*3000 && var(30)>=(40-(floor(root,var(43)/1000)=[50,99])*10-(floor(root,var(43)/1000)<50)*20)
trigger1 = !vel x && AnimElemTime(1)>=3
trigger2 = vel x!=0 && AnimElemTime(1)>=3
value = 20000+var(39)*3000

[state 190]
type = VelSet
trigger1 = var(30)=(40-(floor(root,var(43)/1000)=[50,99])*10-(floor(root,var(43)/1000)<50)*20)
x = 0

[state 190]
type = Turn
trigger1 = var(30)=(40-(floor(root,var(43)/1000)=[50,99])*10-(floor(root,var(43)/1000)<50)*20) && (parentdist x>140||parentdist x<-140)

[state 190]
type = ChangeState
trigger1 = var(30)=(40-(floor(root,var(43)/1000)=[50,99])*10-(floor(root,var(43)/1000)<50)*20)
value = 20000

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20500

;仁王車（台座）
[statedef 20010]
type = S
movetype=I
physics =N
anim = 20011+parent,var(39)*3000
sprpriority = -3
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = RemoveExplod
trigger1 = root,var(12)=1||root,fvar(23)>=90000

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20510

[state 190]
type = BindToParent
trigger1 = 1
pos = 0,0
time=1
;facing=1

[state 40,1]
type = RemoveExplod
trigger1 = facing!=parent,facing

[state 40,1]
type = Turn
trigger1 = facing!=parent,facing

;台座2
[State 40, 1]
type = Explod
trigger1 = root,numexplod(50000) && !NumExplod(20015) && root,var(12)!=1
id = 20015
anim = 20015+parent,var(39)*3000
pos = 0,0
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

;車輪回転中1
[state 190]
type = Explod
trigger1 = root,numexplod(50000) && !NumExplod(20031) && parent,anim%2=0 && parent,vel X!=0
id = 20031
anim = 20031+parent,var(39)*3000
pos = 0,0
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

;車輪駆動音
[state 190]
type = PlaySND
trigger1 = root,numexplod(50000) && NumExplod(20031) && (NumExplod(20030)||NumExplod(20032))
value = 30,6
channel = 15

;ほこり
[state 190]
type = Explod
trigger1 = NumExplod(20031) && (NumExplod(20030)||NumExplod(20032))
id = 6916
anim = 6916
pos = floor(-0*const(size.xscale)),0
postype = P1
sprpriority = -2
bindtime=1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 40, 1]
type = RemoveExplod
trigger1 = root,numexplod(50000) && NumExplod(20031) && NumExplod(20032)
id = 20032

[State 40, 1]
type = RemoveExplod
trigger1 = root,numexplod(50000) && NumExplod(20031) && NumExplod(20030)
id = 20030

;車輪（回転中2）
[state 190]
type = Explod
trigger1 = root,numexplod(50000) && !NumExplod(20032) && parent,anim%2=1 && parent,vel X!=0
id = 20032
anim = 20032+parent,var(39)*3000
pos = 0,0
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = RemoveExplod
trigger1 = root,numexplod(50000) && NumExplod(20032) && NumExplod(20031)
id = 20031

[State 40, 1]
type = RemoveExplod
trigger1 = root,numexplod(50000) && NumExplod(20032) && NumExplod(20030)
id = 20030

;車輪（静止）
[State 40, 1]
type = Explod
trigger1 = root,numexplod(50000) && !NumExplod(20030) && parent,vel X=0
id = 20030
anim = 20030+parent,var(39)*3000
pos = 0,0
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = RemoveExplod
trigger1 = root,numexplod(50000) && NumExplod(20030) && NumExplod(20031)
id = 20031

[State 40, 1]
type = RemoveExplod
trigger1 = root,numexplod(50000) && NumExplod(20030) && NumExplod(20032)
id = 20032

[state 190]
type = ChangeAnim
trigger1 = root,numexplod(50000) && Anim!=20011+parent,var(39)*3000 && parent,anim%2=1
value = 20011+parent,var(39)*3000

[state 190]
type = ChangeAnim
trigger1 = root,numexplod(50000) && Anim!=20010+parent,var(39)*3000 && parent,anim%2=0
value = 20010+parent,var(39)*3000

;仁王車（腕）
[statedef 20025]
type = S
movetype=U
physics =N
sprpriority = -3
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20525

[state 190]
type = StateTypeSet
trigger1 = prevstateno=[20026,20029]
movetype=I

[state 190]
type = ChangeState
trigger1 = parent,stateno=20040
value = 20026

[state 190]
type = ChangeState
trigger1 = parent,stateno=20045
value = 20027

[state 190]
type = ChangeState
trigger1 = parent,stateno=20050||parent,stateno=20070
value = 20028

[state 190]
type = ChangeState
trigger1 = parent,stateno=20080 && parent,time<=1
value = 20029

[state 190]
type = BindToParent
trigger1 = 1
pos = 0,0
time=1

[state 190]
type = Turn
trigger1 = facing!=parent,facing

[state 190]
type = AssertSpecial
trigger1 = (parent,anim!=[20000+parent,var(39)*3000,20001+parent,var(39)*3000])&&(parent,anim!=[20006+parent,var(39)*3000,20007+parent,var(39)*3000])
flag = noshadow
flag2 = invisible

[state 190]
type = ChangeAnim
trigger1 = root,numexplod(50000) && Anim!=20026+parent,var(39)*3000 && parent,anim%2=1
value = 20026+parent,var(39)*3000

[state 190]
type = ChangeAnim
trigger1 = root,numexplod(50000) && Anim!=20025+parent,var(39)*3000 && parent,anim%2=0
value = 20025+parent,var(39)*3000


;仁王車（腕・張り手）
[statedef 20026]
type = S
movetype=A
physics =N
sprpriority = 3
velset = 18-(floor(root,var(43)/1000)=[50,99])*4-(floor(root,var(43)/1000)<50)*8,3.5-(floor(root,var(43)/1000)=[50,99])*.75-(floor(root,var(43)/1000)<50)*.75

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow


;時間判別(暗転中以外)
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(prevstateno!=[29500,29550])
var(30) = 0

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20525

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state 190]
type = Turn
trigger1 = facing!=parent,facing

[state 190]
type = AssertSpecial
trigger1 = (parent,anim!=[20000+parent,var(39)*3000,20001+parent,var(39)*3000])&&(parent,anim!=[20006+parent,var(39)*3000,20007+parent,var(39)*3000])
flag = invisible

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
trigger1 = Anim!=20027-(var(30)>=16)*2+parent,var(39)*3000 && (parent,anim=20001+parent,var(39)*3000||parent,anim=20007+parent,var(39)*3000)
value = 20027-(var(30)>=16)*2+parent,var(39)*3000

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
trigger1 = Anim!=20028-(var(30)>=16)*2+parent,var(39)*3000 && (parent,anim=20000+parent,var(39)*3000||parent,anim=20006+parent,var(39)*3000)
value = 20028-(var(30)>=16)*2+parent,var(39)*3000

[state 20000]
type = VelSet
trigger1 = var(30)>=20
x = -(18-(floor(root,var(43)/1000)=[50,99])*4-(floor(root,var(43)/1000)<50)*8)
y = -(3.5-(floor(root,var(43)/1000)=[50,99])*.75-(floor(root,var(43)/1000)<50)*.75)

[state 20000]
type = VelSet
trigger1 = (var(30)=[16,19])||var(30)>35
x = 0
y = 0

;Attack Lv.3
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = (var(30)=[0,15])
damage = floor(ifelse(27*root,fvar(0)<1,1+(root,var(2)%5=4),27*root,fvar(0))*1.22)
ground.slidetime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
ground.hittime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
guard.slidetime = 12
guard.hittime = 12
pausetime = 1,14
ground.velocity = -12.0*parent,var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -12.0*parent,var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*parent,var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),50+12,36-ifelse(floor(root,var(14)/75)>6,6,floor(root,var(14)/75))+12)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = 3
persistent=0

[state -1]
type = AttackDist
trigger1 = var(30)=16
value = 0

[state -1]
type = targetstate
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
value = 926+10*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(27*root,fvar(14)<1,1+(root,var(2)%5=1),27*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 1
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)+floor(-60*const(size.yscale))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = floor(-180*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = ChangeState
trigger1 = parent,stateno!=20040
value = 20025

;仁王車（逆腕・張り手）
[statedef 20027]
type = S
movetype=A
physics =N
sprpriority = 3
velset = 18-(floor(root,var(43)/1000)=[50,99])*4-(floor(root,var(43)/1000)<50)*8,3.5-(floor(root,var(43)/1000)=[50,99])*.75-(floor(root,var(43)/1000)<50)*.75

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別(暗転中以外)
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(prevstateno!=[29500,29550])
var(30) = 0

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20525

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state 190]
type = Turn
trigger1 = facing!=parent,facing

[state 190]
type = AssertSpecial
trigger1 = (parent,anim!=[20000+parent,var(39)*3000,20001+parent,var(39)*3000])&&(parent,anim!=[20008+parent,var(39)*3000,20009+parent,var(39)*3000])
flag = noshadow
flag2 = invisible

[state 190]
type = ChangeAnim
trigger1 = Anim!=20022-(var(30)=[16,47])*2+(var(30)>=53)*3+parent,var(39)*3000 && (parent,anim=20001+parent,var(39)*3000||parent,anim=20005+parent,var(39)*3000||parent,anim=20009+parent,var(39)*3000)
value = 20022-(var(30)=[16,52])*2+(var(30)>=53)*3+parent,var(39)*3000

[state 190]
type = ChangeAnim
trigger1 = Anim!=20023-(var(30)=[16,47])*2+(var(30)>=53)*3+parent,var(39)*3000 && (parent,anim=20000+parent,var(39)*3000||parent,anim=20004+parent,var(39)*3000||parent,anim=20008+parent,var(39)*3000)
value = 20023-(var(30)=[16,52])*2+(var(30)>=53)*3+parent,var(39)*3000

[state 190]
type = AssertSpecial
trigger1 = var(30)=[53,58]
flag = noshadow
flag2 = invisible

[state 20000]
type = VelSet
trigger1 = var(30)>=20
x = -(18-(floor(root,var(43)/1000)=[50,99])*4-(floor(root,var(43)/1000)<50)*8)
y = -(3.5-(floor(root,var(43)/1000)=[50,99])*.75-(floor(root,var(43)/1000)<50)*.75)

[state 20000]
type = VelSet
trigger1 = (var(30)=[16,19])||var(30)>35
x = 0
y = 0

;Attack Lv.3
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = 1
damage = floor(ifelse(27*root,fvar(0)<1,1+(root,var(2)%5=4),27*root,fvar(0))*1.22)
ground.slidetime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
ground.hittime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
guard.slidetime = 12
guard.hittime = 12
pausetime = 1,14
ground.velocity = -12.0*parent,var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -12.0*parent,var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*parent,var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),50+12,36-ifelse(floor(root,var(14)/75)>6,6,floor(root,var(14)/75))+12)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = 3
persistent=0

[state -1]
type = AttackDist
trigger1 = var(30)=16
value = 0

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(27*root,fvar(14)<1,1+(root,var(2)%5=1),27*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 1
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)+floor(-60*const(size.yscale))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = floor(-180*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = ChangeState
trigger1 = parent,stateno!=20045
value = 20025

;仁王車（腕・往復張り手・援軍アシスト）
[statedef 20028]
type = S
movetype=I
physics =N
sprpriority = 3

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別(暗転中以外)
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(prevstateno!=[29500,29550])
var(30) = 0

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20525

[state 190]
type = ChangeAnim
trigger1 = Anim!=20021+parent,var(39)*3000 && (parent,anim=20002+parent,var(39)*3000)
value = 20021+parent,var(39)*3000

[state 190]
type = ChangeAnim
trigger1 = Anim!=20025+parent,var(39)*3000 && (parent,anim=20006+parent,var(39)*3000)
value = 20025+parent,var(39)*3000

[state 190]
type = AssertSpecial
trigger1 = parent,stateno=20050&&var(30)=[24,26]
trigger2 = parent,stateno=20070&&(parent,anim=20002+parent,var(39)*3000&&parent,animelemtime(2)<0)
trigger3 = parent,stateno=20070&&(parent,anim=20006+parent,var(39)*3000&&parent,animelemtime(2)<0)
flag = noshadow
flag2 = invisible

[state 190]
type = BindToParent
trigger1 = 1
pos = 0,0
time=1

[state 190]
type = Turn
trigger1 = facing!=parent,facing

[state 190]
type = ChangeState
trigger1 = parent,stateno!=20050&&parent,stateno!=20070
value = 20025

;仁王車（腕・張り手・援軍カウンター）
[statedef 20029]
type = A
movetype=A
physics =N
sprpriority = 4
velset = 30,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 190]
type = NothitBy
trigger1 = 1
value = SCA
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = Turn
trigger1 = facing!=parent,facing

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20525

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state 20000]
type = OffSet
trigger1 = vel Y>=0
y = floor(220*const(size.yscale))

[state 20000]
type = PosSet
trigger1 = !time
y = -floor((40+16)*const(size.yscale))
persistent=0

[state 20000]
type = VelSet
trigger1 = time&&abs(pos x-ifelse(!enemynear,alive,enemynear(numenemy-1),pos x,enemynear,pos x))<15
trigger2 = time&&frontedgedist<=-40
x = 0
y = 0
persistent=0

[state 20000]
type = VelSet
trigger1 = ((time>1&&root,numexplod(50000))||time>=20)&&!vel x&&vel Y>=0
x = 0
y = -30
persistent=0

[state 190]
type = ChangeAnim
trigger1 = Anim!=20028+(vel Y<0)*1+parent,var(39)*3000 && vel Y>=0
value = 20028+(vel Y<0)+parent,var(39)*3000
persistent=0

[state 190]
type = ChangeAnim
trigger1 = Anim!=20028+(vel Y<0)*1+parent,var(39)*3000 && vel Y<0
value = 20028+(vel Y<0)+parent,var(39)*3000
persistent=0

[state 20000]
type = AngleDraw
trigger1 = vel Y>=0
value = 45
scale = 1,1

[state 20000]
type = AngleDraw
trigger1 = vel Y<0
value = 120
scale = 1,1

[state 20000]
type = PosFreeze
trigger1 = vel Y<0&&!root,numexplod(50000)
value = 1

[state 20000]
type = null;PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;Attack Lv.3
[state 200]
type = Hitdef
triggerall = vel Y<0 && !movecontact && !movereversed; && root,numexplod(50000)
trigger1 = 1
damage = floor(ifelse(20*root,fvar(0)<1,1+(root,var(2)%5=4),20*root,fvar(0))*1.22),ceil(floor(20*1.0/4)*1.22)
ground.slidetime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
ground.hittime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
guard.slidetime = 12
guard.hittime = 12
pausetime = 1,19
guard.pausetime = 1,14
ground.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-16.0*(51-root,var(3))*1.0/51)*const(size.yscale)
guard.velocity = -12.0*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-16.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+19,24-ifelse(floor(root,var(14)/75)>6,6,floor(root,var(14)/75))+19)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = 0,0
givepower = 0,0
fall = 1
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
kill = 0
guard.kill = 0
persistent=0

[state -1]
type = AttackDist
trigger1 = movecontact||movereversed
value = 0

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(20*root,fvar(14)<1,1+(root,var(2)%5=1),20*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%6
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)+floor(-60*const(size.yscale))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = floor(-180*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = ChangeState
trigger1 = parent,stateno!=20080 && time>=120
trigger2 = (FrontEdgebodydist<=-120||BackEdgebodydist<=-120||ScreenPos Y<=-60) && time>=60
value = 20025

;仁王車（本体・破壊）
[statedef 20500]
type = A
movetype=I
physics =N
anim = 20500+var(39)*3000
sprpriority = -4
velset = (-2-random%3)*ifelse(random%6<3,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = Helper
trigger1 = !time && !numhelper(26200)
id  = 26200
stateno=26200
name = "explosion1"
pos = floor(0*const(size.xscale)),floor(0*const(size.yscale))
postype = P1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause=1

[state 190]
type = Helper
trigger1 = !time && !numhelper(26201)
id  = 26201
stateno=26201
name = "explosion2"
pos = floor(0*const(size.xscale)),floor(0*const(size.yscale))
postype = P1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 12000]
type = ParentVarSet
trigger1 = !time&&root,fvar(23)>=90000
var(40) = -1

[state 12000]
type = ParentVarSet
trigger1 = ScreenPos Y>=260
var(40) = 10+var(40)

[state 20515]
type = PosAdd
trigger1 = !time
x = 0
y = -floor(230*const(size.yscale))

[state 12000]
type = PlaySND
trigger1 = !time
value = 30,7
volume = 255

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;Attack Lv.2
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
triggerall = root,numexplod(50000)
trigger1 = 1
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = -4
persistent=0

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 4.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
value = 1
y = .15

[state 190]
type = ChangeState
trigger1 = ScreenPos Y >=260
value = 29000

;爆発エフェクト1
[statedef 26200]
type = A
physics = N
ctrl = 0
anim = 26200
sprpriority = -3

[state 7990]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 7710]
type = AngleDraw
trigger1 = 1
scale = .5*(5.0-time*.25),.5*(5.0-time*.25)

[state 7710]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*10,256

[state 7700]
type = DestroySelf
trigger1 = Time>=24

;爆発エフェクト2
[statedef 26201]
type = A
physics = N
ctrl = 0
anim = 26201
sprpriority = -3

[state 7990]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 7710]
type = AngleDraw
trigger1 = 1
scale = .5*(5.0+time*.25),.5*(5.0+time*.25)

[state 7710]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*10,256

[state 7700]
type = DestroySelf
trigger1 = Time>=24

;仁王車（台座1・破壊）
[statedef 20510]
type = A
movetype=I
physics =N
anim = 20510+parent,var(39)*3000
sprpriority = -4
velset = (-2-random%3)*ifelse(random%6<3,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = -floor(20*const(size.xscale))
y = -floor(80*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;Attack Lv.2
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = -4
persistent=0

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = -4.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;仁王車（台座2・破壊）
[statedef 20515]
type = A
movetype=I
physics =N
anim = 20515+parent,var(39)*3000
sprpriority = -4
velset = (-2-random%3)*ifelse(random%6<3,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(110*const(size.xscale))
y = -floor(70*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;Attack Lv.2
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = -4
persistent=0

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time
value = 4.5 && root,numexplod(50000)

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time
y = .15 && root,numexplod(50000)

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;仁王車（腕・破壊）
[statedef 20525]
type = A
movetype=I
physics =N
anim = 20525+parent,var(39)*3000
sprpriority = -4
velset = (-2-random%3)*ifelse(random%6<3,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(210*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;Attack Lv.2
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = -4
persistent=0

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time
value = 4.5 && root,numexplod(50000)

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time
y = .15 && root,numexplod(50000)

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;援軍アシスト（仁王車）
[statedef 20070]
type = S
movetype=A
physics =S
anim = 20002+var(39)*3000
sprpriority = 2
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別(暗転中以外)
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(prevstateno!=[29500,29550])
var(30) = 0

[state 12000]
type = ParentVarSet
trigger1 = var(30)=(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
var(40) = 10+var(40)

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 200]
type = helper
trigger1 = !var(30)&&!time
id = 7570
stateno = 7570
pos = 0,floor(-180*const(size.yscale))
postype = P1
pausemovetime=30
supermovetime=30
ownpal = 1

[state 13000]
type = SuperPause
trigger1 = !var(30)&&!time
time = 30
movetime = 30
p2defmul = 1
sound = -1
anim = -1
darken = 0
poweradd = 0

[state 13000]
type = PowerAdd
trigger1 = !var(30)&&!time
value  = -1000

[state 13000]
type = VarAdd
trigger1 = !var(30)&&!time
var(42) = -200

[state 13000]
type = VarSet
trigger1 = !var(30)&&!time
var(40) = -1

[state 12000]
type = PlaySND
triggerall = var(30)>=48&&var(30)<(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
trigger1 = var(30)%16=4
trigger2 = var(30)%16=11
value = 7300,4
;channel = 10

[state 12000]
type = VelSet
trigger1 = var(30)<48
x = 0

[state 12000]
type = VelSet
trigger1 = var(30)>=48&&var(30)<(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
x = 6.0

[state 20000]
type = VelSet
trigger1 = numhelper(30000)
trigger1 = vel x>0&&ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(20+const(size.ground.front))
trigger2 = numhelper(30000)
trigger2 = vel x<0&&ifelse(facing=1,-(helper(30005),pos x-pos x),(helper(30000),pos x-pos x))<(20+const(size.ground.back))
x = 0

[state 12000]
type = ChangeAnim
trigger1 = var(30)<30
value = 20000+var(39)*3000


[state 12000]
type = ChangeAnim
trigger1 = var(30)%16=0&&var(30)>=48&&var(30)<(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
value = 20004+var(39)*3000
elem = 2

[state 12000]
type = ChangeAnim
trigger1 = var(30)%16=2&&var(30)>=48&&var(30)<(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
value = 20002+var(39)*3000

[state 12000]
type = ChangeAnim
trigger1 = var(30)%16=4&&var(30)>=48&&var(30)<(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
value = 20002+var(39)*3000
elem = 2

[state 12000]
type = ChangeAnim
trigger1 = var(30)%16=9&&var(30)>=48&&var(30)<(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
value = 20006+var(39)*3000

[state 12000]
type = ChangeAnim
trigger1 = var(30)%16=11&&var(30)>=48&&var(30)<(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
value = 20006+var(39)*3000
elem = 2

[state 200]
type = movehitreset
triggerall  = var(30)>=48&&var(30)<(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
trigger1 = var(30)%16=4||var(30)%16=11

;Attack Lv.2
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = Anim=20002+var(39)*3000 && (var(30)%16=[4,8])&&var(30)>=48&&var(30)<(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
damage = floor(26*ifelse(root,fvar(1)<.25,.25,root,fvar(1))*root,fvar(2)*root,fvar(3)*root,fvar(4)*1.22),floor(ceil(26*root,fvar(3)*root,fvar(4)*1.0/4)*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = var(35)*ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0013,-6.0*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),59+13,40-ifelse(floor(root,var(14)/60)>9,9,floor(root,var(14)/60))+13)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = -4

;Attack Lv.2
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = Anim=20006+var(39)*3000 && (var(30)%16=[11,15])&&var(30)>=48&&var(30)<(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
damage = floor(26*ifelse(root,fvar(1)<.25,.25,root,fvar(1))*root,fvar(2)*root,fvar(3)*root,fvar(4)*1.22),floor(ceil(26*root,fvar(3)*root,fvar(4)*1.0/4)*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = var(35)*ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0013,-6.0*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),59+13,40-ifelse(floor(root,var(14)/60)>9,9,floor(root,var(14)/60))+13)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = -4

[state -1]
type = targetstate
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
value = 926+10*(root,var(1)%8>=4)
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(26*root,fvar(14)<1,1+(root,var(2)%5=1),26*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%6

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;BASARA Moves Finish
[state 3510]
type = Helper
trigger1 = !numhelper(8800)
trigger1 = (movehit=[1,2]) && !enemynear,alive && roundstate=3
id  = 8800
stateno=8800
pos = 0,0
postype = left
scale = const(size.xscale),const(size.yscale)
persistent=0
ignorehitpause=1

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 12000]
type = AttackDist
trigger1 = var(30)=(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
value = 0

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=1
var(12) = ifelse(-var(12)>=(root,var(12)-1),-root,var(12)+1,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state 190]
type = VelSet
trigger1 = var(30)=(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
x = 0

[state 190]
type = ChangeState
trigger1 = var(30)=(48+ifelse(floor(root,var(43)/1000)>=100,18,ifelse(floor(root,var(43)/1000)>=50,12,6))*8)
value = 20000

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 20500

;援軍カウンター（仁王車）
[statedef 20080]
type=S
movetype=U
physics = N
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別(暗転中以外)
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,20090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(prevstateno!=[29500,29550])
var(30) = 0

[state 190]
type = VarSet
trigger1 = !time&&prevstateno=20000
var(50) = root,var(40)

[state 190]
type = VarSet
trigger1 = !var(30)&&!time
var(35) = ifelse(P2dist X<0,-1,1)

[state 190]
type = ParentVarSet
trigger1 = var(30)=40
var(40) = var(40)

[state 13500]
type = SuperPause
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1&&helper(20025),numtarget
time = 0
movetime=0
p2defmul = 1
sound = -1
anim = -1
darken = 0
poweradd = 0

;ヒットポーズ中
[state 12000]
type = VarAdd
trigger1 = var(26)>1
var(26) = -1
ignorehitpause=1

;ヒットポーズ中
[state 12000]
type = VarSet
trigger1 = numhelper(20025)&&!var(26)
trigger1 = helper(20025),movehit=1&&helper(20025),numtarget
var(26) = 20
persistent=0
ignorehitpause=1

[state -1]
type = AttackDist
trigger1 = movecontact||movereversed
value = 0

;en first hit
[state -2]
type = parentVarset
triggerall = root,var(44)%2048<1024 && root,numexplod(8798)
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1&&helper(20025),numtarget
var(11) = 2
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1&&helper(20025),numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1&&helper(20025),numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1
fvar(15) = .00005*floor(ifelse(20*root,fvar(14)<1,1+(root,var(2)%5=1),20*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = numhelper(20025)
trigger1 = helper(20025),movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

[state 190]
type = AttackDist
trigger1 = var(30)=40
value = 0

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=1
var(12) = ifelse(-var(12)>=(root,var(12)-1),-root,var(12)+1,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StatetypeSet
trigger1 = !time
movetype=A

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
trigger1 = !(Anim=[20000+var(39)*3000,20001+var(39)*3000])
trigger2 = Anim=20000+var(39)*3000 && !vel x && AnimElemTime(1)>=12
trigger3 = Anim=20000+var(39)*3000 && vel x!=0 && AnimElemTime(1)>=3
value = 20001+var(39)*3000

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
trigger1 = Anim=20001+var(39)*3000 &&!vel x && AnimElemTime(1)>=3
trigger2 = Anim=20001+var(39)*3000 && vel x!=0 && AnimElemTime(1)>=3
value = 20000+var(39)*3000

[state 190]
type = ChangeState
trigger1 = var(30)=40
value = 20000

[state 190]
type = ChangeState
trigger1 = root,var(12)=1
value = 29000

;木騎（本体）
[statedef 21000]
type = S
movetype= I
physics = N
sprpriority = -4
velset = 0,0

[state 20000]
type= PosSet
trigger1 = !time&& (roundstate<2||(roundstate=2&&root,numexplod(40000)))
x = floor(root,fvar(22))

[state 21000]
type = PosSet
trigger1 = 1
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = (Anim-500)%10000=51||(Anim-500)%10000=54||(Anim-500)%10000=60||(Anim-500)%10000=63
trigger2 = (Anim-500)%10000=111||(Anim-500)%10000=108||(Anim-500)%10000=102||(Anim-500)%10000=117
;trigger2 = (Anim-500)%10000=116||(Anim-500)%10000=113||(Anim-500)%10000=107||(Anim-500)%10000=104
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))+floor(3*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = (Anim-500)%10000=50||(Anim-500)%10000=55||(Anim-500)%10000=59||(Anim-500)%10000=64
trigger2 = (Anim-500)%10000=112||(Anim-500)%10000=107||(Anim-500)%10000=103||(Anim-500)%10000=116
;trigger2 = (Anim-500)%10000=117||(Anim-500)%10000=112||(Anim-500)%10000=108||(Anim-500)%10000=103
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))+floor(6*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = ((Anim-500)%10000=[56,58])||((Anim-500)%10000=[65,67])
trigger2 = ((Anim-500)%10000=[104,106])||((Anim-500)%10000=[113,115])
;trigger2 = ((Anim-500)%10000=[109,111])||((Anim-500)%10000=[100,102])
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))+floor(9*const(size.yscale))

[state 21000]
type = ChangeAnim
trigger1 = !time && ((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
value = 30500

[state 21000]
type = RemoveExplod
trigger1 = !time && ((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=2001
var(12) = ifelse((-var(12)+2000)>=(root,var(12)-1),-root,var(12)+2001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001
value = 21500

[state 20000]
type = varset
trigger1 = !time
var(40) = 0

[state 190]
type = ChangeState
trigger1 = (root,var(40)=[4,8])||root,fvar(23)>=90000
value = 21009

[state 190]
type = null;ChangeState
trigger1 = root,fvar(23)>=90000
value = 21500

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 40,1]
type = RemoveExplod
triggerall = root,numexplod(50000)
triggerall = var(0)
trigger1 = !time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))||roundstate>2
trigger2 = ((root,command!="holdfwd"&&var(0)>0)||(root,command!="holdback"&&var(0)<0))&&!root,var(59)
trigger3  = !(root,stateno=13||root,stateno=21||root,stateno=100||root,stateno=22||(root,stateno=[120,155])||ifelse(root,facing=1,(pos x-root,pos x)>120,(pos x-root,pos x)<-120)||ifelse(root,facing=1,(pos x-root,pos x)<-240,(pos x-root,pos x)>240))
trigger3 = !(root,stateno=3000 && abs(enemynear,pos x-pos x)<80 && root,backedgebodydist<=80 && root,P2bodydist X<=20 && (root,var(3)=[14,16]))
trigger3 = !(root,stateno=1100 && (root,time=[1,4]))
trigger3 = root,var(59)
trigger4 = numhelper(30000)&&numhelper(30005)
trigger4 = (ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(80+const(size.ground.front))&&var(0)*ifelse(facing!=root,facing,-1,1)>0)
trigger4 = root,var(59)
trigger5 = (root,var(2)>2&&abs(root,pos X-pos X)<140)
trigger5 = root,var(59)

[state 40,1]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = var(0)
trigger1 = !time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))||roundstate>2
trigger2 = ((root,command!="holdfwd"&&var(0)>0)||(root,command!="holdback"&&var(0)<0))&&!root,var(59)
trigger3  = !(root,stateno=13||root,stateno=21||root,stateno=100||root,stateno=22||(root,stateno=[120,155])||ifelse(root,facing=1,(pos x-root,pos x)>120,(pos x-root,pos x)<-120)||ifelse(root,facing=1,(pos x-root,pos x)<-240,(pos x-root,pos x)>240))
trigger3 = !(root,stateno=3000 && abs(enemynear,pos x-pos x)<80 && root,backedgebodydist<=80 && root,P2bodydist X<=20 && (root,var(3)=[14,16]))
trigger3 = !(root,stateno=1100 && (root,time=[1,4]))
trigger3 = root,var(59)
trigger4 = numhelper(30000)&&numhelper(30005)
trigger4 = (ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(80+const(size.ground.front))&&var(0)*ifelse(facing!=root,facing,-1,1)>0)
trigger4 = root,var(59)
trigger5 = (root,var(2)>2&&abs(root,pos X-pos X)<140)
trigger5 = root,var(59)
value = 30500

[State 900, 4]
type = VarSet
triggerall = root,numexplod(50000)
trigger1 = !time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))||roundstate>2
trigger2 = ((root,command!="holdfwd"&&var(0)>0)||(root,command!="holdback"&&var(0)<0))&&!root,var(59)
trigger3  = !(root,stateno=13||root,stateno=21||root,stateno=100||root,stateno=22||(root,stateno=[120,155])||ifelse(root,facing=1,(pos x-root,pos x)>120,(pos x-root,pos x)<-120)||ifelse(root,facing=1,(pos x-root,pos x)<-240,(pos x-root,pos x)>240))
trigger3 = !(root,stateno=3000 && abs(enemynear,pos x-pos x)<80 && root,backedgebodydist<=80 && root,P2bodydist X<=20 && (root,var(3)=[14,16]))
trigger3 = !(root,stateno=1100 && (root,time=[1,4]))
trigger3 = root,var(59)
trigger4 = numhelper(30000)&&numhelper(30005)
trigger4 = (ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(80+const(size.ground.front))&&var(0)*ifelse(facing!=root,facing,-1,1)>0)
trigger4 = root,var(59)
trigger5 = (root,var(2)>2&&abs(root,pos X-pos X)<140)
trigger5 = root,var(59)
var(0) = 0

[state 900]
type = Turn
triggerall = root,numexplod(50000)
trigger1 = !var(0) && p2dist X<0

[State 900, 4]
type = VarAdd
triggerall = root,numexplod(50000)
trigger1 = var(0)
var(0) = ifelse(var(0)<0,-1,1)

[State 900, 4]
type = VarSet
triggerall = root,numexplod(50000)
trigger1 = (root,command="holdfwd"||root,command="holdback")&&root,movetype!=H&&root,statetype!=L&&!var(0)&&roundstate=2&&!root,numexplod(40000)&&!root,var(59)
var(0) = ifelse(root,command="holdfwd"&&!root,var(59),1,-1)

[State 900, 4]
type = VarSet
triggerall = root,numexplod(50000)
triggerall = root,movetype!=H&&root,statetype!=L&&!var(0)&&roundstate=2&&!root,numexplod(40000)&&root,var(59)
trigger1 = (root,stateno=13||root,stateno=21||root,stateno=100||root,stateno=22||(root,stateno=[120,155])||ifelse(root,facing=1,(pos x-root,pos x)<-240,(pos x-root,pos x)>240)||ifelse(root,facing=1,(pos x-root,pos x)<-240,(pos x-root,pos x)>240))
trigger1 = numhelper(30000)&&numhelper(30005)
trigger1 = !(ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(80+const(size.ground.front))&&var(0)*ifelse(facing!=root,facing,-1,1)>0)
trigger1 = !(root,var(2)>2&&abs(root,pos X-pos X)<140)
var(0) = ifelse((root,stateno=13&&!(P2statetype=L&&enemynear,alive)&&P2bodydist X<140)||root,stateno=22||(root,stateno=[120,132])||root,stateno=900,-1,1)

[State 900, 4]
type = VarSet
triggerall = root,numexplod(50000)
triggerall = root,movetype!=H&&root,statetype!=L&&!var(0)&&roundstate=2&&!root,numexplod(40000)&&root,var(59)
trigger1 = root,stateno=1100 && (root,time=[1,4])
var(0) = 1

[State 900, 4]
type = VarSet
triggerall = root,numexplod(50000)
triggerall = root,movetype!=H&&root,statetype!=L&&!var(0)&&roundstate=2&&!root,numexplod(40000)&&root,var(59)
trigger1 = root,stateno=3000 && abs(enemynear,pos x-pos x)<80 && root,backedgebodydist<=80 && root,P2bodydist X<=20 && (root,var(3)=[14,16])
var(0) = ifelse(abs(enemynear,pos x-pos x)<20,1,-1)

[state 40,1]
type = RemoveExplod
triggerall = root,numexplod(50000)
trigger1 = var(0)=1||var(0)=-1

[state 40,1]
type = ChangeAnim
triggerall = root,numexplod(50000)
trigger1 = var(0)=1||var(0)=-1
value = 30500+50+(var(0)=-1)*50

[State 900, 4]
type = VelSet
triggerall = root,numexplod(50000)
trigger1 = ((root,command="holdfwd"&&var(0)=1)||(root,command="holdback"&&var(0)=-1))&&!root,var(59)
x = 2.0*ifelse(root,command="holdback",-1,1)*ifelse(facing!=root,facing,-1,1)

[State 900, 4]
type = VelSet
triggerall = root,numexplod(50000)
trigger1 = var(0)&&root,var(59)
x = 2.0*ifelse(var(0)<0,-1,1)*ifelse(facing!=root,facing,-1,1)

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[State 900, 4]
type = VelSet
trigger1 = !var(0)
trigger2 = numhelper(30000)
trigger2 = vel x>0&&ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(floor(60*const(size.xscale))+const(size.ground.front))
trigger3 = numhelper(30000)
trigger3 = vel x<0&&ifelse(facing=1,-(helper(30005),pos x-pos x),(helper(30000),pos x-pos x))<(floor(60*const(size.xscale))+const(size.ground.back))
x = 0

[state 30000]
type = VarSet
trigger1 = var(0)=1||var(0)=-1||(!var(0)&&Anim=30500&&AnimElemTime(1)=0)
var(30) = 0

[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

;ニュートラル
[state 30000]
type = ChangeAnim
triggerall = var(0)=0&&root,numexplod(50000)
trigger1 = var(30)%100=0
trigger2 = var(30)%100=4
trigger3 = var(30)%100=8
trigger4 = var(30)%100=18
trigger5 = var(30)%100=30
trigger6 = var(30)%100=40
trigger7 = var(30)%100=50
trigger8 = var(30)%100=60
trigger9 = var(30)%100=72
trigger10 = var(30)%100=82
trigger11 = var(30)%100=88
trigger12 = var(30)%100=94
value = ifelse((Anim-30000)%100=11,Anim-11,Anim+1)

;ニュートラル
[state 31000]
type = RemoveExplod
triggerall = var(0)=0&&root,numexplod(50000)
trigger1 = var(30)%100=0
trigger2 = var(30)%100=4
trigger3 = var(30)%100=8
trigger4 = var(30)%100=18
trigger5 = var(30)%100=30
trigger6 = var(30)%100=40
trigger7 = var(30)%100=50
trigger8 = var(30)%100=60
trigger9 = var(30)%100=72
trigger10 = var(30)%100=82
trigger11 = var(30)%100=88
trigger12 = var(30)%100=94

;前移動
[state 30000]
type = ChangeAnim
triggerall = var(0)>0&&root,numexplod(50000)
trigger1 = var(30)%4=0
value = ifelse((Anim-30050)%100=17,Anim-17,Anim+1)

;後移動
[state 30000]
type = ChangeAnim
triggerall = var(0)<0&&root,numexplod(50000)
trigger1 = var(30)%4=0
value = ifelse((Anim-30000)%100=17,Anim-17,Anim+1)

[State 900, 4]
type = PlaySND
triggerall = AnimElemTime(1)=0&&root,numexplod(50000) && var(30)>1
trigger1 = Anim=30556||Anim=30565||Anim=30605||Anim=30614
value = 5100,1
channel = 15

;移動
[state 31000]
type = RemoveExplod
triggerall = var(0)!=0&&root,numexplod(50000)
trigger1 = var(30)%4=0

;屋根
[state -2]
type = Helper
trigger1 = !numhelper(21030) && root,var(12)!=2001
id = 21030
stateno=21030
name = "roof"
pos = 0,-floor(150*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;鎌
[state -2]
type = Helper
trigger1 = !numhelper(21040) && root,var(12)!=2001
id = 21040
stateno=21025
name = "DeathSize"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(31500) && root,var(12)!=2001
id = 31500
anim = Anim+1000
pos = -floor(100*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32000) && root,var(12)!=2001
id = 32000
anim = Anim+1500
pos = -floor(95*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32500) && root,var(12)!=2001
id = 32500
anim = Anim+2000
pos = -floor(95*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33000) && root,var(12)!=2001
id = 33000
anim = Anim+2500
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33500) && root,var(12)!=2001
id = 33500
anim = Anim+3000
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34000) && root,var(12)!=2001
id = 34000
anim = Anim+3500
pos = floor(90*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34500) && root,var(12)!=2001
id = 34500
anim = Anim+4000
pos = -floor(75*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35000) && root,var(12)!=2001
id = 35000
anim = Anim+4500
pos = -floor(75*const(size.xscale)),floor(152*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35500) && root,var(12)!=2001
id = 35500
anim = Anim+5000
pos = -floor(75*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36000) && root,var(12)!=2001
id = 36000
anim = Anim+5500
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36500) && root,var(12)!=2001
id = 36500
anim = Anim+6000
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(37000) && root,var(12)!=2001
id = 37000
anim = Anim+6500
pos = floor(70*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[state 29000]
type = ChangeState
trigger1 = !root,var(12)&&roundstate=0
value = 29000

;木騎（本体・到着時）
[statedef 21008]
type = S
movetype= I
physics = N
sprpriority = -4
velset = 0,0

[state 29000]
type = PosSet
trigger1 = !(root,fvar(12)&&root,numhelper(30000)&&root,numhelper(30005))
x = ifelse(facing=-1,320,-320)
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))
persistent=0

[state 21000]
type = PosSet
trigger1 = 1
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = (Anim-500)%10000=51||(Anim-500)%10000=54||(Anim-500)%10000=60||(Anim-500)%10000=63
trigger2 = (Anim-500)%10000=111||(Anim-500)%10000=108||(Anim-500)%10000=102||(Anim-500)%10000=117
;trigger2 = (Anim-500)%10000=116||(Anim-500)%10000=113||(Anim-500)%10000=107||(Anim-500)%10000=104
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))+floor(3*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = (Anim-500)%10000=50||(Anim-500)%10000=55||(Anim-500)%10000=59||(Anim-500)%10000=64
trigger2 = (Anim-500)%10000=112||(Anim-500)%10000=107||(Anim-500)%10000=103||(Anim-500)%10000=116
;trigger2 = (Anim-500)%10000=117||(Anim-500)%10000=112||(Anim-500)%10000=108||(Anim-500)%10000=103
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))+floor(6*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = ((Anim-500)%10000=[56,58])||((Anim-500)%10000=[65,67])
trigger2 = ((Anim-500)%10000=[104,106])||((Anim-500)%10000=[113,115])
;trigger2 = ((Anim-500)%10000=[109,111])||((Anim-500)%10000=[100,102])
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))+floor(9*const(size.yscale))

[state 29000]
type = ParentVarSet
trigger1 = !(root,fvar(12)&&root,numhelper(30000)&&root,numhelper(30005))
fvar(22) = floor(pos x)*ifelse(root,teamside=2,-1,1)

[state 21000]
type = ChangeAnim
trigger1 = !time && ((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
value = 30550

[state 21000]
type = RemoveExplod
trigger1 = !time && ((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=2001
var(12) = ifelse((-var(12)+2000)>=(root,var(12)-1),-root,var(12)+2001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 20000]
type = ParentVarSet
trigger1 = !time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(root,var(40)=1||(root,var(40)=-1&&root,var(42)>=root,var(41)))
var(40) = 11

[state 20000]
type = ParentVarSet
trigger1 = time&&root,var(40)=[10,11]
var(40) = 11

[state 20000]
type = ParentVarSet
trigger1 = numhelper(18000)&&root,var(42)>=root,var(41)
trigger1 = ifelse(facing=1,helper(18000),pos x-pos x,-(helper(18000),pos x-pos x))<10
var(40) = 1

[State 900, 4]
type = VelSet
trigger1 = root,numexplod(50000)
x = 2.0

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[State 900, 4]
type = ChangeState
trigger1 = numhelper(18000)
trigger1 = ifelse(facing=1,helper(18000),pos x-pos x,-(helper(18000),pos x-pos x))<10
value = 21000

[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 30000]
type = ChangeAnim
trigger1 = var(30)%4=0
value = ifelse((Anim-30050)%100=17,Anim-17,Anim+1)

[State 900, 4]
type = PlaySND
triggerall = AnimElemTime(1)=0 && var(30)>1
trigger1 = Anim=30550||Anim=30559
value = 5100,1
channel = 15

[state 31000]
type = RemoveExplod
trigger1 = var(30)%4=0

;屋根
[state -2]
type = Helper
trigger1 = !numhelper(21030) && root,var(12)!=2001
id = 21030
stateno=21030
name = "roof"
pos = 0,-floor(150*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;鎌
[state -2]
type = Helper
trigger1 = !numhelper(21040) && root,var(12)!=2001
id = 21040
stateno=21025
name = "DeathSize"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(31500) && root,var(12)!=2001
id = 31500
anim = Anim+1000
pos = -floor(100*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32000) && root,var(12)!=2001
id = 32000
anim = Anim+1500
pos = -floor(95*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32500) && root,var(12)!=2001
id = 32500
anim = Anim+2000
pos = -floor(95*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33000) && root,var(12)!=2001
id = 33000
anim = Anim+2500
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33500) && root,var(12)!=2001
id = 33500
anim = Anim+3000
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34000) && root,var(12)!=2001
id = 34000
anim = Anim+3500
pos = floor(90*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34500) && root,var(12)!=2001
id = 34500
anim = Anim+4000
pos = -floor(75*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35000) && root,var(12)!=2001
id = 35000
anim = Anim+4500
pos = -floor(75*const(size.xscale)),floor(152*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35500) && root,var(12)!=2001
id = 35500
anim = Anim+5000
pos = -floor(75*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36000) && root,var(12)!=2001
id = 36000
anim = Anim+5500
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36500) && root,var(12)!=2001
id = 36500
anim = Anim+6000
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(37000) && root,var(12)!=2001
id = 37000
anim = Anim+6500
pos = floor(70*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 21500

;攻撃前待機ステート
[statedef 21009]
type=S
movetype=U
physics = N
velset = 0,0
anim = 30500

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 21000]
type = PosSet
trigger1 = 1
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 190]
type = VarSet
trigger1 = !var(30)&&!time
var(50) = ifelse(root,fvar(23)>=90000,10,ifelse(root,var(40)<0||root,var(40)>=9,4,root,var(40)))

[state 190]
type = VarSet
trigger1 = !var(30)&&!time
var(35) = ifelse(P2dist X<0,-1,1)

[state 190]
type = Turn
trigger1 = !var(30)&&!time&&P2dist X<0

[state 190]
type = VarSet
trigger1 = !var(30)&&!time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&root,var(40)!=5
var(35) = ifelse(facing!=root,facing,-1,1)

[state 19000]
type = ParentVarAdd
trigger1 = !var(30)&&!time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&((var(50)=[4,6])||root,fvar(23)>=90000)
var(42) = -floor(ifelse(floor(root,var(43)/1000)<50,160-floor((floor(root,var(43)/1000)-1)*1.0/1.50),81)*(1.0+((floor((root,var(41)-72)*3.125/2)-floor(root,var(43)/1000))*1.00/200)*(root,var(43)<floor((root,var(41)-72)*3.125/2))))
persistent=0

;援軍使用回数
[state 13000]
type = varset
trigger1 = !var(30)&&!time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&!var(40)
var(10) = 0

[state 13000]
type = varadd
trigger1 = !var(30)&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&!time
var(10) = ifelse(var(50)>=8,3,1)

;援軍使用不能時間
[state 12000]
type = VarSet
trigger1 = !var(30)&&!time
var(40) = floor(ifelse((prevstateno=[13500,13600])||(prevstateno=[15000,15031]),3,var(10))*75*(1.0+floor((100-floor(root,var(43)/1000))*1.0/25)))

;援軍使用不能時間
[state 12000]
type = VarSet
trigger1 = !var(30)&&!time
trigger1 = floor(ifelse((prevstateno=[13500,13600])||(prevstateno=[15000,15031]),3,var(10))*75*(1.0+floor((100-floor(root,var(43)/1000))*1.0/25)))>600
var(40) = 600

[state 12000]
type = ParentVarSet
trigger1 = !var(30)&&!time
var(40) = -1

;BASARAゲージ回復不能時間
[state 2000]
type = ParentVarAdd
trigger1 = !var(30)&&!time&&(var(50)=[7,9])
var(9)=ifelse((root,var(9)=[1,999]),420-root,var(9),420)

[state 13500]
type = NotHitBy
trigger1 = !var(30)&&!time&&(var(50)=[8,9])
value = SCA

[state 13500]
type = SuperPause
trigger1 = !var(30)&&!time&&var(50)=8
time = 30+ifelse(root,var(57)>=4,40,ifelse(root,var(57)=3,33,ifelse(root,var(57)=2,22,ifelse(root,var(57)=1,12,0))))+14
movetime=30+ifelse(root,var(57)>=4,40,ifelse(root,var(57)=3,33,ifelse(root,var(57)=2,22,ifelse(root,var(57)=1,12,0))))+14
p2defmul = 1
sound = -1
anim = -1
darken = 0
poweradd = 0

;ゲージ減少
[state 13500]
type = PowerAdd
trigger1 = !var(30)&&!time&&var(50)=8
value = -1000*(root,var(57)+1)

[state 13000]
type = ParentVaradd
trigger1 = !var(30)&&!time&&(var(50)=[7,9])
var(42) = -200

;援軍レベル減少
[state 13500]
type = ParentVarAdd
trigger1 = !var(30)&&!time&&var(50)=8
var(43) = ifelse(root,var(43)<=30000,-root,var(43)+1000,-30000)

;援軍カウンター使用回数
[state 13500]
type = ParentVarAdd
trigger1 = !var(30)&&!time&&var(50)=8&&root,var(57)<5
var(57) = 1

[state 13500]
type = PlaySND
trigger1 = !var(30)&&!time&&var(50)=8
value = 3500,0

[state 13500]
type = PlaySND
trigger1 = !var(30)&&!time&&var(50)=9
value = 3600,0

;カットイン
[state 13500]
type = Helper
trigger1 = !var(30)&&!time&&var(50)=8
id = 7565
stateno=7565
pos = 0,0
postype = p1
ignorehitpause=1
supermovetime=60

[state 190]
type = ChangeAnim
trigger1 = !time
value = 30500+3*50+ifelse(var(50)=7,3,ifelse(var(50)=6,2,ifelse(var(50)=5,1,0)))*50

[state 190]
type = StatetypeSet
trigger1 = var(30)=ifelse(var(50)=10,24,ifelse(var(50)=8,ifelse(root,var(57)>=5,59,ifelse(root,var(57)=4,52,ifelse(root,var(57)=3,43,ifelse(root,var(57)=2,33,19)))),ifelse(var(50)=7,1,(11-(var(50)=4)*3))))-1
trigger2 = root,fvar(23)>=90000&&var(30)>=4
movetype=A

[state 190]
type = ChangeState
trigger1 = var(30)=ifelse(var(50)=10,24,ifelse(var(50)=8,ifelse(root,var(57)>=5,59,ifelse(root,var(57)=4,52,ifelse(root,var(57)=3,43,ifelse(root,var(57)=2,33,19)))),ifelse(var(50)=7,1,(11-(var(50)=4)*3))))
value = 21000+(var(50))*10+(var(50)=10)*400

;自爆用
[state 20000]
type = PalFX
trigger1 = root,fvar(23)>=90000
add = -16,-32,-64
time = -1
persistent=0

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=2001
var(12) = ifelse((-var(12)+2000)>=(root,var(12)-1),-root,var(12)+2001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 20000]
type = null;ChangeAnim
trigger1 = var(30)=3
value = 30500

[state 20000]
type = RemoveExplod
trigger1 = !var(30)&&!time
;trigger2 = var(30)=3

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
trigger2 = var(50)=8 && time<(30+ifelse(root,var(57)>=4,40,ifelse(root,var(57)=3,33,ifelse(root,var(57)=2,22,ifelse(root,var(57)=1,12,0)))))
var(30) = 1

[state 30000]
type = ChangeAnim
triggerall = var(50)=6
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = 0;var(30)=0
trigger2 = var(30)=4
trigger3 = var(30)=8
trigger4 = var(30)=14
trigger5 = var(30)=17
trigger6 = var(30)=20
trigger7 = var(30)=23
trigger8 = var(30)=26
trigger9 = var(30)=29
value = Anim+1

[state 31000]
type = RemoveExplod
triggerall = var(50)=6
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = 0;var(30)=0
trigger2 = var(30)=4
trigger3 = var(30)=8
trigger4 = var(30)=14
trigger5 = var(30)=17
trigger6 = var(30)=20
trigger7 = var(30)=23
trigger8 = var(30)=26
trigger9 = var(30)=29

;屋根
[State 40, 1]
type = Explod
trigger1 = !NumExplod(30000) && root,var(12)!=2001
id = 30000
anim = Anim-500
pos = 0,-floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

;鎌
[state -2]
type = Helper
trigger1 = !numhelper(21040) && root,var(12)!=2001
id = 21040
stateno=21025
name = "DeathSize"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(31500) && root,var(12)!=2001
id = 31500
anim = Anim+1000
pos = -floor(100*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32000) && root,var(12)!=2001
id = 32000
anim = Anim+1500
pos = -floor(95*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32500) && root,var(12)!=2001
id = 32500
anim = Anim+2000
pos = -floor(95*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33000) && root,var(12)!=2001
id = 33000
anim = Anim+2500
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33500) && root,var(12)!=2001
id = 33500
anim = Anim+3000
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34000) && root,var(12)!=2001
id = 34000
anim = Anim+3500
pos = floor(90*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34500) && root,var(12)!=2001
id = 34500
anim = Anim+4000
pos = -floor(75*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35000) && root,var(12)!=2001
id = 35000
anim = Anim+4500
pos = -floor(75*const(size.xscale)),floor(152*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35500) && root,var(12)!=2001
id = 35500
anim = Anim+5000
pos = -floor(75*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36000) && root,var(12)!=2001
id = 36000
anim = Anim+5500
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36500) && root,var(12)!=2001
id = 36500
anim = Anim+6000
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(37000) && root,var(12)!=2001
id = 37000
anim = Anim+6500
pos = floor(70*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||(root,fvar(23)>=90000&&var(30)>=5)
value = 21500

;木騎（本体・弓発射）
[statedef 21040]
type = S
movetype= A
physics = N
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 21000]
type = PosSet
trigger1 = !time
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 30000]
type = ChangeAnim
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=0
trigger2 = var(30)=4
trigger3 = var(30)=8
trigger4 = var(30)=12
trigger5 = var(30)=16
trigger6 = var(30)=19
trigger7 = var(30)=22
trigger8 = var(30)=25
trigger9 = var(30)=28
trigger10 = var(30)=31
trigger11 = var(30)=34
trigger12 = var(30)=37
trigger13 = var(30)=40
trigger14 = var(30)=43
trigger15 = var(30)=46
trigger16 = var(30)=49
trigger17 = var(30)=52
trigger18 = var(30)=55
trigger19 = var(30)=58
trigger20 = var(30)=61
trigger21 = var(30)=65
trigger22 = var(30)=69
trigger23 = var(30)=73
trigger24 = var(30)=77
value = Anim+1

[state 31000]
type = RemoveExplod
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=0
trigger2 = var(30)=4
trigger3 = var(30)=8
trigger4 = var(30)=12
trigger5 = var(30)=16
trigger6 = var(30)=19
trigger7 = var(30)=22
trigger8 = var(30)=25
trigger9 = var(30)=28
trigger10 = var(30)=31
trigger11 = var(30)=34
trigger12 = var(30)=37
trigger13 = var(30)=40
trigger14 = var(30)=43
trigger15 = var(30)=46
trigger16 = var(30)=49
trigger17 = var(30)=52
trigger18 = var(30)=55
trigger19 = var(30)=58
trigger20 = var(30)=61
trigger21 = var(30)=65
trigger22 = var(30)=69
trigger23 = var(30)=73
trigger24 = var(30)=77

;屋根
[state -2]
type = Helper
trigger1 = !numhelper(21030) && root,var(12)!=2001
id = 21030
stateno=21030
name = "roof"
pos = 0,-floor(150*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;鎌
[state -2]
type = Helper
trigger1 = !numhelper(21040) && root,var(12)!=2001
id = 21040
stateno=21025
name = "DeathSize"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(31500) && root,var(12)!=2001
id = 31500
anim = Anim+1000
pos = -floor(100*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32000) && root,var(12)!=2001
id = 32000
anim = Anim+1500
pos = -floor(95*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32500) && root,var(12)!=2001
id = 32500
anim = Anim+2000
pos = -floor(95*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33000) && root,var(12)!=2001
id = 33000
anim = Anim+2500
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33500) && root,var(12)!=2001
id = 33500
anim = Anim+3000
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34000) && root,var(12)!=2001
id = 34000
anim = Anim+3500
pos = floor(90*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34500) && root,var(12)!=2001
id = 34500
anim = Anim+4000
pos = -floor(75*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35000) && root,var(12)!=2001
id = 35000
anim = Anim+4500
pos = -floor(75*const(size.xscale)),floor(152*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35500) && root,var(12)!=2001
id = 35500
anim = Anim+5000
pos = -floor(75*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36000) && root,var(12)!=2001
id = 36000
anim = Anim+5500
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36500) && root,var(12)!=2001
id = 36500
anim = Anim+6000
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(37000) && root,var(12)!=2001
id = 37000
anim = Anim+6500
pos = floor(70*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[state 12000]
type = ParentVarSet
trigger1 = var(30)=81
var(40) = 10+var(40)

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 12000]
type = VelSet
trigger1 = 1
x = 0

;援軍ヒット判別
[state 12000]
type = VarSet
trigger1 = numhelper(26700)
var(19) = ifelse((helper(26700),movecontact=[1,2]),(12+11)*ifelse(helper(26700),moveguarded||!helper(26700),numtarget,-1,1),0)

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = numhelper(26700)
trigger1 = (helper(26700),movecontact=[1,2])
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(helper(26700),moveguarded||!helper(26700),numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26700)
trigger1 = helper(26700),movehit=1&&helper(26700),numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26700)
trigger1 = helper(26700),movehit=1&&helper(26700),numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = numhelper(26700)
trigger1 = helper(26700),movehit=1
fvar(15) = .00005*floor(ifelse(14*root,fvar(14)<1,1+(root,var(2)%5=1),14*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = numhelper(26700)
trigger1 = helper(26700),movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=2001
var(12) = ifelse((-var(12)+2000)>=(root,var(12)-1),-root,var(12)+2001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

;弓効果音
[state -2]
type = PlaySnd
trigger1 = var(30)=29
trigger2 = var(30)=32&&floor(root,var(43)/1000)>=100
trigger3 = var(30)=36
trigger4 = var(30)=42&&floor(root,var(43)/1000)>=50
trigger5 = var(30)=48&&floor(root,var(43)/1000)>=50
value = 7300,0
channel = 4

;弓矢
[state -2]
type = Helper
trigger1 = var(30)=29
trigger2 = var(30)=33&&floor(root,var(43)/1000)>=100
trigger3 = var(30)=36
trigger4 = var(30)=42&&floor(root,var(43)/1000)>=50
trigger5 = var(30)=48&&floor(root,var(43)/1000)>=50
id = 26700
stateno=26700
name = "arrow"
pos = floor((-30+random%5*8)*const(size.xscale)),floor((-10-random%5*8)*const(size.yscale))
postype = P1
ownpal = 1
sprpriority = -4
pausemovetime=999999
supermovetime=999999

[state 190]
type = ChangeState
trigger1 = var(30)=81
value = 21000

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 21500

;木騎(弓矢)
[statedef 26700]
type = A
movetype=A
physics =N
sprpriority = -4
velset = 0,0
anim = 26700

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20000]
type = AngleDraw
trigger1 = 1
value = -5

[state 20000]
type = PlaySnd
trigger1 = !time
value = 7300,0

[State 26700, 1]
type = Explod
trigger1 = !Numexplod(26300) && !time
id = 26300
anim = 26300
pos = 0,0
postype = p1
ownpal = 1
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale)*1.5,const(size.yscale)*1.5

[state 20000]
type = VelSet
trigger1 = time
x = 30.0*const(size.xscale)
y = 3.0*const(size.yscale)

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;Attack Lv.2
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed && root,numexplod(50000)
trigger1 = 1
damage = floor(ifelse(14*root,fvar(0)<1,1+(root,var(2)%5=4),14*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.slidetime = 10
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*parent,var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*parent,var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0013,-6.0*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*parent,var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),40+12,32-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+12)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,9+random%2)
guardsound = s7000,4
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = A,NP
hitflag = MAFD
guardflag = MA

[state -1]
type = AttackDist
trigger1 = movecontact
value = 0

;en first hit
[state -2]
type = parentVarset
triggerall = root,var(44)%2048<1024 && root,numexplod(8798)
trigger1 = movehit=1
var(11) = 2
ignorehitpause=1

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

[state -1]
type = targetstate
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
value = 926+10*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(14*root,fvar(14)<1,1+(root,var(2)%5=1),14*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 4
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)+floor(-60*const(size.yscale))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-180*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[State 40, 1]
type = RemoveExplod
trigger1 = (FrontEdgeBodyDist<-40&&!movecontact)||movecontact>=1||movereversed||Anim=90000

[state 20000]
type = ChangeAnim
triggerall = Anim!=90000
trigger1 = (FrontEdgeBodyDist<-40&&!movecontact)||movecontact>=1||movereversed
value = 90000

[state 190]
type = DestroySelf
trigger1 = (FrontEdgeBodyDist<-40&&!movecontact)||movecontact>=12||movereversed

;木騎（本体・鎌振り）
[statedef 21050]
type = S
movetype= A
physics = N
anim = 30700
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 21000]
type = PosSet
trigger1 = !time
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = AngleSet
trigger1 = var(30)=[0,17]
value = 0

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
trigger1 = var(30)=20
trigger2 = var(30)=23
trigger3 = var(30)=26
trigger4 = var(30)=29
trigger5 = var(30)=31
value = -2

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
trigger1 = var(30)=33
trigger2 = var(30)=35
trigger3 = var(30)=37
trigger4 = var(30)=39
value = 1

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
trigger1 = var(30)=41
trigger2 = var(30)=43
trigger3 = var(30)=45
trigger4 = var(30)=47
trigger5 = var(30)=49
trigger6 = var(30)=51
trigger7 = var(30)=53
trigger8 = var(30)=55
trigger9 = var(30)=57
trigger10 = var(30)=59
trigger11 = var(30)=61
value = 1.5

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
trigger1 = var(30)=63
trigger2 = var(30)=65
trigger3 = var(30)=67
trigger4 = var(30)=69
trigger5 = var(30)=71
trigger6 = var(30)=73
trigger7 = var(30)=75
value = -1.5

[state 20000]
type = AngleDraw
trigger1 = 1

[state 30000]
type = ChangeAnim
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=0
trigger2 = var(30)=8
trigger3 = var(30)=14
trigger4 = var(30)=20
trigger5 = var(30)=26
trigger6 = var(30)=33
trigger7 = var(30)=37
trigger8 = var(30)=41
trigger9 = var(30)=44
trigger10 = var(30)=47
trigger11 = var(30)=51
trigger12 = var(30)=54
trigger13 = var(30)=59
trigger14 = var(30)=65
trigger15 = var(30)=71
trigger16 = var(30)=75
trigger17 = var(30)=80
value = Anim+1

[state 31000]
type = RemoveExplod
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=0
trigger2 = var(30)=8
trigger3 = var(30)=14
trigger4 = var(30)=20
trigger5 = var(30)=26
trigger6 = var(30)=33
trigger7 = var(30)=37
trigger8 = var(30)=41
trigger9 = var(30)=44
trigger10 = var(30)=47
trigger11 = var(30)=51
trigger12 = var(30)=54
trigger13 = var(30)=59
trigger14 = var(30)=65
trigger15 = var(30)=71
trigger16 = var(30)=75
trigger17 = var(30)=80

;鎌
[state -2]
type = Helper
trigger1 = !numhelper(21040) && root,var(12)!=2001
id = 21040
stateno=21025
name = "DeathSize"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(31500) && root,var(12)!=2001
id = 31500
anim = Anim+1000
pos = -floor(100*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32000) && root,var(12)!=2001
id = 32000
anim = Anim+1500
pos = -floor(95*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32500) && root,var(12)!=2001
id = 32500
anim = Anim+2000
pos = -floor(95*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33000) && root,var(12)!=2001
id = 33000
anim = Anim+2500
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33500) && root,var(12)!=2001
id = 33500
anim = Anim+3000
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34000) && root,var(12)!=2001
id = 34000
anim = Anim+3500
pos = floor(90*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34500) && root,var(12)!=2001
id = 34500
anim = Anim+4000
pos = -floor(75*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35000) && root,var(12)!=2001
id = 35000
anim = Anim+4500
pos = -floor(75*const(size.xscale)),floor(152*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35500) && root,var(12)!=2001
id = 35500
anim = Anim+5000
pos = -floor(75*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36000) && root,var(12)!=2001
id = 36000
anim = Anim+5500
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36500) && root,var(12)!=2001
id = 36500
anim = Anim+6000
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(37000) && root,var(12)!=2001
id = 37000
anim = Anim+6500
pos = floor(70*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[state 12000]
type = ParentVarSet
trigger1 = var(30)=96
var(40) = 10+var(40)

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 12000]
type = PlaySND
trigger1 = var(30)=30
trigger2 = var(30)=48
trigger3 = var(30)=66
value = 21000,0
channel = 10

[state 20000]
type = VelSet
trigger1 = numhelper(30000)
trigger1 = vel x>0&&ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(floor(60*const(size.xscale))+const(size.ground.front))
trigger2 = numhelper(30000)
trigger2 = vel x<0&&ifelse(facing=1,-(helper(30005),pos x-pos x),(helper(30000),pos x-pos x))<(floor(60*const(size.xscale))+const(size.ground.back))
x = 0

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = VarSet
trigger1 = numhelper(21040)
var(19) = ifelse((helper(21040),movecontact=[1,2]),(17+13)*ifelse(helper(21040),moveguarded||!helper(21040),numtarget,-1,1),0)

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = numhelper(21040)
trigger1 = (helper(21040),movecontact=[1,2])
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(helper(21040),moveguarded||!helper(21040),numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(21040)
trigger1 = helper(21040),movehit=1&&helper(21040),numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(21040)
trigger1 = helper(21040),movehit=1&&helper(21040),numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;引き剥がし効果
[state 12000]
type = ParentVarSet
trigger1 = numhelper(21040)
trigger1 = helper(21040),movehit=1&&helper(21040),numtarget&&root,var(6)!=0
var(6) = 0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = numhelper(21040)
trigger1 = helper(21040),movehit=1
fvar(15) = .00005*floor(ifelse(27*root,fvar(14)<1,1+(root,var(2)%5=1),27*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = numhelper(21040)
trigger1 = helper(21040),movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=2001
var(12) = ifelse((-var(12)+2000)>=(root,var(12)-1),-root,var(12)+2001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state 190]
type = ChangeState
trigger1 = var(30)=96
value = 21000

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 21500

;木騎（本体・跳躍）
[statedef 21060]
type = S
movetype= A
physics = N
sprpriority = -4
velset = 0,0
movehitpersist = (IsHelper)

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 21000]
type = PosSet
trigger1 = var(30)<18
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;
[state 20000]
type = Posfreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 30000]
type = ChangeAnim
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=0
trigger2 = var(30)=4
trigger3 = var(30)=8
trigger4 = var(30)=14
trigger5 = var(30)=17
trigger6 = var(30)=20
trigger7 = var(30)=23
trigger8 = var(30)=26
trigger9 = var(30)=29
trigger10 = var(30)=31
trigger11 = var(30)=33
trigger12 = var(30)=35
trigger13 = var(30)=37
trigger14 = var(30)=39
trigger15 = var(30)=41
trigger16 = var(30)=43
trigger17 = var(30)=45
trigger18 = var(30)=47
trigger19 = var(30)=49
trigger20 = var(30)=53
trigger21 = var(30)=55
trigger22 = var(30)=57
trigger23 = var(30)=59
trigger24 = var(30)=61
trigger25 = var(30)=63
trigger26 = var(30)=65
trigger27 = var(30)=67
trigger28 = var(30)=68
trigger29 = var(30)=70
trigger30 = var(30)=71
trigger31 = var(30)=72
trigger32 = var(30)=73
trigger33 = var(30)=74
trigger34 = var(30)=75
trigger35 = var(30)=76
trigger36 = var(30)=77
trigger37 = var(30)=78
trigger38 = var(30)=79
trigger39 = var(30)=80
value = Anim+1

[state 31000]
type = RemoveExplod
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=0
trigger2 = var(30)=4
trigger3 = var(30)=8
trigger4 = var(30)=14
trigger5 = var(30)=17
trigger6 = var(30)=20
trigger7 = var(30)=23
trigger8 = var(30)=26
trigger9 = var(30)=29
trigger10 = var(30)=31
trigger11 = var(30)=33
trigger12 = var(30)=35
trigger13 = var(30)=37
trigger14 = var(30)=39
trigger15 = var(30)=41
trigger16 = var(30)=43
trigger17 = var(30)=45
trigger18 = var(30)=47
trigger19 = var(30)=49
trigger20 = var(30)=53
trigger21 = var(30)=55
trigger22 = var(30)=57
trigger23 = var(30)=59
trigger24 = var(30)=61
trigger25 = var(30)=63
trigger26 = var(30)=65
trigger27 = var(30)=67
trigger28 = var(30)=68
trigger29 = var(30)=70
trigger30 = var(30)=71
trigger31 = var(30)=72
trigger32 = var(30)=73
trigger33 = var(30)=74
trigger34 = var(30)=75
trigger35 = var(30)=76
trigger36 = var(30)=77
trigger37 = var(30)=78
trigger38 = var(30)=79
trigger39 = var(30)=80

;屋根
[state -2]
type = Helper
trigger1 = !numhelper(21030) && root,var(12)!=2001
id = 21030
stateno=21030
name = "roof"
pos = 0,-floor(150*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;鎌
[state -2]
type = Helper
trigger1 = !numhelper(21040) && root,var(12)!=2001
id = 21040
stateno=21025
name = "DeathSize"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(31500) && root,var(12)!=2001
id = 31500
anim = Anim+1000
pos = -floor(100*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32000) && root,var(12)!=2001
id = 32000
anim = Anim+1500
pos = -floor(95*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32500) && root,var(12)!=2001
id = 32500
anim = Anim+2000
pos = -floor(95*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33000) && root,var(12)!=2001
id = 33000
anim = Anim+2500
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33500) && root,var(12)!=2001
id = 33500
anim = Anim+3000
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34000) && root,var(12)!=2001
id = 34000
anim = Anim+3500
pos = floor(90*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34500) && root,var(12)!=2001
id = 34500
anim = Anim+4000
pos = -floor(75*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35000) && root,var(12)!=2001
id = 35000
anim = Anim+4500
pos = -floor(75*const(size.xscale)),floor(152*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35500) && root,var(12)!=2001
id = 35500
anim = Anim+5000
pos = -floor(75*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36000) && root,var(12)!=2001
id = 36000
anim = Anim+5500
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36500) && root,var(12)!=2001
id = 36500
anim = Anim+6000
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(37000) && root,var(12)!=2001
id = 37000
anim = Anim+6500
pos = floor(70*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[state 12000]
type = ParentVarSet
trigger1 = var(30)=80
var(40) = 10+var(40)

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 12000]
type = StatetypeSet
trigger1 = var(30)=[29,91]
statetype=A
physics = N

[state 12000]
type = StatetypeSet
trigger1 = var(30)>=63
statetype=S
;physics = S

[state 12000]
type = PlaySND
trigger1 = var(30)=29
value = 2000,0

[state 12000]
type = PlaySND
trigger1 = var(30)=63
value = 5100,2

[state 12000]
type = VelSet
trigger1 = var(30)=[29,61]
x = ifelse(floor(root,var(43)/1000)<49,7.5,ifelse(floor(root,var(43)/1000)>=100,12.0,9.0))*const(size.xscale)

[state 12000]
type = VelSet
trigger1 = var(30)=[29,61]
y = -5.25+(var(30)-29)*.3375

[state 12000]
type = VelSet
trigger1 = var(30)=63
x = ifelse(floor(root,var(43)/1000)<49,6.0,ifelse(floor(root,var(43)/1000)>=100,0,9.0))*const(size.xscale)
y = 0

;地震
[State 40, 1]
type = Helper
trigger1 = var(30)=63
id = 6930
stateno = 6930
pos = 0,0
postype = p1
ownpal = 1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause = 1

;岩（前足）
[State 40, 1]
type = Helper
trigger1 = var(30)=63
id = 6925
stateno = 6920
pos = floor(90*const(size.xscale)),floor(240*const(size.yscale))
postype = p1
ownpal = 1
pausemovetime = 9999
supermovetime = 9999

;岩（後足）
[State 40, 1]
type = Helper
trigger1 = var(30)=63
id = 6925
stateno = 6920
pos = -floor(90*const(size.xscale)),floor(240*const(size.yscale))
postype = p1
ownpal = 1
pausemovetime = 9999
supermovetime = 9999

[state 20000]
type = VelSet
trigger1 = numhelper(30000)
trigger1 = vel x>0&&ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(floor(60*const(size.xscale))+const(size.ground.front))
trigger2 = numhelper(30000)
trigger2 = vel x<0&&ifelse(facing=1,-(helper(30005),pos x-pos x),(helper(30000),pos x-pos x))<(floor(60*const(size.xscale))+const(size.ground.back))
x = 0

;Attack Lv.4
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = (var(30)=[29,62])
damage = floor(ifelse(54*root,fvar(0)<1,1+(root,var(2)%5=4),54*root,fvar(0))*1.22)
ground.slidetime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
ground.hittime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
guard.hittime = 15
pausetime = 1,15
ground.velocity = -15.0*var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -15.0*var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6.0*var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))/51-.9)*const(size.yscale)
airguard.velocity = -6*var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),57+13,40-ifelse(floor(root,var(14)/60)>9,9,floor(root,var(14)/60))+13)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,2)
guardsound = s7000,2
getpower = floor(ifelse(root,var(9),0,floor(33*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(33*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(33*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(33*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = -4

[state 200]
type = MoveHitReset
trigger1 = var(30)=63

;Attack Lv.4
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = (var(30)=[63,66])
damage = floor(ifelse(54*root,fvar(0)<1,1+(root,var(2)%5=4),54*root,fvar(0))*1.22)
ground.slidetime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
ground.hittime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
guard.hittime = 15
pausetime = 1,15
ground.velocity = -15.0*var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -15.0*var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6.0*var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))/51-.9)*const(size.yscale)
airguard.velocity = -6*var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),59+13,40-ifelse(floor(root,var(14)/60)>9,9,floor(root,var(14)/60))+13)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,2)
guardsound = s7000,2
getpower = floor(ifelse(root,var(9),0,floor(33*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(33*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(33*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(33*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = Low
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = -4

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;引き剥がし効果
[state 12000]
type = ParentVarSet
trigger1 = movehit=1&&numtarget&&root,var(6)!=0
var(6) = 0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(54*root,fvar(14)<1,1+(root,var(2)%5=1),54*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 1

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = var(30)<62
var(18) = floor(120*const(size.yscale))

;Y座標
[state 240]
type = VarSet
trigger1 = var(30)>=62
var(18) = floor(200*const(size.yscale))+ifelse((P2bodydist Y-120)<-20,-20,floor(P2bodydist Y-120))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 12000]
type = AttackDist
trigger1 = var(30)=67
value = 0

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=2001
var(12) = ifelse((-var(12)+2000)>=(root,var(12)-1),-root,var(12)+2001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state 190]
type = VelSet
trigger1 = var(30)=74
x = 0
y = 0

[state 190]
type = ChangeState
trigger1 = var(30)=80
value = 21000

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 21500

;木騎（屋根）
[statedef 21030]
type = S
movetype=I
physics =N
sprpriority = -4
velset = 0,0
anim = 30000

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 30000]
type = VarSet
trigger1 = 1
var(30) = parent,var(30)

[state 31000]
type = ChangeAnim
trigger1 = selfanimexist(parent,anim-500) && root,numexplod(50000)
trigger1 = anim!=(parent,anim-500)
value = parent,anim-500

[state 20000]
type = AngleSet
triggerall = parent,stateno=21050
trigger1 = var(30)=[0,17]
value = 0

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
triggerall = parent,stateno=21050
trigger1 = var(30)=20
trigger2 = var(30)=23
trigger3 = var(30)=26
trigger4 = var(30)=29
trigger5 = var(30)=31
value = -2

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
triggerall = parent,stateno=21050
trigger1 = var(30)=33
trigger2 = var(30)=35
trigger3 = var(30)=37
trigger4 = var(30)=39
value = 1

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
triggerall = parent,stateno=21050
trigger1 = var(30)=41
trigger2 = var(30)=43
trigger3 = var(30)=45
trigger4 = var(30)=47
trigger5 = var(30)=49
trigger6 = var(30)=51
trigger7 = var(30)=53
trigger8 = var(30)=55
trigger9 = var(30)=57
trigger10 = var(30)=59
trigger11 = var(30)=61
value = 1.5

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
triggerall = parent,stateno=21050
trigger1 = var(30)=63
trigger2 = var(30)=65
trigger3 = var(30)=67
trigger4 = var(30)=69
trigger5 = var(30)=71
trigger6 = var(30)=73
trigger7 = var(30)=75
value = -1.5

[state 20000]
type = AngleDraw
trigger1 = parent,stateno=21050

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 21550

[state 190]
type = ChangeAnim
trigger1 = (parent,anim-500)%1000!=anim%1000
trigger1 = selfanimexist(31000+(parent,anim-500)%1000)
value = 31000+(parent,anim-500)%1000

[state 190]
type = BindToParent
trigger1 = 1
pos = 0,-ceil(150*const(size.xscale))
time=1
facing=1

[state 190]
type = DestroySelf
trigger1 = numhelper(20000)
trigger1 = helper(20000),stateno=29000

;木騎（鎌）
[statedef 21025]
type = S
movetype=I
physics =N
sprpriority = -4
velset = 0,0
anim = 31000

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 31000]
type = ChangeAnim
trigger1 = selfanimexist(parent,anim+500) && root,numexplod(50000)
trigger1 = anim!=(parent,anim+500)
value = parent,anim+500

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 21525

[state 190]
type = ChangeAnim
trigger1 = (parent,anim-500)%1000!=anim%1000
trigger1 = selfanimexist(31000+(parent,anim-500)%1000)
value = 31000+(parent,anim-500)%1000

[state 190]
type = StateTypeSet
trigger1 = prevstateno=[21027,21029]
movetype=I

[state 190]
type = ChangeState
trigger1 = parent,stateno=21050
value = 21027

[state 190]
type = ChangeState
trigger1 = parent,stateno=21070
value = 21028

[state 190]
type = BindToParent
trigger1 = 1
pos = 0,0
time=1
facing=1

[state 190]
type = DestroySelf
trigger1 = numhelper(20000)
trigger1 = helper(20000),stateno=29000

;木騎（鎌・鎌振り）
[statedef 21027]
type = S
movetype=A
physics =N
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20000]
type = ChangeAnim
trigger1 = !time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
value = 31000+4*50

;時間判別
[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 190]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = SelfAnimExist(Anim+1)
trigger1 = var(30)=18-11
trigger2 = var(30)=26-11
trigger3 = var(30)=36-11
trigger4 = var(30)=46-11
trigger5 = var(30)=54-11
trigger6 = var(30)=58-11
trigger7 = var(30)=62-11
trigger8 = var(30)=70-11
trigger9 = var(30)=76-11
trigger10 = var(30)=80-11
trigger11 = var(30)=88-11
value = anim+1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 21525

[state 190]
type = StateTypeSet
trigger1 = !time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
movetype=A

[state 190]
type = BindToParent
trigger1 = 1
pos = 0,0
time = 1
facing = 1

[state 190]
type = SprPriority
trigger1 = 1
value = -4

[state 20000]
type = varset
trigger1 = var(30)=18-11
fvar(10) = 0

[state 20000]
type = varadd
triggerall = root,numexplod(50000)
trigger1 = var(30)=[19-11,31-11]
fvar(10) = -(var(30)-(19-11))*.1

[state 20000]
type = varadd
triggerall = root,numexplod(50000)
trigger1 = var(30)=[32-11,51-11]
fvar(10) = (var(30)-(32-11))*.1

[state 20000]
type = varadd
triggerall = root,numexplod(50000)
trigger1 = var(30)=[52-11,71-11]
fvar(10) = -(var(30)-(52-11))*.1

[state 20000]
type = varadd
triggerall = root,numexplod(50000)
trigger1 = var(30)=[72-11,89-11]
fvar(10) = (var(30)-(72-11))*.1

[state 20000]
type = AngleSet
trigger1 = !time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
value = 0

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
trigger1 = var(30)=[18-11,91-11]
value = fvar(10)

[state 20000]
type = AngleSet
trigger1 = var(30)>=90-11
value = 0

[state 20000]
type = AngleDraw
trigger1 = 1

;Attack Lv.4
[state 200]
type = Hitdef
triggerall = root,numexplod(50000)
triggerall = AnimElem=1
trigger1 = Anim=31201
trigger2 = Anim=31202
trigger3 = Anim=31205&&floor(root,var(43)/1000)>=50
trigger4 = Anim=31208&&floor(root,var(43)/1000)<100
damage = floor(ifelse(ifelse(floor(root,var(43)/1000)<50,33,28)*root,fvar(0)<1,1+(root,var(2)%5=4),ifelse(floor(root,var(43)/1000)<50,33,28)*root,fvar(0))*1.22)
ground.slidetime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
ground.hittime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
guard.slidetime = 15
guard.hittime = 15
pausetime = 1,15
ground.velocity = -13.5*parent,var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -13.5*parent,var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -4*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-13.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*parent,var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),53+13,36-ifelse(floor(root,var(14)/60)>9,9,floor(root,var(14)/60))+13)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,5)
guardsound = s7000,4
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
sprpriority = -4

[state -1]
type = AttackDist
trigger1 = var(30)>=89-11
value = 0

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;引き剥がし効果
[state 12000]
type = ParentVarSet
trigger1 = movehit=1&&numtarget&&root,var(6)!=0
var(6) = 0
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(ifelse(floor(root,var(43)/1000)<50,33,28)*root,fvar(14)<1,1+(root,var(2)%5=1),ifelse(floor(root,var(43)/1000)<50,33,28)*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 5
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)+floor(-60*const(size.yscale))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = floor(180*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state -1]
type = MovehitReset
trigger1 = Anim=31201
trigger2 = Anim=31204
trigger3 = Anim=31207

[state 190]
type = ChangeState
trigger1 = parent,stateno!=21050
value = 21025

;木騎（鎌・援軍アシスト）
[statedef 21028]
type = S
movetype=A
physics =N
sprpriority = -4
velset = 0,0
anim = 31000+6*50

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別(暗転中以外)
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 21525

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state 190]
type = BindToParent
trigger1 = 1
pos = 0,0
time=1

[state 190]
type = turn
trigger1 = facing!=parent,facing

[state 190]
type = SprPriority
trigger1 = 1
value = -4

[state 20000]
type = varset
trigger1 = var(30)=18-11+30
fvar(10) = 0

[state 20000]
type = varadd
triggerall = root,numexplod(50000)
trigger1 = var(30)=[19-11+30,31-11+30]
fvar(10) = -(var(30)-(19-11+30))*.1

[state 20000]
type = varadd
triggerall = root,numexplod(50000)
trigger1 = var(30)=[32-11+30,51-11+30]
fvar(10) = (var(30)-(32-11+30))*.1

[state 20000]
type = varadd
triggerall = root,numexplod(50000)
trigger1 = var(30)=[52-11+30,71-11+30]
fvar(10) = -(var(30)-(52-11+30))*.1

[state 20000]
type = varadd
triggerall = root,numexplod(50000)
trigger1 = var(30)=[72-11+30,89-11+30]
fvar(10) = (var(30)-(72-11+30))*.1

[state 20000]
type = AngleSet
trigger1 = !time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
value = 0

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
trigger1 = var(30)=[18-11+30,91-11+30]
value = fvar(10)

[state 20000]
type = AngleSet
trigger1 = var(30)>=90-11+30
value = 0

[state 20000]
type = AngleDraw
trigger1 = 1

;Attack Lv.4
[state 200]
type = Hitdef
trigger1 = AnimElem=2
trigger2 = AnimElem=3
trigger3 = AnimElem=4
trigger4 = AnimElem=6
trigger5 = AnimElem=8
trigger6 = AnimElem=10
damage = floor(35*ifelse(root,fvar(1)<.25,.25,root,fvar(1))*root,fvar(2)*root,fvar(3)*root,fvar(4)*1.22),floor((35*root,fvar(3)*root,fvar(4)/4)*1.22)
ground.slidetime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
ground.hittime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
guard.slidetime = 15
guard.hittime = 15
pausetime = 1,15
ground.velocity = -13.5*parent,var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -13.5*parent,var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -4*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*parent,var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),37+13,20-ifelse(floor(root,var(14)/60)>9,9,floor(root,var(14)/60))+13)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,5)
guardsound = s7000,4
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,HA
hitflag = MAFD
guardflag = MA
sprpriority = -4

[state -1]
type = AttackDist
trigger1 = var(30)>=139-11
value = 0

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;引き剥がし効果
[state 12000]
type = ParentVarSet
trigger1 = movehit=1&&numtarget&&root,var(6)!=0
var(6) = 0
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(35*root,fvar(14)<1,1+(root,var(2)%5=1),35*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%6
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)+floor(-60*const(size.yscale))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = floor(180*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state -1]
type = MovehitReset
trigger1 = AnimElem=2
trigger2 = AnimElem=3
trigger3 = AnimElem=4
trigger4 = AnimElem=6
trigger5 = AnimElem=8
trigger6 = AnimElem=10

[state 190]
type = ChangeState
trigger1 = parent,stateno!=21070;||animtime=0
value = 21025

;木騎（本体・破壊）
[statedef 21500]
type = A
movetype=I
physics =N
anim = 30900
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20000]
type = PalFX
trigger1 = !time&&root,fvar(23)>=90000
add = -16,-32,-64
time = -1

[state 21000]
type = null;PosSet
trigger1 = !time
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))

[state 12000]
type = ParentVarSet
trigger1 = !time&&root,fvar(23)>=90000
var(40) = -1

[state 12000]
type = ParentVarSet
trigger1 = ScreenPos Y>=260
var(40) = 10+var(40)

[state 20515]
type = null;PosAdd
trigger1 = !time
x = 0
y = -floor(230*const(size.yscale))

[state 12000]
type = PlaySND
trigger1 = !time
value = 30,7
volume = 255

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 190]
type = Helper
trigger1 = !time && !numhelper(26200)
id  = 26200
stateno=26200
name = "explosion1"
pos = floor(0*const(size.xscale)),floor(0*const(size.yscale))
postype = P1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause=1

[state 190]
type = Helper
trigger1 = !time && !numhelper(26201)
id  = 26201
stateno=26201
name = "explosion2"
pos = floor(0*const(size.xscale)),floor(0*const(size.yscale))
postype = P1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause=1

;足1-1
[state -2]
type = Helper
trigger1 = !time && !numhelper(21550)
id = 21550
stateno=21550
name = "Foot1-1"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足1-2
[state -2]
type = Helper
trigger1 = !time && !numhelper(21551)
id = 21551
stateno=21551
name = "Foot1-2"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足1-3
[state -2]
type = Helper
trigger1 = !time && !numhelper(21552)
id = 21552
stateno=21552
name = "Foot1-3"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足2-1
[state -2]
type = Helper
trigger1 = !time && !numhelper(21553)
id = 21553
stateno=21553
name = "Foot2-1"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足2-2
[state -2]
type = Helper
trigger1 = !time && !numhelper(21554)
id = 21554
stateno=21554
name = "Foot2-2"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足2-3
[state -2]
type = Helper
trigger1 = !time && !numhelper(21555)
id = 21555
stateno=21555
name = "Foot2-3"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足3-1
[state -2]
type = Helper
trigger1 = !time && !numhelper(21556)
id = 21556
stateno=21556
name = "Foot3-1"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足3-2
[state -2]
type = Helper
trigger1 = !time && !numhelper(21557)
id = 21557
stateno=21557
name = "Foot3-2"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足3-3
[state -2]
type = Helper
trigger1 = !time && !numhelper(21558)
id = 21558
stateno=21558
name = "Foot3-3"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足4-1
[state -2]
type = Helper
trigger1 = !time && !numhelper(21559)
id = 21559
stateno=21559
name = "Foot4-1"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足4-2
[state -2]
type = Helper
trigger1 = !time && !numhelper(21560)
id = 21560
stateno=21560
name = "Foot4-2"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足4-3
[state -2]
type = Helper
trigger1 = !time && !numhelper(21561)
id = 21561
stateno=21561
name = "Foot4-3"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA
persistent=0

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = var(2)>0
var(2) = var(2)
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = var(3)>0
var(3) = var(3)
ignorehitpause=1

[state 12000]
type = VarSet
trigger1 = var(2)>0
var(2) = 0
ignorehitpause=1

[state 12000]
type = VarSet
trigger1 = var(3)>0
var(3) = 0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = ChangeState
trigger1 = ScreenPos Y >=260
value = 29000

;木騎（鎌・破壊）
[statedef 21525]
type = A
movetype=I
physics =N
anim = 31400
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 21000]
type = PosSet
trigger1 = !time
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(210*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;木騎（屋根・破壊）
[statedef 21530]
type = A
movetype=I
physics =N
anim = 30400
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = 0,-floor(150*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;木騎（足1-1・破壊）
[statedef 21550]
type = A
movetype=I
physics =N
anim = 30400+500*3
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = -floor(100*const(size.xscale)),floor(185*const(size.yscale))
time=2
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;木騎（足1-2・破壊）
[statedef 21551]
type = A
movetype=I
physics =N
anim = 30400+500*4
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = -floor(95*const(size.xscale)),floor(185*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;木騎（足1-3・破壊）
[statedef 21552]
type = A
movetype=I
physics =N
anim = 30400+500*5
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = -floor(95*const(size.xscale)),-floor(30*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;木騎（足2-1・破壊）
[statedef 21553]
type = A
movetype=I
physics =N
anim = 30400+500*6
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;木騎（足2-2・破壊）
[statedef 21554]
type = A
movetype=I
physics =N
anim = 30400+500*7
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(210*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;木騎（足2-3・破壊）
[statedef 21555]
type = A
movetype=I
physics =N
anim = 30400+500*8
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = floor(90*const(size.xscale)),-floor(30*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(210*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;木騎（足3-1・破壊）
[statedef 21556]
type = A
movetype=I
physics =N
anim = 30400+500*9
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = -floor(75*const(size.xscale)),floor(150*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(210*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;木騎（足3-2・破壊）
[statedef 21557]
type = A
movetype=I
physics =N
anim = 30400+500*10
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = -floor(75*const(size.xscale)),floor(152*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(210*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 20000]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;木騎（足3-3・破壊）
[statedef 21558]
type = A
movetype=I
physics =N
anim = 30400+500*11
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = -floor(75*const(size.xscale)),-floor(30*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(210*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 20000]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;木騎（足4-1・破壊）
[statedef 21559]
type = A
movetype=I
physics =N
anim = 30400+500*12
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 20000]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;木騎（足4-2・破壊）
[statedef 21560]
type = A
movetype=I
physics =N
anim = 30400+500*13
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 20000]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;木騎（足4-3・破壊）
[statedef 21561]
type = A
movetype=I
physics =N
anim = 30400+500*14
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 20000]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;援軍アシスト（木騎）
[statedef 21070]
type = S
movetype=A
physics =S
anim = 30500+4*50
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別(暗転中以外)
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 20000]
type = varset
trigger1 = !time&&prevstateno=21009
var(30) = 0

[state 20000]
type = AngleSet
trigger1 = var(30)=[0,19+30]
value = 0

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
trigger1 = var(30)=20+30
trigger2 = var(30)=23+30
trigger3 = var(30)=26+30
trigger4 = var(30)=29+30
trigger5 = var(30)=31+30
value = -2

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
trigger1 = var(30)=33+30
trigger2 = var(30)=35+30
trigger3 = var(30)=37+30
trigger4 = var(30)=39+30
value = 1

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
trigger1 = var(30)=41+30
trigger2 = var(30)=43+30
trigger3 = var(30)=45+30
trigger4 = var(30)=47+30
trigger5 = var(30)=49+30
trigger6 = var(30)=51+30
trigger7 = var(30)=53+30
trigger8 = var(30)=55+30
trigger9 = var(30)=57+30
trigger10 = var(30)=59+30
trigger11 = var(30)=61+30
value = 1.5

[state 20000]
type = AngleAdd
triggerall = root,numexplod(50000)
trigger1 = var(30)=63+30
trigger2 = var(30)=65+30
trigger3 = var(30)=67+30
trigger4 = var(30)=69+30
trigger5 = var(30)=71+30
trigger6 = var(30)=73+30
trigger7 = var(30)=75+30
value = -1.5

[state 20000]
type = AngleDraw
trigger1 = 1

[state 30000]
type = ChangeAnim
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=0
trigger2 = var(30)=8+30
trigger3 = var(30)=14+30
trigger4 = var(30)=20+30
trigger5 = var(30)=26+30
trigger6 = var(30)=33+30
trigger7 = var(30)=37+30
trigger8 = var(30)=41+30
trigger9 = var(30)=44+30
trigger10 = var(30)=47+30
trigger11 = var(30)=51+30
trigger12 = var(30)=54+30
trigger13 = var(30)=59+30
trigger14 = var(30)=65+30
trigger15 = var(30)=71+30
trigger16 = var(30)=75+30
trigger17 = var(30)=80+30
value = Anim+1

[state 31000]
type = RemoveExplod
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=0
trigger2 = var(30)=8+30
trigger3 = var(30)=14+30
trigger4 = var(30)=20+30
trigger5 = var(30)=26+30
trigger6 = var(30)=33+30
trigger7 = var(30)=37+30
trigger8 = var(30)=41+30
trigger9 = var(30)=44+30
trigger10 = var(30)=47+30
trigger11 = var(30)=51+30
trigger12 = var(30)=54+30
trigger13 = var(30)=59+30
trigger14 = var(30)=65+30
trigger15 = var(30)=71+30
trigger16 = var(30)=75+30
trigger17 = var(30)=80+30

;屋根
[State 40, 1]
type = Explod
trigger1 = !NumExplod(30000) && root,var(12)!=2001
id = 30000
anim = Anim-500
pos = 0,-floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

;鎌
[state -2]
type = Helper
trigger1 = !numhelper(21040) && root,var(12)!=2001
id = 21040
stateno=21025
name = "DeathSize"
pos = 0,-floor(24*const(size.yscale))
postype = P1
ownpal = 0
sprpriority = -4
pausemovetime=999999
supermovetime=999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(31500) && root,var(12)!=2001
id = 31500
anim = Anim+1000
pos = -floor(100*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32000) && root,var(12)!=2001
id = 32000
anim = Anim+1500
pos = -floor(95*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(32500) && root,var(12)!=2001
id = 32500
anim = Anim+2000
pos = -floor(95*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33000) && root,var(12)!=2001
id = 33000
anim = Anim+2500
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(33500) && root,var(12)!=2001
id = 33500
anim = Anim+3000
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34000) && root,var(12)!=2001
id = 34000
anim = Anim+3500
pos = floor(90*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(34500) && root,var(12)!=2001
id = 34500
anim = Anim+4000
pos = -floor(75*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35000) && root,var(12)!=2001
id = 35000
anim = Anim+4500
pos = -floor(75*const(size.xscale)),floor(152*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(35500) && root,var(12)!=2001
id = 35500
anim = Anim+5000
pos = -floor(75*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36000) && root,var(12)!=2001
id = 36000
anim = Anim+5500
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(36500) && root,var(12)!=2001
id = 36500
anim = Anim+6000
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale));leg1
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[State 40, 1]
type = Explod
trigger1 = !NumExplod(37000) && root,var(12)!=2001
id = 37000
anim = Anim+6500
pos = floor(70*const(size.xscale)),-floor(30*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

[state 12000]
type = ParentVarSet
trigger1 = var(30)=126
var(40) = 10+var(40)

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 200]
type = helper
trigger1 = !var(30)&&!time
id = 7570
stateno = 7570
pos = 0,floor(-180*const(size.yscale))
postype = P1
pausemovetime=30
supermovetime=30
ownpal = 1

[state 13000]
type = SuperPause
trigger1 = !var(30)&&!time
time = 30
movetime = 30
p2defmul = 1
sound = -1
anim = -1
darken = 0
poweradd = 0

[state 13000]
type = PowerAdd
trigger1 = !var(30)&&!time
value  = -1000

[state 13000]
type = VarAdd
trigger1 = !var(30)&&!time
var(42) = -200

[state 13000]
type = VarSet
trigger1 = !var(30)&&!time
var(40) = -1

[state 12000]
type = PlaySND
trigger1 = var(30)=60
trigger2 = var(30)=78
trigger3 = var(30)=96
value = 21000,0
channel = 10

;援軍ヒット判別
[state 12000]
type = VarSet
trigger1 = numhelper(21040)
var(19) = ifelse((helper(21040),movecontact=[1,2]),(17+13)*ifelse(helper(21040),moveguarded||!helper(21040),numtarget,-1,1),0)

;援軍ヒット判別
[state 12000]
type = VarSet
trigger1 = numhelper(26720)
var(19) = ifelse((helper(26720),movecontact=[1,2]),(17+13)*ifelse(helper(26720),moveguarded||!helper(26720),numtarget,-1,1),0)

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(21040)
trigger1 = helper(21040),movehit=1&&helper(21040),numtarget
var(2) = 1
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26720)
trigger1 = helper(26720),movehit=1&&helper(26720),numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(21040)
trigger1 = helper(21040),movehit=1&&helper(21040),numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26720)
trigger1 = helper(26720),movehit=1&&helper(26720),numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = numhelper(21040)
trigger1 = helper(21040),movehit=1
fvar(15) = .00005*floor(ifelse(35*root,fvar(14)<1,1+(root,var(2)%5=1),35*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvaradd
trigger1 = numhelper(26720)
trigger1 = helper(26720),movehit=1
fvar(15) = .00005*floor(ifelse(30*root,fvar(14)<1,1+(root,var(2)%5=1),30*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = numhelper(21040)
trigger1 = helper(21040),movehit=1
trigger2 = numhelper(26720)
trigger2 = helper(26720),movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=2001
var(12) = ifelse((-var(12)+2000)>=(root,var(12)-1),-root,var(12)+2001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

;爆弾
[state -2]
type = Helper
trigger1 = var(30)=47
trigger2 = var(30)=52
trigger3 = var(30)=57
trigger4 = var(30)=62
trigger5 = var(30)=67
trigger6 = var(30)=72
trigger7 = var(30)=77&&floor(root,var(43)/1000)>=100
trigger8 = var(30)=82&&floor(root,var(43)/1000)>=100
trigger9 = var(30)=87&&floor(root,var(43)/1000)>=100
trigger10 = var(30)=92&&floor(root,var(43)/1000)>=100
trigger11 = var(30)=97&&floor(root,var(43)/1000)>=100
id = 26720
stateno=26720
name = "Bomb"
pos = floor((-20+random%5*10)*const(size.xscale)),-floor((20+random%5*10)*const(size.yscale))
postype = P1
ownpal = 1
pausemovetime=999999
supermovetime=999999

[state 190]
type = ChangeState
trigger1 = var(30)=126
value = 21000

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 21500

;木騎(爆弾)
[statedef 26720]
type = A
movetype=A
physics =N
sprpriority = -5
velset = 0,0
anim = 26720

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20000]
type = PlaySnd
trigger1 = Pos Y>=0;!time
value = 30,7
channel = 4

;爆発エフェクト
[state 26200]
type = Helper
trigger1 = Pos Y>=0;-Vel Y
id = 26209
stateno=26209
name = "exp"
pos = 0,-ceil(pos y)
postype = P1
ownpal = 1
pausemovetime=999999
supermovetime=999999

[state 20000]
type = VelSet
trigger1 = time=1
x = (-15.0+(random%31))*const(size.xscale)
y = 12.5*const(size.yscale)

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;Attack Lv.3
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed && root,numexplod(50000)
trigger1 = 1
damage = floor(30*ifelse(root,fvar(1)<.25,.25,root,fvar(1))*root,fvar(2)*root,fvar(3)*root,fvar(4)*1.22),floor((30*root,fvar(3)*root,fvar(4)/4)*1.22)
ground.slidetime = 14+(P2statetype=C);+(root,var(49)&&!root,var(2))*6
ground.hittime = 14+(P2statetype=C);+(root,var(49)&&!root,var(2))*6
guard.slidetime = 12
guard.hittime = 12
pausetime = 1,14
ground.velocity = parent,var(35)*ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0014,-6.0*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
guard.velocity = -12.0*parent,var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = parent,var(35)*ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0014,-6.0*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*parent,var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),32+12,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+12)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,2)
guardsound = s7000,2
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = Low
attr = A,HP
hitflag = MAFD
guardflag = MA
sprpriority = -4

[state -1]
type = AttackDist
trigger1 = movecontact
value = 0

;en first hit
[state -2]
type = parentVarset
triggerall = root,var(44)%2048<1024 && root,numexplod(8798)
trigger1 = movehit=1
var(11) = 2
ignorehitpause=1

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

[state -1]
type = targetstate
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
value = 926+10*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(30*root,fvar(14)<1,1+(root,var(2)%5=1),30*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%6
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)+floor(-60*const(size.yscale))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(0*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

;BASARA Moves Finish
[state 3510]
type = Helper
trigger1 = !numhelper(8800)
trigger1 = (movehit=[1,2]) && !enemynear,alive && roundstate=3
id  = 8800
stateno=8800
pos = 0,0
postype = left
scale = const(size.xscale),const(size.yscale)
persistent=0
ignorehitpause=1

[state 190]
type = DestroySelf
trigger1 = Pos Y>=0;-Vel Y

;弾爆発エフェクト
[statedef 26209]
type = A
movetype= I
physics = N
velset = 0,0
anim = 26209
sprpriority = 3-7*(parent,stateno<26000)

[state 26200]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;爆発エフェクト
[State 26200]
type = Explod
trigger1 = !time
id = 26000
anim = 26000
pos = 0,0
removetime = 1
postype = p1
ownpal = 1
sprpriority = 3-7*(parent,stateno<26000)
scale = const(size.xscale)*2,const(size.yscale)*2

[state 2620]
type = AngleDraw
trigger1 = 1
scale = 2.0+(time>0)*.5+time*.1,2.0+(time>0)*.5+time*.1

[state 26200]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256-16*time,256

[state 26200]
type = DestroySelf
trigger1 = !AnimTime

;援軍カウンター（木騎）
[statedef 21080]
type=S
movetype=U
physics = N
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = !time
flag = noshadow

[state 21000]
type = PosSet
trigger1 = 1
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))

;時間判別(暗転中以外)
[state 20000]
type = varadd
trigger1 = 1;root,numexplod(50000)
var(30) = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,21090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 190]
type = VarSet
trigger1 = !time&&prevstateno=21000
var(50) = root,var(40)

[state 190]
type = VarSet
trigger1 = !var(30)&&!time
var(35) = ifelse(P2dist X<0,-1,1)

[state 190]
type = ParentVarSet
trigger1 = var(30)=40
var(40) = var(40)

;ヒットポーズ中
[state 12000]
type = VarAdd
trigger1 = var(26)>1
var(26) = -1
ignorehitpause=1

;ヒットポーズ中
[state 12000]
type = VarSet
trigger1 = numhelper(26710)&&!var(26)
trigger1 = helper(26710),movehit=1&&helper(26710),numtarget
var(26) = 20
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26710)
trigger1 = helper(26710),movehit=1&&helper(26710),numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26710)
trigger1 = helper(26710),movehit=1&&helper(26710),numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = numhelper(26710)
trigger1 = helper(26710),movehit=1
fvar(15) = .00005*floor(ifelse(20*root,fvar(14)<1,1+(root,var(2)%5=1),20*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = numhelper(26710)
trigger1 = helper(26710),movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

[state 190]
type = AttackDist
trigger1 = var(30)=40
value = 0

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=2001
var(12) = ifelse((-var(12)+2000)>=(root,var(12)-1),-root,var(12)+2001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StatetypeSet
trigger1 = !time
movetype=A

;ミサイル
[state -2]
type = Helper
trigger1 = var(30)=1
id = 26710
stateno=26710
name = "missile"
pos = floor(0*const(size.xscale)),-floor(100*const(size.yscale))
postype = P1
ownpal = 1
sprpriority = 4
pausemovetime=999999
supermovetime=999999

[state 190]
type = ChangeState
trigger1 = var(30)=40
value = 21000

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001
value = 29000

;木騎・滅騎（援軍カウンター・ミサイル）
[statedef 26710]
type = A
movetype= A
physics = N
sprpriority = 4
velset = 30,0
anim = 26710

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 190]
type = NothitBy
trigger1 = 1
value = SCA
time=-1

[state 190]
type = hitOverride
trigger1 = !time
attr = SCA,AA,AP
slot = 0
stateno = stateno
time=-1

[state 190]
type = Turn
trigger1 = facing!=parent,facing

[state 20000]
type = PosSet
trigger1 = !time
y = -floor((40+16)*const(size.yscale))
persistent=0

[state 20000]
type = VelSet
trigger1 = time&&abs(pos x-ifelse(!enemynear,alive,enemynear(numenemy-1),pos x,enemynear,pos x))<15
trigger2 = time&&frontedgedist<=-40
x = 0
y = 0
persistent=0

[state 20000]
type = VelSet
trigger1 = ((time>1&&root,numexplod(50000))||time>=20)&&!vel x&&vel Y>=0
x = 0
y = -30
persistent=0

[state 20000]
type = AngleDraw
trigger1 = vel Y>=0
value = -90
scale = 1,1

[state 20000]
type = AngleDraw
trigger1 = vel Y<0
value = 0

[state 20000]
type = PosFreeze
trigger1 = vel Y<0&&!root,numexplod(50000)
value = 1

[state 20000]
type = null;PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;Attack Lv.3
[state 200]
type = Hitdef
triggerall = vel Y<0 && !movecontact && !movereversed; && root,numexplod(50000)
trigger1 = 1
damage = floor(ifelse(20*root,fvar(0)<1,1+(root,var(2)%5=4),20*root,fvar(0))*1.22),ceil(floor(20*1.0/4)*1.22)
ground.slidetime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
ground.hittime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
guard.slidetime = 12
guard.hittime = 12
pausetime = 1,14
guard.pausetime = 1,14
ground.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-16.0*(51-root,var(3))*1.0/51)*const(size.yscale)
guard.velocity = -12.0*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-16.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+14,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+14)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = 0,0
givepower = 0,0
fall = 1
air.fall = 1
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),30+12,16-ifelse(floor(root,var(14)/85)>7,7,floor(root,var(14)/85))+12)
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,SA
hitflag = MAFD
guardflag = MA
kill = 0
guard.kill = 0

[state -1]
type = AttackDist
trigger1 = movecontact||movereversed
value = 0

;en first hit
[state -2]
type = parentVarset
triggerall = root,var(44)%2048<1024 && root,numexplod(8798)
trigger1 = movehit=1
var(11) = 2
ignorehitpause=1

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(20*root,fvar(14)<1,1+(root,var(2)%5=1),20*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%6
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)+floor(-15*const(size.xscale))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = DestroySelf
trigger1 = parent,stateno!=21080 && parent,stateno!=22080 && time>=120
trigger2 = (FrontEdgebodydist<=-120||BackEdgebodydist<=-120||ScreenPos Y<=-60) && time>=60

;滅騎（本体）
[statedef 22000]
type = S
movetype= I
physics = N
sprpriority = -4
velset = 0,0

[state 20000]
type= PosSet
trigger1 = !time&& (roundstate<2||(roundstate=2&&root,numexplod(40000)))
x = floor(root,fvar(22))

[state 21000]
type = PosSet
trigger1 = 1
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))

[state 21000]
type = ChangeAnim
trigger1 = !time && ((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
value = 40500

[state 21000]
type = RemoveExplod
trigger1 = !time && ((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=10001
var(12) = ifelse((-var(12)+10000)>=(root,var(12)-1),-root,var(12)+10001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=10001
value = 22500

[state 20000]
type = varset
trigger1 = !time
var(40) = 0

[state 190]
type = ChangeState
trigger1 = (root,var(40)=[4,8])||root,fvar(23)>=90000
value = 22009

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 40,1]
type = RemoveExplod
triggerall = root,numexplod(50000)
triggerall = var(0)
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))||roundstate>2
trigger2 = ((root,command!="holdfwd"&&var(0)>0)||(root,command!="holdback"&&var(0)<0))&&!root,var(59)
trigger3 = !((root,stateno=13||root,stateno=22||(root,stateno=[120,155]))||ifelse(root,facing=1,((pos x-root,pos x)=[-40,160]),((pos x-root,pos x)=[-160,40])))
trigger3 = root,var(59)
trigger4 = !((root,var(1)%4>=2&&root,var(1)%2<1&&(root,stateno!=[40,41]))||(root,stateno=220&&root,time<13))
trigger4 = !(ifelse(root,facing=1,((pos x-enemynear,pos x)=[-480,80]),((pos x-enemynear,pos x)=[-80,480]))||abs(pos x-enemynear,pos x)>540)
trigger4 = root,var(59)

[state 40,1]
type = ChangeAnim
triggerall = root,numexplod(50000)
triggerall = var(0)
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))||roundstate>2
trigger2 = ((root,command!="holdfwd"&&var(0)>0)||(root,command!="holdback"&&var(0)<0))&&!root,var(59)
trigger3 = !((root,stateno=13||root,stateno=22||(root,stateno=[120,155]))||ifelse(root,facing=1,((pos x-root,pos x)=[-40,160]),((pos x-root,pos x)=[-160,40])))
trigger3 = root,var(59)
trigger4 = !((root,var(1)%4>=2&&root,var(1)%2<1&&(root,stateno!=[40,41]))||(root,stateno=220&&root,time<13))
trigger4 = !(ifelse(root,facing=1,((pos x-enemynear,pos x)=[-480,80]),((pos x-enemynear,pos x)=[-80,480]))||abs(pos x-enemynear,pos x)>540)
trigger4 = root,var(59)
value = 40500

[State 900, 4]
type = VarSet
triggerall = root,numexplod(50000)
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))||roundstate>2
trigger2 = ((root,command!="holdfwd"&&var(0)>0)||(root,command!="holdback"&&var(0)<0))&&!root,var(59)
trigger3 = !((root,stateno=13||root,stateno=22||(root,stateno=[120,155]))||ifelse(root,facing=1,((pos x-root,pos x)=[-40,160]),((pos x-root,pos x)=[-160,40])))
trigger3 = root,var(59)
trigger4 = !((root,var(1)%4>=2&&root,var(1)%2<1&&(root,stateno!=[40,41]))||(root,stateno=220&&root,time<13))
trigger4 = !(ifelse(root,facing=1,((pos x-enemynear,pos x)=[-480,80]),((pos x-enemynear,pos x)=[-80,480]))||abs(pos x-enemynear,pos x)>540)
trigger4 = root,var(59)
var(0) = 0

[state 900]
type = Turn
triggerall = root,numexplod(50000)
trigger1 = !var(0) && p2dist X<0

[State 900, 4]
type = VarAdd
triggerall = root,numexplod(50000)
trigger1 = var(0)
var(0) = ifelse(var(0)<0,-1,1)

[State 900, 4]
type = VarSet
triggerall = root,numexplod(50000)
trigger1 = (root,command="holdfwd"||root,command="holdback")&&root,movetype!=H&&root,statetype!=L&&!var(0)&&roundstate=2&&!root,numexplod(40000)&&!root,var(59)
var(0) = ifelse(root,command="holdfwd"&&!root,var(59),1,-1)

[State 900, 4]
type = VarSet
triggerall = root,numexplod(50000)
triggerall = root,movetype!=H&&root,statetype!=L&&!var(0)&&roundstate=2&&!root,numexplod(40000)&&root,var(59)
trigger1 = (root,stateno=13||root,stateno=22||(root,stateno=[120,155]))||ifelse(root,facing=1,((pos x-root,pos x)=[-40,160]),((pos x-root,pos x)=[-160,40]))
trigger2 = (root,var(1)%4>=2&&root,var(1)%2<1&&(root,stateno!=[40,41]))||(root,stateno=220&&root,time<13)
trigger2 = ifelse(root,facing=1,((pos x-enemynear,pos x)=[-480,80]),((pos x-enemynear,pos x)=[-80,480]))||abs(pos x-enemynear,pos x)>540
var(0) = ifelse(root,stateno!=13&&root,stateno!=22&&(root,stateno!=[120,155])&&abs(pos x-enemynear,pos x)>540,1,-1)

[state 40,1]
type = RemoveExplod
triggerall = root,numexplod(50000)
trigger1 = var(0)=1||var(0)=-1

[state 40,1]
type = ChangeAnim
triggerall = root,numexplod(50000)
trigger1 = var(0)=1||var(0)=-1
value = 40500+50+(var(0)=-1)*50

[State 900, 4]
type = VelSet
triggerall = root,numexplod(50000)
trigger1 = ((root,command="holdfwd"&&var(0)=1)||(root,command="holdback"&&var(0)=-1))&&!root,var(59)
x = 2.0*const(size.xscale)*ifelse(root,command="holdback",-1,1)*ifelse(facing!=root,facing,-1,1)

[State 900, 4]
type = VelSet
triggerall = root,numexplod(50000)
trigger1 = var(0)&&root,var(59)
x = 2.0*const(size.xscale)*ifelse(var(0)<0,-1,1)*ifelse(facing!=root,facing,-1,1)

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[State 900, 4]
type = VelSet
trigger1 = !var(0)
trigger2 = numhelper(30000)
trigger2 = vel x>0&&ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(floor(60*const(size.xscale))+const(size.ground.front))
trigger3 = numhelper(30000)
trigger3 = vel x<0&&ifelse(facing=1,-(helper(30005),pos x-pos x),(helper(30000),pos x-pos x))<(floor(60*const(size.xscale))+const(size.ground.back))
x = 0

[state 30000]
type = VarSet
trigger1 = var(0)=1||var(0)=-1||(!var(0)&&Anim=40500&&AnimElemTime(1)=0)
var(30) = 0

[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

;ニュートラル
[state 30000]
type = ChangeAnim
triggerall = var(0)=0&&root,numexplod(50000)
trigger1 = var(30)%8=0
value = ifelse((Anim-40000)%100=7,Anim-7,Anim+1)

;ニュートラル
[state 31000]
type = RemoveExplod
triggerall = var(0)=0&&root,numexplod(50000)
trigger1 = var(30)%8=0

;前移動
[state 30000]
type = ChangeAnim
triggerall = var(0)>0&&root,numexplod(50000)
trigger1 = var(30)%3=0
value = ifelse((Anim-40050)%100=21,Anim-21,Anim+1)

;後移動
[state 30000]
type = ChangeAnim
triggerall = var(0)<0&&root,numexplod(50000)
trigger1 = var(30)%3=0
value = ifelse((Anim-40000)%100=21,Anim-21,Anim+1)

;踏みならし音
[State 900, 4]
type = PlaySND
triggerall = AnimElemTime(1)=0&&root,numexplod(50000) && var(30)>1
trigger1 = Anim=40556||Anim=40606||Anim=40567||Anim=40617
value = 5100,2
channel = 15

;移動
[state 31000]
type = RemoveExplod
triggerall = var(0)!=0&&root,numexplod(50000)
trigger1 = var(30)%3=0

;屋根
[state -2]
type = Helper
trigger1 = !numhelper(22030) && root,var(12)!=2001
id = 22030
stateno=22030
name = "Roof"
pos = 0,-floor(160*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;大砲
[state -2]
type = Helper
trigger1 = !numhelper(22050) && root,var(12)!=2001
id = 22050
stateno=22035
name = "Cannon"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;龍頭
[state -2]
type = Helper
trigger1 = !numhelper(22040) && root,var(12)!=2001
id = 22040
stateno=22025
name = "Dragon_Head"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足1-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42000) && root,var(12)!=2001
id = 42000
anim = Anim+1500
pos = floor(120*const(size.xscale)),floor(270*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42500) && root,var(12)!=2001
id = 42500
anim = Anim+2000
pos = floor(116*const(size.xscale)),floor(226*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43000) && root,var(12)!=2001
id = 43000
anim = Anim+2500
pos = floor(120*const(size.xscale)),-floor(58*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43500) && root,var(12)!=2001
id = 43500
anim = Anim+3000
pos = -floor(130*const(size.xscale)),floor(268*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44000) && root,var(12)!=2001
id = 44000
anim = Anim+3500
pos = -floor(135*const(size.xscale)),floor(224*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44500) && root,var(12)!=2001
id = 44500
anim = Anim+4000
pos = -floor(126*const(size.xscale)),-floor(62*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46000) && root,var(12)!=2001
id = 46000
anim = Anim+5500
pos = floor(110*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45500) && root,var(12)!=2001
id = 45500
anim = Anim+5000
pos = floor(98*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45000) && root,var(12)!=2001
id = 45000
anim = Anim+4500
pos = floor(98*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47500
anim = Anim+7000
pos = -floor(130*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47000
anim = Anim+6500
pos = -floor(118*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46500) && root,var(12)!=2001
id = 46500
anim = Anim+6000
pos = -floor(118*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

[state 29000]
type = ChangeState
trigger1 = !root,var(12)&&roundstate=0
value = 29000

;滅騎（本体・到着時）
[statedef 22008]
type = S
movetype= I
physics = N
sprpriority = -4
velset = 0,0

[state 29000]
type = PosSet
trigger1 = !(root,fvar(12)&&root,numhelper(30000)&&root,numhelper(30005))
x = ifelse(facing=-1,320,-320)
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))
persistent=0

[state 29000]
type = ParentVarSet
trigger1 = !(root,fvar(12)&&root,numhelper(30000)&&root,numhelper(30005))
fvar(22) = floor(pos x)*ifelse(root,teamside=2,-1,1)

[state 21000]
type = PosSet
trigger1 = 1
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))

[state 21000]
type = ChangeAnim
trigger1 = !time && ((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
value = 40550

[state 21000]
type = RemoveExplod
trigger1 = !time && ((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=10001
var(12) = ifelse((-var(12)+10000)>=(root,var(12)-1),-root,var(12)+10001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 20000]
type = NothitBy
trigger1 = 1
value = SCA

[state 20000]
type = ParentVarSet
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&(root,var(40)=1||(root,var(40)=-1&&root,var(42)>=root,var(41)))
var(40) = 11

[state 20000]
type = ParentVarSet
trigger1 = time&&root,var(40)=[10,11]
var(40) = 11

[state 20000]
type = ParentVarSet
trigger1 = numhelper(18000)&&root,var(42)>=root,var(41)
trigger1 = ifelse(facing=1,helper(18000),pos x-pos x,-(helper(18000),pos x-pos x))<10
var(40) = 1

[state 30000]
type = VarSet
trigger1 = var(0)=1||var(0)=-1||(!var(0)&&Anim=40500&&AnimElemTime(1)=0)
var(30) = 0

[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[State 900, 4]
type = VelSet
trigger1 = root,numexplod(50000)
x = 2.0*const(size.xscale)

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[State 900, 4]
type = ChangeState
trigger1 = numhelper(18000)
trigger1 = ifelse(facing=1,helper(18000),pos x-pos x,-(helper(18000),pos x-pos x))<10
value = 22000

;移動
[state 30000]
type = ChangeAnim
triggerall = root,numexplod(50000)
trigger1 = var(30)%3=0
value = ifelse((Anim-40050)%100=21,Anim-21,Anim+1)

;踏みならし音
[State 900, 4]
type = PlaySND
triggerall = AnimElemTime(1)=0&&root,numexplod(50000) && var(30)>1
trigger1 = Anim=40556||Anim=40606||Anim=40567||Anim=40617
value = 5100,2
channel = 15

;移動
[state 31000]
type = RemoveExplod
triggerall = root,numexplod(50000)
trigger1 = var(30)%6=0

;屋根
[state -2]
type = Helper
trigger1 = !numhelper(22030) && root,var(12)!=2001
id = 22030
stateno=22030
name = "Roof"
pos = 0,-floor(160*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;大砲
[state -2]
type = Helper
trigger1 = !numhelper(22050) && root,var(12)!=2001
id = 22050
stateno=22035
name = "Cannon"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;龍頭
[state -2]
type = Helper
trigger1 = !numhelper(22040) && root,var(12)!=2001
id = 22040
stateno=22025
name = "Dragon_Head"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足1-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42000) && root,var(12)!=2001
id = 42000
anim = Anim+1500
pos = floor(120*const(size.xscale)),floor(270*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42500) && root,var(12)!=2001
id = 42500
anim = Anim+2000
pos = floor(116*const(size.xscale)),floor(226*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43000) && root,var(12)!=2001
id = 43000
anim = Anim+2500
pos = floor(120*const(size.xscale)),-floor(58*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43500) && root,var(12)!=2001
id = 43500
anim = Anim+3000
pos = -floor(130*const(size.xscale)),floor(268*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44000) && root,var(12)!=2001
id = 44000
anim = Anim+3500
pos = -floor(135*const(size.xscale)),floor(224*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44500) && root,var(12)!=2001
id = 44500
anim = Anim+4000
pos = -floor(126*const(size.xscale)),-floor(62*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46000) && root,var(12)!=2001
id = 46000
anim = Anim+5500
pos = floor(110*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45500) && root,var(12)!=2001
id = 45500
anim = Anim+5000
pos = floor(98*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45000) && root,var(12)!=2001
id = 45000
anim = Anim+4500
pos = floor(98*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47500
anim = Anim+7000
pos = -floor(130*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47000
anim = Anim+6500
pos = -floor(118*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46500) && root,var(12)!=2001
id = 46500
anim = Anim+6000
pos = -floor(118*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

[state 190]
type = ChangeState
trigger1 = root,var(12)=10001||root,fvar(23)>=90000
value = 22500

;攻撃前待機ステート
[statedef 22009]
type=S
movetype=U
physics = N
velset = 0,0

[state 20000]
type = RemoveExplod
trigger1 = !var(30)&&!time

[state 21000]
type = PosSet
trigger1 = 1
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 190]
type = VarSet
trigger1 = !var(30)&&!time
var(50) = ifelse(root,fvar(23)>=90000,10,ifelse(root,var(40)<0||root,var(40)>=9,4,root,var(40)))

[state 190]
type = VarSet
trigger1 = !var(30)&&!time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&root,var(40)=5
var(35) = ifelse(P2dist X<0,-1,1)

[state 190]
type = Turn
trigger1 = !var(30)&&!time&&P2dist X<0

[state 190]
type = VarSet
trigger1 = !var(30)&&!time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&root,var(40)!=5
var(35) = ifelse(facing!=root,facing,-1,1)

[state 19000]
type = ParentVarAdd
trigger1 = !var(30)&&!time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&((var(50)=[4,6])||root,fvar(23)>=90000)
var(42) = -floor(ifelse(floor(root,var(43)/1000)<50,200-floor((floor(root,var(43)/1000)-1)*1.0/1.50),81)*(1.0+((floor((root,var(41)-72)*3.125/2)-floor(root,var(43)/1000))*1.00/200)*(root,var(43)<floor((root,var(41)-72)*3.125/2))))
persistent=0

;援軍使用回数
[state 13000]
type = varset
trigger1 = !var(30)&&!time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))&&!var(40)
var(10) = 0

[state 13000]
type = varadd
trigger1 = !var(30)&&!time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(10) = ifelse(var(50)>=8,3,1)

;援軍使用不能時間
[state 12000]
type = VarSet
trigger1 = !var(30)&&!time
var(40) = floor(ifelse((prevstateno=[13500,13600])||(prevstateno=[15000,15031]),3,var(10))*75*(1.0+floor((100-floor(root,var(43)/1000))*1.0/25)))

;援軍使用不能時間
[state 12000]
type = VarSet
trigger1 = !var(30)&&!time
trigger1 = floor(ifelse((prevstateno=[13500,13600])||(prevstateno=[15000,15031]),3,var(10))*75*(1.0+floor((100-floor(root,var(43)/1000))*1.0/25)))>600
var(40) = 600

[state 12000]
type = ParentVarSet
trigger1 = !var(30)&&!time
var(40) = -1

;BASARAゲージ回復不能時間
[state 2000]
type = ParentVarAdd
trigger1 = !var(30)&&!time&&(var(50)=[7,9])
var(9)=ifelse((root,var(9)=[1,999]),420-root,var(9),420)

[state 13500]
type = NotHitBy
trigger1 = !var(30)&&!time&&(var(50)=[8,9])
value = SCA

[state 13500]
type = SuperPause
trigger1 = !var(30)&&!time&&var(50)=8&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
time = 30+ifelse(root,var(57)>=4,40,ifelse(root,var(57)=3,33,ifelse(root,var(57)=2,22,ifelse(root,var(57)=1,12,0))))+14
movetime=30+ifelse(root,var(57)>=4,40,ifelse(root,var(57)=3,33,ifelse(root,var(57)=2,22,ifelse(root,var(57)=1,12,0))))+14
p2defmul = 1
sound = -1
anim = -1
darken = 0
poweradd = 0

;ゲージ減少
[state 13500]
type = PowerAdd
trigger1 = !var(30)&&!time&&var(50)=8&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
value = -1000*(root,var(57)+1)

[state 13000]
type = ParentVaradd
trigger1 = !var(30)&&!time&&(var(50)=[7,9])&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(42) = -200

;援軍レベル減少
[state 13500]
type = ParentVarAdd
trigger1 = !var(30)&&!time&&var(50)=8&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(43) = ifelse(root,var(43)<=30000,-root,var(43)+1000,-30000)

;援軍カウンター使用回数
[state 13500]
type = ParentVarAdd
trigger1 = !var(30)&&!time&&var(50)=8&&root,var(57)<5&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(57) = 1

[state 13500]
type = PlaySND
trigger1 = !var(30)&&!time&&var(50)=8&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
value = 3500,0

[state 13500]
type = PlaySND
trigger1 = !var(30)&&!time&&var(50)=9&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
value = 3600,0

;カットイン
[state 13500]
type = Helper
trigger1 = !var(30)&&!time&&var(50)=8&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
id = 7565
stateno=7565
pos = 0,0
postype = p1
ignorehitpause=1
supermovetime=60

[state 190]
type = ChangeAnim
trigger1 = !time &&(var(50)=[4,6])
value = 40500+3*50+ifelse(var(50)=7,4,ifelse(var(50)=6,3,ifelse(var(50)=5,2,0)))*50

[state 190]
type = StatetypeSet
trigger1 = var(30)=ifelse(var(50)=10,24,ifelse(var(50)=8,ifelse(root,var(57)>=5,59,ifelse(root,var(57)=4,52,ifelse(root,var(57)=3,43,ifelse(root,var(57)=2,33,19)))),ifelse(var(50)=7,1,(11+(var(50)=4)*19))))-1
trigger2 = root,fvar(23)>=90000&&var(30)>=4
movetype=A

[state 190]
type = ChangeState
trigger1 = var(30)=ifelse(var(50)=10,24,ifelse(var(50)=8,ifelse(root,var(57)>=5,59,ifelse(root,var(57)=4,52,ifelse(root,var(57)=3,43,ifelse(root,var(57)=2,33,19)))),ifelse(var(50)=7,1,(11+(var(50)=4)*19))))
value = 22000+(var(50))*10+(var(50)=10)*400

;自爆用
[state 20000]
type = PalFX
trigger1 = root,fvar(23)>=90000
add = -16,-32,-64
time = -1
persistent=0

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=10001
var(12) = ifelse((-var(12)+10000)>=(root,var(12)-1),-root,var(12)+10001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 20000]
type = RemoveExplod
trigger1 = !var(30)&&!time

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
trigger2 = var(50)=8 && time<(30+ifelse(root,var(57)>=4,40,ifelse(root,var(57)=3,33,ifelse(root,var(57)=2,22,ifelse(root,var(57)=1,12,0)))))
var(30) = 1

;地団駄
[state 30000]
type = ChangeAnim
triggerall = var(50)=4
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=18
trigger3 = var(30)=21
trigger4 = var(30)=23
trigger5 = var(30)=25
trigger6 = var(30)=30
trigger7 = var(30)=33
trigger8 = var(30)=36
trigger9 = var(30)=41
trigger10 = var(30)=49
trigger11 = var(30)=56
trigger12 = var(30)=67
trigger13 = var(30)=69
trigger14 = var(30)=70
trigger15 = var(30)=78
trigger16 = var(30)=80
trigger17 = var(30)=82
trigger18 = var(30)=83
trigger19 = var(30)=84
trigger20 = var(30)=85
trigger21 = var(30)=86
trigger22 = var(30)=87
trigger23 = var(30)=88
trigger24 = var(30)=89
trigger25 = var(30)=91
trigger26 = var(30)=99
trigger27 = var(30)=101
trigger28 = var(30)=102
trigger29 = var(30)=103
trigger30 = var(30)=104
trigger31 = var(30)=105
trigger32 = var(30)=106
trigger33 = var(30)=107
trigger34 = var(30)=108
trigger35 = var(30)=112
trigger36 = var(30)=115
trigger37 = var(30)=120
trigger38 = var(30)=121
trigger39 = var(30)=122
trigger40 = var(30)=123
trigger41 = var(30)=124
trigger42 = var(30)=125
trigger43 = var(30)=86+40
trigger44 = var(30)=87+40
trigger45 = var(30)=88+40
trigger46 = var(30)=89+40
trigger47 = var(30)=91+40
trigger48 = var(30)=99+40
trigger49 = var(30)=101+40
trigger50 = var(30)=102+40
trigger51 = var(30)=103+40
trigger52 = var(30)=104+40
trigger53 = var(30)=105+40
trigger54 = var(30)=106+40
trigger55 = var(30)=107+40
trigger56 = var(30)=108+40
trigger57 = var(30)=112+40
trigger58 = var(30)=115+40
trigger59 = var(30)=156;tgr43
trigger60 = var(30)=158;44
trigger61 = var(30)=159
trigger62 = var(30)=160
trigger63 = var(30)=161
trigger64 = var(30)=162
trigger65 = var(30)=163
trigger66 = var(30)=164
trigger67 = var(30)=165
trigger68 = var(30)=167
trigger69 = var(30)=168;tgr53
trigger70 = var(30)=172;tgr54
trigger71 = var(30)=175
trigger72 = var(30)=192
trigger73 = var(30)=201;tgr57
value = Anim+1-(var(30)=126)*22

;    1       ~125→85(125)          155(115)~202

;地団駄
[state 31000]
type = RemoveExplod
triggerall = var(50)=4
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=18
trigger3 = var(30)=21
trigger4 = var(30)=23
trigger5 = var(30)=25
trigger6 = var(30)=30
trigger7 = var(30)=33
trigger8 = var(30)=36
trigger9 = var(30)=41
trigger10 = var(30)=49
trigger11 = var(30)=56
trigger12 = var(30)=67
trigger13 = var(30)=69
trigger14 = var(30)=70
trigger15 = var(30)=78
trigger16 = var(30)=80
trigger17 = var(30)=82
trigger18 = var(30)=83
trigger19 = var(30)=84
trigger20 = var(30)=85
trigger21 = var(30)=86
trigger22 = var(30)=87
trigger23 = var(30)=88
trigger24 = var(30)=89
trigger25 = var(30)=91
trigger26 = var(30)=99
trigger27 = var(30)=101
trigger28 = var(30)=102
trigger29 = var(30)=103
trigger30 = var(30)=104
trigger31 = var(30)=105
trigger32 = var(30)=106
trigger33 = var(30)=107
trigger34 = var(30)=108
trigger35 = var(30)=112
trigger36 = var(30)=115
trigger37 = var(30)=120
trigger38 = var(30)=121
trigger39 = var(30)=122
trigger40 = var(30)=123
trigger41 = var(30)=124
trigger42 = var(30)=125
trigger43 = var(30)=86+40
trigger44 = var(30)=87+40
trigger45 = var(30)=88+40
trigger46 = var(30)=89+40
trigger47 = var(30)=91+40
trigger48 = var(30)=99+40
trigger49 = var(30)=101+40
trigger50 = var(30)=102+40
trigger51 = var(30)=103+40
trigger52 = var(30)=104+40
trigger53 = var(30)=105+40
trigger54 = var(30)=106+40
trigger55 = var(30)=107+40
trigger56 = var(30)=108+40
trigger57 = var(30)=112+40
trigger58 = var(30)=115+40
trigger59 = var(30)=156
trigger60 = var(30)=158
trigger61 = var(30)=159
trigger62 = var(30)=160
trigger63 = var(30)=161
trigger64 = var(30)=162
trigger65 = var(30)=163
trigger66 = var(30)=164
trigger67 = var(30)=165
trigger68 = var(30)=167
trigger69 = var(30)=168
trigger70 = var(30)=172
trigger71 = var(30)=175
trigger72 = var(30)=192
trigger73 = var(30)=201

;砲弾発射
[state 30000]
type = ChangeAnim
triggerall = var(50)=5
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=6
trigger3 = var(30)=18
trigger4 = var(30)=19
trigger5 = var(30)=22
trigger6 = var(30)=24
trigger7 = var(30)=26
trigger8 = var(30)=27
trigger9 = var(30)=28
trigger10 = var(30)=32
trigger11 = var(30)=39
trigger12 = var(30)=43
trigger13 = var(30)=44
trigger14 = var(30)=45
trigger15 = var(30)=46
trigger16 = var(30)=47
trigger17 = var(30)=48
trigger18 = var(30)=49
trigger19 = var(30)=50
trigger20 = var(30)=51
trigger21 = var(30)=53
trigger22 = var(30)=55
trigger23 = var(30)=72
trigger24 = var(30)=75
trigger25 = var(30)=81
trigger26 = var(30)=83
trigger27 = var(30)=87
trigger28 = var(30)=90
trigger29 = var(30)=92
trigger30 = var(30)=95
trigger31 = var(30)=97
trigger32 = var(30)=98
trigger33 = var(30)=99
trigger34 = var(30)=100
trigger35 = var(30)=101
trigger36 = var(30)=102
trigger37 = var(30)=103
trigger38 = var(30)=105
trigger39 = var(30)=108
trigger40 = var(30)=109
trigger41 = var(30)=110
trigger42 = var(30)=111
trigger43 = var(30)=112
value = Anim+1

;砲弾発射
[state 31000]
type = RemoveExplod
triggerall = var(50)=5
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=6
trigger3 = var(30)=18
trigger4 = var(30)=19
trigger5 = var(30)=22
trigger6 = var(30)=24
trigger7 = var(30)=26
trigger8 = var(30)=27
trigger9 = var(30)=28
trigger10 = var(30)=32
trigger11 = var(30)=39
trigger12 = var(30)=43
trigger13 = var(30)=44
trigger14 = var(30)=45
trigger15 = var(30)=46
trigger16 = var(30)=47
trigger17 = var(30)=48
trigger18 = var(30)=49
trigger19 = var(30)=50
trigger20 = var(30)=51
trigger21 = var(30)=53
trigger22 = var(30)=55
trigger23 = var(30)=72
trigger24 = var(30)=75
trigger25 = var(30)=81
trigger26 = var(30)=83
trigger27 = var(30)=87
trigger28 = var(30)=90
trigger29 = var(30)=92
trigger30 = var(30)=95
trigger31 = var(30)=97
trigger32 = var(30)=98
trigger33 = var(30)=99
trigger34 = var(30)=100
trigger35 = var(30)=101
trigger36 = var(30)=102
trigger37 = var(30)=103
trigger38 = var(30)=105
trigger39 = var(30)=108
trigger40 = var(30)=109
trigger41 = var(30)=110
trigger42 = var(30)=111
trigger43 = var(30)=112

;火炎放射
[state 30000]
type = ChangeAnim
triggerall = var(50)=6
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=18
trigger3 = var(30)=19
trigger4 = var(30)=20
trigger5 = var(30)=21
trigger6 = var(30)=22
trigger7 = var(30)=24
trigger8 = var(30)=26
trigger9 = var(30)=28
trigger10 = var(30)=30
trigger11 = var(30)=33
trigger12 = var(30)=40
trigger13 = var(30)=47
trigger14 = var(30)=50
trigger15 = var(30)=54
trigger16 = var(30)=56
trigger17 = var(30)=58
trigger18 = var(30)=62
trigger19 = var(30)=64
trigger20 = var(30)=67
trigger21 = var(30)=70
trigger22 = var(30)=71
trigger23 = var(30)=73
trigger24 = var(30)=76
trigger25 = var(30)=81
trigger26 = var(30)=88
trigger27 = var(30)=96
trigger28 = var(30)=101
trigger29 = var(30)=103
trigger30 = var(30)=108
trigger31 = var(30)=114
value = Anim+1

;火炎放射
[state 31000]
type = RemoveExplod
triggerall = var(50)=6
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=18
trigger3 = var(30)=19
trigger4 = var(30)=20
trigger5 = var(30)=21
trigger6 = var(30)=22
trigger7 = var(30)=24
trigger8 = var(30)=26
trigger9 = var(30)=28
trigger10 = var(30)=30
trigger11 = var(30)=33
trigger12 = var(30)=40
trigger13 = var(30)=47
trigger14 = var(30)=50
trigger15 = var(30)=54
trigger16 = var(30)=56
trigger17 = var(30)=58
trigger18 = var(30)=62
trigger19 = var(30)=64
trigger20 = var(30)=67
trigger21 = var(30)=70
trigger22 = var(30)=71
trigger23 = var(30)=73
trigger24 = var(30)=76
trigger25 = var(30)=81
trigger26 = var(30)=88
trigger27 = var(30)=96
trigger28 = var(30)=101
trigger29 = var(30)=103
trigger30 = var(30)=108
trigger31 = var(30)=114

;屋根
[state -2]
type = Helper
trigger1 = !numhelper(22030) && root,var(12)!=2001
id = 22030
stateno=22030
name = "Roof"
pos = 0,-floor(160*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;大砲
[state -2]
type = Helper
trigger1 = !numhelper(22050) && root,var(12)!=2001
id = 22050
stateno=22035
name = "Cannon"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;龍頭
[state -2]
type = Helper
trigger1 = !numhelper(22040) && root,var(12)!=2001
id = 22040
stateno=22025
name = "Dragon_Head"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足1-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42000) && root,var(12)!=2001
id = 42000
anim = Anim+1500
pos = floor(120*const(size.xscale)),floor(270*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42500) && root,var(12)!=2001
id = 42500
anim = Anim+2000
pos = floor(116*const(size.xscale)),floor(226*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43000) && root,var(12)!=2001
id = 43000
anim = Anim+2500
pos = floor(120*const(size.xscale)),-floor(58*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43500) && root,var(12)!=2001
id = 43500
anim = Anim+3000
pos = -floor(130*const(size.xscale)),floor(268*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44000) && root,var(12)!=2001
id = 44000
anim = Anim+3500
pos = -floor(135*const(size.xscale)),floor(224*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44500) && root,var(12)!=2001
id = 44500
anim = Anim+4000
pos = -floor(126*const(size.xscale)),-floor(62*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46000) && root,var(12)!=2001
id = 46000
anim = Anim+5500
pos = floor(110*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45500) && root,var(12)!=2001
id = 45500
anim = Anim+5000
pos = floor(98*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45000) && root,var(12)!=2001
id = 45000
anim = Anim+4500
pos = floor(98*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47500
anim = Anim+7000
pos = -floor(130*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47000
anim = Anim+6500
pos = -floor(118*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46500) && root,var(12)!=2001
id = 46500
anim = Anim+6000
pos = -floor(118*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||(root,fvar(23)>=90000&&var(30)>=5)
value = 22500

;滅騎（本体・地団駄）
[statedef 22040]
type = S
movetype= A
physics = N
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 21000]
type = PosSet
trigger1 = 1
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 30000]
type = ChangeAnim
triggerall = SelfAnimExist(Anim+1-(var(30)=126)*22+(var(30)=156)*6)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=18
trigger3 = var(30)=21
trigger4 = var(30)=23
trigger5 = var(30)=25
trigger6 = var(30)=30
trigger7 = var(30)=33
trigger8 = var(30)=36
trigger9 = var(30)=41
trigger10 = var(30)=49
trigger11 = var(30)=56
trigger12 = var(30)=67
trigger13 = var(30)=69
trigger14 = var(30)=70
trigger15 = var(30)=78
trigger16 = var(30)=80
trigger17 = var(30)=82
trigger18 = var(30)=83
trigger19 = var(30)=84
trigger20 = var(30)=85
trigger21 = var(30)=86
trigger22 = var(30)=87
trigger23 = var(30)=88
trigger24 = var(30)=89
trigger25 = var(30)=91
trigger26 = var(30)=99
trigger27 = var(30)=101
trigger28 = var(30)=102
trigger29 = var(30)=103
trigger30 = var(30)=104
trigger31 = var(30)=105
trigger32 = var(30)=106
trigger33 = var(30)=107
trigger34 = var(30)=108
trigger35 = var(30)=112
trigger36 = var(30)=115
trigger37 = var(30)=120
trigger38 = var(30)=121
trigger39 = var(30)=122
trigger40 = var(30)=123
trigger41 = var(30)=124
trigger42 = var(30)=125
trigger43 = var(30)=86+40
trigger44 = var(30)=87+40
trigger45 = var(30)=88+40
trigger46 = var(30)=89+40
trigger47 = var(30)=91+40
trigger48 = var(30)=99+40
trigger49 = var(30)=101+40
trigger50 = var(30)=102+40
trigger51 = var(30)=103+40
trigger52 = var(30)=104+40
trigger53 = var(30)=105+40
trigger54 = var(30)=106+40
trigger55 = var(30)=107+40
trigger56 = var(30)=108+40
trigger57 = var(30)=112+40
trigger58 = var(30)=115+40
trigger59 = var(30)=156
trigger60 = var(30)=158
trigger61 = var(30)=159
trigger62 = var(30)=160
trigger63 = var(30)=161
trigger64 = var(30)=162
trigger65 = var(30)=163
trigger66 = var(30)=164
trigger67 = var(30)=165
trigger68 = var(30)=167
trigger69 = var(30)=168
trigger70 = var(30)=172
trigger71 = var(30)=175
trigger72 = var(30)=178
trigger73 = var(30)=181
trigger74 = var(30)=184
trigger75 = var(30)=187
trigger76 = var(30)=190
trigger77 = var(30)=193
trigger78 = var(30)=196
trigger79 = var(30)=199
trigger80 = var(30)=201
value = Anim+1-(var(30)=126)*22+(var(30)=156)*6

[state 31000]
type = RemoveExplod
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=18
trigger3 = var(30)=21
trigger4 = var(30)=23
trigger5 = var(30)=25
trigger6 = var(30)=30
trigger7 = var(30)=33
trigger8 = var(30)=36
trigger9 = var(30)=41
trigger10 = var(30)=49
trigger11 = var(30)=56
trigger12 = var(30)=67
trigger13 = var(30)=69
trigger14 = var(30)=70
trigger15 = var(30)=78
trigger16 = var(30)=80
trigger17 = var(30)=82
trigger18 = var(30)=83
trigger19 = var(30)=84
trigger20 = var(30)=85
trigger21 = var(30)=86
trigger22 = var(30)=87
trigger23 = var(30)=88
trigger24 = var(30)=89
trigger25 = var(30)=91
trigger26 = var(30)=99
trigger27 = var(30)=101
trigger28 = var(30)=102
trigger29 = var(30)=103
trigger30 = var(30)=104
trigger31 = var(30)=105
trigger32 = var(30)=106
trigger33 = var(30)=107
trigger34 = var(30)=108
trigger35 = var(30)=112
trigger36 = var(30)=115
trigger37 = var(30)=120
trigger38 = var(30)=121
trigger39 = var(30)=122
trigger40 = var(30)=123
trigger41 = var(30)=124
trigger42 = var(30)=125
trigger43 = var(30)=86+40
trigger44 = var(30)=87+40
trigger45 = var(30)=88+40
trigger46 = var(30)=89+40
trigger47 = var(30)=91+40
trigger48 = var(30)=99+40
trigger49 = var(30)=101+40
trigger50 = var(30)=102+40
trigger51 = var(30)=103+40
trigger52 = var(30)=104+40
trigger53 = var(30)=105+40
trigger54 = var(30)=106+40
trigger55 = var(30)=107+40
trigger56 = var(30)=108+40
trigger57 = var(30)=112+40
trigger58 = var(30)=115+40
trigger59 = var(30)=156
trigger60 = var(30)=158
trigger61 = var(30)=159
trigger62 = var(30)=160
trigger63 = var(30)=161
trigger64 = var(30)=162
trigger65 = var(30)=163
trigger66 = var(30)=164
trigger67 = var(30)=165
trigger68 = var(30)=167
trigger69 = var(30)=168
trigger70 = var(30)=172
trigger71 = var(30)=175
trigger72 = var(30)=178
trigger73 = var(30)=181
trigger74 = var(30)=184
trigger75 = var(30)=187
trigger76 = var(30)=190
trigger77 = var(30)=193
trigger78 = var(30)=196
trigger79 = var(30)=199
trigger80 = var(30)=201

[state 20000]
type = AngleSet
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
trigger1 = root,numexplod(50000) && var(30)=170
value = 0

[state 20000]
type = varset
trigger1 = var(30)<17
fvar(10) = 0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[17,47])
fvar(10) = -.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[48,79])
fvar(10) = .9

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[80,88])
fvar(10) = -4.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[118,128])
trigger2 = root,numexplod(50000) && (var(30)=[158,168])
fvar(10) = -2.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[89,92])
trigger2 = root,numexplod(50000) && (var(30)=[119,132])
trigger3 = root,numexplod(50000) && (var(30)=[159,172])
fvar(10) = -.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[96,108])
trigger2 = root,numexplod(50000) && (var(30)=[136,148])
fvar(10) = 2.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[109,116])
trigger2 = root,numexplod(50000) && (var(30)=[149,156])
fvar(10) = .5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[173,199])
fvar(10) = .5

[state 20000]
type = varset
trigger1 = root,numexplod(50000) && var(30)>=200
fvar(10) = 0

[state 20000]
type = AngleDraw
trigger1 = 1
value = fvar(10)

[state 21000]
type = PosSet
trigger1 = (var(30)=[88,99])
trigger2 = (var(30)=[108,119])
trigger3 = (var(30)=[128,139])
trigger4 = (var(30)=[148,159])
trigger5 = (var(30)=[168,179])
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))+floor(20*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = (var(30)=[100,107])
trigger2 = (var(30)=[120,127])
trigger3 = (var(30)=[140,147])
trigger4 = (var(30)=[160,167])
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))+floor(10*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = (var(30)=[178,180])
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))+floor(16*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = (var(30)=[181,183])
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))+floor(14*const(size.yscale))


[state 21000]
type = PosSet
trigger1 = (var(30)=[184,186])
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))+floor(12*const(size.yscale))


[state 21000]
type = PosSet
trigger1 = (var(30)=[187,189])
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))+floor(10*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = (var(30)=[190,192])
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))+floor(8*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = (var(30)=[193,195])
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))+floor(6*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = (var(30)=[196,198])
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))+floor(4*const(size.yscale))

[state 21000]
type = PosSet
trigger1 = (var(30)=[199,200])
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))+floor(2*const(size.yscale))

;屋根
[state -2]
type = Helper
trigger1 = !numhelper(22030) && root,var(12)!=2001
id = 22030
stateno=22030
name = "Roof"
pos = 0,-floor(160*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;大砲
[state -2]
type = Helper
trigger1 = !numhelper(22050) && root,var(12)!=2001
id = 22050
stateno=220350
name = "Cannon"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;龍頭
[state -2]
type = Helper
trigger1 = !numhelper(22040) && root,var(12)!=2001
id = 22040
stateno=22025
name = "Dragon_Head"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足1-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42000) && root,var(12)!=2001
id = 42000
anim = Anim+1500
pos = floor(120*const(size.xscale)),floor(270*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42500) && root,var(12)!=2001
id = 42500
anim = Anim+2000
pos = floor(116*const(size.xscale)),floor(226*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43000) && root,var(12)!=2001
id = 43000
anim = Anim+2500
pos = floor(120*const(size.xscale)),-floor(58*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43500) && root,var(12)!=2001
id = 43500
anim = Anim+3000
pos = -floor(130*const(size.xscale)),floor(268*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44000) && root,var(12)!=2001
id = 44000
anim = Anim+3500
pos = -floor(135*const(size.xscale)),floor(224*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44500) && root,var(12)!=2001
id = 44500
anim = Anim+4000
pos = -floor(126*const(size.xscale)),-floor(62*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46000) && root,var(12)!=2001
id = 46000
anim = Anim+5500
pos = floor(110*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45500) && root,var(12)!=2001
id = 45500
anim = Anim+5000
pos = floor(98*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45000) && root,var(12)!=2001
id = 45000
anim = Anim+4500
pos = floor(98*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47500
anim = Anim+7000
pos = -floor(130*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47000
anim = Anim+6500
pos = -floor(118*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46500) && root,var(12)!=2001
id = 46500
anim = Anim+6000
pos = -floor(118*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

[state 12000]
type = ParentVarSet
trigger1 = var(30)=202
var(40) = 10+var(40)

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 12000]
type = PlaySND
trigger1 = var(30)=88
trigger2 = var(30)=108
trigger3 = var(30)=128
trigger4 = var(30)=148
trigger5 = var(30)=168
value = 5100,2
channel = 7

;地震
[State 40, 1]
type = Helper
trigger1 = var(30)=88
trigger2 = var(30)=108
trigger3 = var(30)=128
trigger4 = var(30)=148
trigger5 = var(30)=168
id = 6930
stateno = 6930
pos = 0,0
postype = p1
ownpal = 1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause = 1

;岩（前足）
[State 40, 1]
type = Helper
trigger1 = var(30)=88
trigger2 = var(30)=108
trigger3 = var(30)=128
trigger4 = var(30)=148
trigger5 = var(30)=168
id = 6925
stateno = 6920
pos = floor(136*const(size.xscale))*ifelse((var(30)=108||var(30)=148),-1,1),floor((278-20-(var(30)=168)*20)*const(size.yscale))
postype = p1
ownpal = 1
pausemovetime = 9999
supermovetime = 9999

[state 20000]
type = VelSet
trigger1 = numhelper(30000)
trigger1 = vel x>0&&ifelse(facing=1,helper(30000),pos x-pos x,-(helper(30005),pos x-pos x))<(floor(60*const(size.xscale))+const(size.ground.front))
trigger2 = numhelper(30000)
trigger2 = vel x<0&&ifelse(facing=1,-(helper(30005),pos x-pos x),(helper(30000),pos x-pos x))<(floor(60*const(size.xscale))+const(size.ground.back))
x = 0

;Attack Lv.3
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed
trigger1 = (var(30)=[88,91])
trigger2 = (var(30)=[108,111])
trigger3 = (var(30)=[128,131])
trigger4 = (var(30)=[148,151])
trigger5 = (var(30)=[168,171])
damage = floor(54*ifelse(root,fvar(1)<.25,.25,root,fvar(1))*root,fvar(2)*root,fvar(3)*root,fvar(4)*1.22),floor(ceil(54*root,fvar(3)*root,fvar(4)*1.0/4)*1.22)
ground.slidetime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
ground.hittime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
guard.slidetime = 12
guard.hittime = 12
pausetime = 1,14
ground.velocity = var(35)*ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0014,-6.0*var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-14.0*(51-root,var(3))/51-.9)*const(size.yscale))
guard.velocity = -12.0*var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = var(35)*ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0014,-6.0*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-14.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),50+12,36-ifelse(floor(root,var(14)/60)>9,9,floor(root,var(14)/60))+12)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(44*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(44*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(44*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(44*root,fvar(3)*.8*1.0/8)*1.38
fall = 1
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = S,SA
hitflag = MAFD
guardflag = MA
sprpriority = -4

[state 200]
type = MoveHitReset
trigger1 = var(30)=92
trigger2 = var(30)=112
trigger3 = var(30)=132
trigger4 = var(30)=152

[state -1]
type = targetstate
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
value = 926+10*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(54*root,fvar(14)<1,1+(root,var(2)%5=1),54*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%4

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = floor(120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 12000]
type = AttackDist
trigger1 = var(30)=172
value = 0

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=10001
var(12) = ifelse((-var(12)+10000)>=(root,var(12)-1),-root,var(12)+10001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state 190]
type = ChangeState
trigger1 = var(30)=202
value = 22000

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 22500

;滅騎（本体・砲弾発射）
[statedef 22050]
type = S
movetype= A
physics = N
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 21000]
type = PosSet
trigger1 = 1
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 30000]
type = ChangeAnim
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=6
trigger3 = var(30)=18
trigger4 = var(30)=19
trigger5 = var(30)=22
trigger6 = var(30)=24
trigger7 = var(30)=26
trigger8 = var(30)=27
trigger9 = var(30)=28
trigger10 = var(30)=32
trigger11 = var(30)=39
trigger12 = var(30)=43
trigger13 = var(30)=44
trigger14 = var(30)=45
trigger15 = var(30)=46
trigger16 = var(30)=47
trigger17 = var(30)=48
trigger18 = var(30)=49
trigger19 = var(30)=50
trigger20 = var(30)=51
trigger21 = var(30)=53
trigger22 = var(30)=55
trigger23 = var(30)=72
trigger24 = var(30)=75
trigger25 = var(30)=81
trigger26 = var(30)=83
trigger27 = var(30)=87
trigger28 = var(30)=90
trigger29 = var(30)=92
trigger30 = var(30)=95
trigger31 = var(30)=97
trigger32 = var(30)=98
trigger33 = var(30)=99
trigger34 = var(30)=100
trigger35 = var(30)=101
trigger36 = var(30)=102
trigger37 = var(30)=103
trigger38 = var(30)=105
trigger39 = var(30)=108
trigger40 = var(30)=109
trigger41 = var(30)=110
trigger42 = var(30)=111
trigger43 = var(30)=112
value = Anim+1

[state 31000]
type = RemoveExplod
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=6
trigger3 = var(30)=18
trigger4 = var(30)=19
trigger5 = var(30)=22
trigger6 = var(30)=24
trigger7 = var(30)=26
trigger8 = var(30)=27
trigger9 = var(30)=28
trigger10 = var(30)=32
trigger11 = var(30)=39
trigger12 = var(30)=43
trigger13 = var(30)=44
trigger14 = var(30)=45
trigger15 = var(30)=46
trigger16 = var(30)=47
trigger17 = var(30)=48
trigger18 = var(30)=49
trigger19 = var(30)=50
trigger20 = var(30)=51
trigger21 = var(30)=53
trigger22 = var(30)=55
trigger23 = var(30)=72
trigger24 = var(30)=75
trigger25 = var(30)=81
trigger26 = var(30)=83
trigger27 = var(30)=87
trigger28 = var(30)=90
trigger29 = var(30)=92
trigger30 = var(30)=95
trigger31 = var(30)=97
trigger32 = var(30)=98
trigger33 = var(30)=99
trigger34 = var(30)=100
trigger35 = var(30)=101
trigger36 = var(30)=102
trigger37 = var(30)=103
trigger38 = var(30)=105
trigger39 = var(30)=108
trigger40 = var(30)=109
trigger41 = var(30)=110
trigger42 = var(30)=111
trigger43 = var(30)=112

;屋根
[state -2]
type = Helper
trigger1 = !numhelper(22030) && root,var(12)!=2001
id = 22030
stateno=22030
name = "Roof"
pos = 0,-floor(160*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;大砲
[state -2]
type = Helper
trigger1 = !numhelper(22050) && root,var(12)!=2001
id = 22050
stateno=22035
name = "Cannon"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;龍頭
[state -2]
type = Helper
trigger1 = !numhelper(22040) && root,var(12)!=2001
id = 22040
stateno=22025
name = "Dragon_Head"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足1-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42000) && root,var(12)!=2001
id = 42000
anim = Anim+1500
pos = floor(120*const(size.xscale)),floor(270*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42500) && root,var(12)!=2001
id = 42500
anim = Anim+2000
pos = floor(116*const(size.xscale)),floor(226*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43000) && root,var(12)!=2001
id = 43000
anim = Anim+2500
pos = floor(120*const(size.xscale)),-floor(58*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43500) && root,var(12)!=2001
id = 43500
anim = Anim+3000
pos = -floor(130*const(size.xscale)),floor(268*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44000) && root,var(12)!=2001
id = 44000
anim = Anim+3500
pos = -floor(135*const(size.xscale)),floor(224*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44500) && root,var(12)!=2001
id = 44500
anim = Anim+4000
pos = -floor(126*const(size.xscale)),-floor(62*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46000) && root,var(12)!=2001
id = 46000
anim = Anim+5500
pos = floor(110*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45500) && root,var(12)!=2001
id = 45500
anim = Anim+5000
pos = floor(98*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45000) && root,var(12)!=2001
id = 45000
anim = Anim+4500
pos = floor(98*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47500
anim = Anim+7000
pos = -floor(130*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47000
anim = Anim+6500
pos = -floor(118*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46500) && root,var(12)!=2001
id = 46500
anim = Anim+6000
pos = -floor(118*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

[state 12000]
type = ParentVarSet
trigger1 = var(30)=112
var(40) = 10+var(40)

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 12000]
type = VelSet
trigger1 = 1
x = 0

;援軍ヒット判別
[state 12000]
type = VarSet
trigger1 = numhelper(26730)
var(19) = ifelse(helper(26730),movecontact=2,(12+11)*ifelse(helper(26730),moveguarded||!helper(26730),numtarget,-1,1),0)

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = numhelper(26730)
trigger1 = helper(26730),movecontact=2
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(helper(26730),moveguarded||!helper(26730),numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26730)
trigger1 = helper(26730),movehit=1&&helper(26730),numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26730)
trigger1 = helper(26730),movehit=1&&helper(26730),numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = numhelper(26730)
trigger1 = helper(26730),movehit=1
fvar(15) = .00005*floor(ifelse(30*root,fvar(14)<1,1+(root,var(2)%5=1),30*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = numhelper(26730)
trigger1 = helper(26730),movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=10001
var(12) = ifelse((-var(12)+10000)>=(root,var(12)-1),-root,var(12)+10001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

;効果音
[state -2]
type = PlaySnd
trigger1 = var(30)=67
trigger2 = var(30)=70&&floor(root,var(43)/1000)>=50
trigger3 = var(30)=73&&floor(root,var(43)/1000)>=100
value = 30,7
channel = 4

;爆発エフェクト
[state 26200]
type = Helper
trigger1 = var(30)=67
trigger2 = var(30)=70&&floor(root,var(43)/1000)>=50
trigger3 = var(30)=73&&floor(root,var(43)/1000)>=100
id = 26209
stateno=26209
name = "exp"
pos = floor(322*const(size.xscale)),floor(55*const(size.yscale))
postype = P1
ownpal = 1
pausemovetime=999999
supermovetime=999999

;砲弾
[state -2]
type = Helper
trigger1 = var(30)=67
trigger2 = var(30)=70&&floor(root,var(43)/1000)>=50
trigger3 = var(30)=73&&floor(root,var(43)/1000)>=100
id = 26730
stateno=26730
name = "bullet"
pos = floor((322-(var(30)=70)*14-(var(30)=73)*17)*const(size.xscale)),floor((55-(var(30)=70)*7-(var(30)=73)*25)*const(size.yscale))
postype = P1
ownpal = 1
pausemovetime=999999
supermovetime=999999

[state 190]
type = ChangeState
trigger1 = var(30)=112
value = 22000

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 22500

;滅騎(砲弾)
[statedef 26730]
type = A
movetype=A
physics =N
sprpriority = 2
velset = 0,0
anim = 26730

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20000]
type = VelSet
trigger1 = time=1
x = 15.8*const(size.xscale)
y = 13.4*const(size.yscale)

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;Attack Lv.2
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed && root,numexplod(50000)
trigger1 = 1
damage = floor(ifelse(30*root,fvar(0)<1,1+(root,var(2)%5=4),30*root,fvar(0))*1.22),floor(ceil(30*root,fvar(3)*root,fvar(4)*1.0/4)*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.slidetime = 10
guard.hittime = 10
pausetime = 1,13
ground.velocity =ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0011,-6.0*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
guard.velocity = -10.5*parent,var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0011,-6.0*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*parent,var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),40+12,32-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+12)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(22*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(22*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(22*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(22*root,fvar(3)*.8*1.0/8)*1.38
fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = UP
ground.type = Low
attr = A,SP
hitflag = MAFD
guardflag = MA

[state -1]
type = AttackDist
trigger1 = movecontact
value = 0

;en first hit
[state -2]
type = parentVarset
triggerall = root,var(44)%2048<1024 && root,numexplod(8798)
trigger1 = movehit=1
var(11) = 2
ignorehitpause=1

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

[state -1]
type = targetstate
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
value = 926+10*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(30*root,fvar(14)<1,1+(root,var(2)%5=1),30*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%4
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)+floor(-60*const(size.yscale))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-180*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = ChangeState
trigger1 = movecontact>=3||movereversed||(Pos Y>=0);-Vel Y)
value = 26731

;滅騎(砲弾・破裂)
[statedef 26731]
type = A
movetype=A
physics =N
sprpriority = 4
velset = 0,0
anim = 26731

[state 26200]
type = PosSet
trigger1 = !time && Pos Y>0
y = 0

[state -2]
type = StopSnd
trigger1 = !time
channel = 4

[state 20000]
type = PlaySnd
trigger1 = !time
value = 30,7
channel = 4

;爆発エフェクト
[state 26200]
type = Helper
trigger1 = !time
id = 26209
stateno=26209
name = "exp"
pos = 0,0
postype = P1
ownpal = 1
sprpriority = 3
pausemovetime=999999
supermovetime=999999

;Attack Lv.3
[state 200]
type = Hitdef
triggerall = Anim=26731 && !movecontact && !movereversed && root,numexplod(50000)
trigger1 = 1
damage = floor(35*ifelse(root,fvar(1)<.25,.25,root,fvar(1))*root,fvar(2)*root,fvar(3)*root,fvar(4)*1.22),floor(ceil(35*root,fvar(3)*root,fvar(4)*1.0/4)*1.22)
ground.slidetime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
ground.hittime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
guard.slidetime = 12
guard.hittime = 12
pausetime = 1,14
ground.velocity =ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0014,-4.0*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-11.0*(51-root,var(3))/51-.9)*const(size.yscale))
guard.velocity = -12.0*parent,var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0014,-4.0*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-11.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*parent,var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),40+12,32-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+12)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = UP
ground.type = Low
attr = ,SA
hitflag = MAFD
guardflag = MA

[state -1]
type = AttackDist
trigger1 = movecontact
value = 0

;en first hit
[state -2]
type = parentVarset
triggerall = root,var(44)%2048<1024 && root,numexplod(8798)
trigger1 = movehit=1
var(11) = 2
ignorehitpause=1

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

[state -1]
type = targetstate
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
value = 926+10*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(30*root,fvar(14)<1,1+(root,var(2)%5=1),30*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%4
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = ifelse(abs(P2dist X)>(100*const(size.xscale)),floor(100*const(size.xscale))*(1-((P2dist X)<0)*2),floor(P2dist X))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = floor(-0*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = ChangeAnim
trigger1 = !AnimTime && Anim!=90000
value = 90000

[state 190]
type = StateTypeSet
trigger1 = Anim=90000
movetype = I

[state 190]
type = DestroySelf
trigger1 = Anim=90000 &&(!numtarget||root,numtarget)

;滅騎（本体・火炎放射）
[statedef 22060]
type = S
movetype= A
physics = N
sprpriority = -4
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 21000]
type = PosSet
trigger1 = 1
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))

[state 20000]
type = null;PosAdd
trigger1 = var(30)=18
trigger2 = var(30)=19
trigger3 = var(30)=20
trigger4 = var(30)=21
trigger5 = var(30)=22
trigger6 = var(30)=24
trigger7 = var(30)=26
trigger8 = var(30)=28
trigger9 = var(30)=30
trigger10 = var(30)=33
y = ceil(2*const(size.yscale))

[state 21000]
type = displaytoclipboard
trigger1 = 1
text=" anim =%d"
params = anim

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 30000]
type = ChangeAnim
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=18
trigger3 = var(30)=19
trigger4 = var(30)=20
trigger5 = var(30)=21
trigger6 = var(30)=22
trigger7 = var(30)=24
trigger8 = var(30)=26
trigger9 = var(30)=28
trigger10 = var(30)=30
trigger11 = var(30)=33
trigger12 = var(30)=40
trigger13 = var(30)=47
trigger14 = var(30)=50
trigger15 = var(30)=54
trigger16 = var(30)=56
trigger17 = var(30)=58
trigger18 = var(30)=62
trigger19 = var(30)=64
trigger20 = var(30)=67
trigger21 = var(30)=70
trigger22 = var(30)=71
trigger23 = var(30)=73
trigger24 = var(30)=76
trigger25 = var(30)=81
trigger26 = var(30)=88
trigger27 = var(30)=96
trigger28 = var(30)=101
trigger29 = var(30)=103
trigger30 = var(30)=108
trigger31 = var(30)=113
value = Anim+1

[state 31000]
type = RemoveExplod
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=18
trigger3 = var(30)=19
trigger4 = var(30)=20
trigger5 = var(30)=21
trigger6 = var(30)=22
trigger7 = var(30)=24
trigger8 = var(30)=26
trigger9 = var(30)=28
trigger10 = var(30)=30
trigger11 = var(30)=33
trigger12 = var(30)=40
trigger13 = var(30)=47
trigger14 = var(30)=50
trigger15 = var(30)=54
trigger16 = var(30)=56
trigger17 = var(30)=58
trigger18 = var(30)=62
trigger19 = var(30)=64
trigger20 = var(30)=67
trigger21 = var(30)=70
trigger22 = var(30)=71
trigger23 = var(30)=73
trigger24 = var(30)=76
trigger25 = var(30)=81
trigger26 = var(30)=88
trigger27 = var(30)=96
trigger28 = var(30)=101
trigger29 = var(30)=103
trigger30 = var(30)=108
trigger31 = var(30)=113

[state 20000]
type = AngleSet
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
trigger1 = root,numexplod(50000) && var(30)=170
value = 0

[state 20000]
type = varset
trigger1 = var(30)<16
fvar(10) = 0

[state 20000]
type = varset
trigger1 = var(30)=16
fvar(10) = -1.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[17,34])
fvar(10) = -.4*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[35,37])
fvar(10) = -.25*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[38,39])
fvar(10) = -.1*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[40,41])
fvar(10) = .1*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && var(30)=42
fvar(10) = .1*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[43,44])
fvar(10) = .25*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[45,47])
fvar(10) = .5*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[48,58])
fvar(10) = .6*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[59,74])
fvar(10) = .5*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[75,79])
fvar(10) = .35*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[80,85])
fvar(10) = .25*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[86,87])
fvar(10) = .1*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[92,94])
fvar(10) = -.1*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[95,97])
fvar(10) = -.25*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[98,100])
fvar(10) = -.5*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[101,110])
fvar(10) = -.6*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[111,113])
fvar(10) = -.5*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[114,115])
fvar(10) = -.25*1.5

[state 20000]
type = varset
trigger1 = root,numexplod(50000) && var(30)>=116
fvar(10) = 0

[state 20000]
type = AngleDraw
trigger1 = 1
value = fvar(10)

;屋根
[state -2]
type = Helper
trigger1 = !numhelper(22030) && root,var(12)!=2001
id = 22030
stateno=22030
name = "Roof"
pos = 0,-floor(160*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;大砲
[state -2]
type = Helper
trigger1 = !numhelper(22050) && root,var(12)!=2001
id = 22050
stateno=22035
name = "Cannon"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;龍頭
[state -2]
type = Helper
trigger1 = !numhelper(22040) && root,var(12)!=2001
id = 22040
stateno=22025
name = "Dragon_Head"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足1-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42000) && root,var(12)!=2001
id = 42000
anim = Anim+1500
pos = floor(120*const(size.xscale)),floor(270*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42500) && root,var(12)!=2001
id = 42500
anim = Anim+2000
pos = floor(116*const(size.xscale)),floor(226*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43000) && root,var(12)!=2001
id = 43000
anim = Anim+2500
pos = floor(120*const(size.xscale)),-floor(58*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43500) && root,var(12)!=2001
id = 43500
anim = Anim+3000
pos = -floor(130*const(size.xscale)),floor(268*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44000) && root,var(12)!=2001
id = 44000
anim = Anim+3500
pos = -floor(135*const(size.xscale)),floor(224*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44500) && root,var(12)!=2001
id = 44500
anim = Anim+4000
pos = -floor(126*const(size.xscale)),-floor(62*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46000) && root,var(12)!=2001
id = 46000
anim = Anim+5500
pos = floor(110*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45500) && root,var(12)!=2001
id = 45500
anim = Anim+5000
pos = floor(98*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45000) && root,var(12)!=2001
id = 45000
anim = Anim+4500
pos = floor(98*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47500
anim = Anim+7000
pos = -floor(130*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47000
anim = Anim+6500
pos = -floor(118*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46500) && root,var(12)!=2001
id = 46500
anim = Anim+6000
pos = -floor(118*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

[state 12000]
type = ParentVarSet
trigger1 = var(30)=116
var(40) = 10+var(40)

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 12000]
type = VelSet
trigger1 = 1
x = 0

;援軍ヒット判別
[state 12000]
type = VarSet
trigger1 = numhelper(26740)
var(19) = ifelse(helper(26740),movecontact=2,(12+11)*ifelse(helper(26740),moveguarded||!helper(26740),numtarget,-1,1),0)

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = numhelper(26740)
trigger1 = helper(26740),movecontact=2
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(helper(26740),moveguarded||!helper(26740),numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = var(2)>0
;trigger1 = numhelper(26740)
;trigger1 = helper(26740),movehit=1&&helper(26740),numtarget
var(2) = var(2)
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = var(3)>0
;trigger1 = numhelper(26740)
;trigger1 = helper(26740),movehit=1&&helper(26740),numtarget&&(root,var(3)||P2statetype=A)
var(3) = var(3)
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = fvar(15)>0
fvar(15) = .00005*floor(ifelse(20*root,fvar(14)<1,1+(root,var(2)%5=1),20*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = fvar(14)>0
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;リセット
[state 12000]
type = Null
trigger1 = var(2)>0
trigger1 = var(2):=0
trigger2 = var(3)>0
trigger2 = var(3):=0
trigger3 = fvar(14)>0
trigger3 = fvar(14):=0
trigger4 = fvar(15)>0
trigger4 = fvar(15):=0
ignorehitpause=1

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=10001
var(12) = ifelse((-var(12)+10000)>=(root,var(12)-1),-root,var(12)+10001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

;効果音
[state -2]
type = PlaySnd
trigger1 = var(30)=65
trigger2 = var(30)=73
trigger3 = var(30)=81
trigger4 = var(30)=89
trigger5 = var(30)=97
trigger6 = var(30)=105&&floor(root,var(43)/1000)>=100
trigger7 = var(30)=113&&floor(root,var(43)/1000)>=100
value = 30,11
channel = 4

;炎（1発目）
[state -2]
type = Helper
trigger1 = var(30)=65
id = 26740
stateno=26740
name = "flame"
pos = floor(320*const(size.xscale)),-floor(120*const(size.yscale))
postype = P1
ownpal = 1
sprpriority = -4
pausemovetime=999999
supermovetime=999999

;炎（2発目）
[state -2]
type = Helper
trigger1 = var(30)=73
id = 26740
stateno=26740
name = "flame"
pos = floor(320*const(size.xscale)),-floor(188*const(size.yscale))
postype = P1
ownpal = 1
sprpriority = -4
pausemovetime=999999
supermovetime=999999

;炎（3発目）
[state -2]
type = Helper
trigger1 = var(30)=81
id = 26740
stateno=26740
name = "flame"
pos = floor(302*const(size.xscale)),-floor(218*const(size.yscale))
postype = P1
ownpal = 1
sprpriority = -4
pausemovetime=999999
supermovetime=999999

;炎（4発目）
[state -2]
type = Helper
trigger1 = var(30)=89
id = 26740
stateno=26740
name = "flame"
pos = floor(272*const(size.xscale)),-floor(218*const(size.yscale))
postype = P1
ownpal = 1
sprpriority = -4
pausemovetime=999999
supermovetime=999999

;炎（5発目）
[state -2]
type = Helper
trigger1 = var(30)=97
id = 26740
stateno=26740
name = "flame"
pos = floor(298*const(size.xscale)),-floor(210*const(size.yscale))
postype = P1
ownpal = 1
sprpriority = -4
pausemovetime=999999
supermovetime=999999

;炎（6発目）
[state -2]
type = Helper
trigger1 = var(30)=105&&floor(root,var(43)/1000)>=100
id = 26740
stateno=26740
name = "flame"
pos = floor(272*const(size.xscale)),-floor(198*const(size.yscale))
postype = P1
ownpal = 1
sprpriority = -4
pausemovetime=999999
supermovetime=999999

;炎（7発目）
[state -2]
type = Helper
trigger1 = var(30)=113&&floor(root,var(43)/1000)>=100
id = 26740
stateno=26740
name = "flame"
pos = floor(266*const(size.xscale)),-floor(170*const(size.yscale))
postype = P1
ownpal = 1
sprpriority = -4
pausemovetime=999999
supermovetime=999999

[state 190]
type = ChangeState
trigger1 = var(30)=116
value = 22000

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 22500

;滅騎(火炎)
[statedef 26740]
type = A
movetype=A
physics =N
sprpriority = 2
velset = 0,0
anim = 26500

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20000]
type = VarSet
trigger1 = !time
var(30) = 0

[state 20000]
type = VarAdd
trigger1 = root,numexplod(50000) && time
var(30) = 1

[state 20000]
type = AngleDraw
trigger1 = 1
scale = .5+(var(30))*.02,.5+(var(30))*.02

[state 20000]
type = Trans
trigger1 = 1
trans = Add

[state 20000]
type = VelSet
trigger1 = time=1
x = 12.0*const(size.xscale)
y = .5*const(size.yscale)

[state 20000]
type = VelAdd
trigger1 = time>1 && root,numexplod(50000)
y = .25*const(size.yscale)

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;Attack Lv.5
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed && root,numexplod(50000)
trigger1 = 1
damage = floor(20*ifelse(root,fvar(1)<.25,.25,root,fvar(1))*root,fvar(2)*root,fvar(3)*root,fvar(4)*1.22),floor(ceil(20*root,fvar(3)*root,fvar(4)*1.0/4)*1.22)
ground.slidetime = 20+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
ground.hittime = 20+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
guard.slidetime = 18
guard.hittime = 18
pausetime = 1,14
ground.velocity = -15.0*parent,var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -15.0*parent,var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0014,-6.0*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*parent,var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),63+14,44-ifelse(floor(root,var(14)/50)>10,10,floor(root,var(14)/50))+14)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,2)
guardsound = s7000,2
getpower = floor(ifelse(root,var(9),0,floor(20*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(20*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(20*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(20*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = A,SP
hitflag = MAFD
guardflag = MA
palfx.time=ifelse(p2statetype=A,56-(root,var(6)%10>0)*40,34)
palfx.sinadd = 96,48,0,4
palfx.color = 0
palfx.add = 56,-96,-208
palfx.invertall = 1

[state -1]
type = AttackDist
trigger1 = movecontact
value = 0

;en first hit
[state -2]
type = parentVarset
triggerall = root,var(44)%2048<1024 && root,numexplod(8798)
trigger1 = movehit=1
var(11) = 2
ignorehitpause=1

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

[state -1]
type = targetstate
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
value = 926+10*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(20*root,fvar(14)<1,1+(root,var(2)%5=1),20*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%4
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)+floor(-60*const(size.yscale))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-180*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 20000]
type = ChangeState
trigger1 = Pos Y>=0 && !movecontact && !movereversed
value = 26745

[state 20000]
type = ChangeAnim
triggerall = Anim!=90000
trigger1 = (FrontEdgeBodyDist<-40&&!movecontact)||movecontact>=1||movereversed||Pos Y>=0
value = 90000

[state 190]
type = DestroySelf
trigger1 = (FrontEdgeBodyDist<-40&&!movecontact)||movecontact>=34||movereversed

;滅騎(火炎・着弾)
[statedef 26745]
type = S
movetype=A
physics =N
sprpriority = 2
velset = 0,0
anim = 26510

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state -2]
type = StopSnd
trigger1 = !time
channel = 4

;効果音
[state -2]
type = PlaySnd
trigger1 = !time
value = 30,11
channel = 4

[state 20000]
type = VarSet
trigger1 = !time
var(30) = 0

[state 20000]
type = VarAdd
trigger1 = root,numexplod(50000) && time
var(30) = 1

[state 20000]
type = AngleDraw
trigger1 = anim = 26510 && root,numexplod(50000)
scale = 2-(var(30))*.04,2+(var(30))*.08

[state 20000]
type = Trans
trigger1 = 1
trans = Add

;Attack Lv.5
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed && root,numexplod(50000)
trigger1 = 1
damage = floor(ifelse(20*root,fvar(0)<1,1+(root,var(2)%5=4),20*root,fvar(0))*1.22),floor(ceil(20*root,fvar(3)*root,fvar(4)*1.0/4)*1.22)
ground.slidetime = 20+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 20+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.slidetime = 18
guard.hittime = 18
pausetime = 1,14
ground.velocity = -15.0*parent,var(35)*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -15.0*parent,var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0014,-6.0*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*parent,var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),63+14,44-ifelse(floor(root,var(14)/50)>10,10,floor(root,var(14)/50))+14)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,2)
guardsound = s7000,2
getpower = floor(ifelse(root,var(9),0,floor(20*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(20*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(20*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(20*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = A,SP
hitflag = MAFD
guardflag = MA
palfx.time=ifelse(p2statetype=A,56-(root,var(6)%10>0)*40,34)
palfx.sinadd = 96,48,0,4
palfx.color = 0
palfx.add = 56,-96,-208
palfx.invertall = 1

[state -1]
type = AttackDist
trigger1 = movecontact
value = 0

;en first hit
[state -2]
type = parentVarset
triggerall = root,var(44)%2048<1024 && root,numexplod(8798)
trigger1 = movehit=1
var(11) = 2
ignorehitpause=1

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

[state -1]
type = targetstate
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
value = 926+10*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(20*root,fvar(14)<1,1+(root,var(2)%5=1),20*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%4
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)+floor(-60*const(size.yscale))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-180*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 20000]
type = ChangeAnim
triggerall = Anim!=90000
trigger1 = var(30)>50
value = 90000

[state 190]
type = DestroySelf
trigger1 = var(30)>52

;滅騎（屋根）
[statedef 22030]
type = S
movetype=I
physics =N
sprpriority = -4
velset = 0,0
anim = 40000

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 41500]
type = ChangeAnim
trigger1 = selfanimexist(parent,anim-500) && root,numexplod(50000)
trigger1 = anim!=(parent,anim-500)
value = parent,anim-500

[state 20000]
type = AngleSet
trigger1 = 1
value = 0

[state 20000]
type = AngleDraw
trigger1 = parent,stateno=22040 || parent,stateno=22060
value = parent,fvar(10)

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=10001
var(12) = ifelse((-var(12)+10000)>=(root,var(12)-1),-root,var(12)+10001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 22530

[state 190]
type = null;ChangeAnim
trigger1 = (parent,anim-1000)%1000!=anim%1000
trigger1 = selfanimexist(41500+(parent,anim-1000)%1000)
value = 41500+(parent,anim-1000)%1000

[state 190]
type = BindToParent
trigger1 = 1
pos = 0,-ceil(160*const(size.yscale))
time=1
facing=1

[state 190]
type = DestroySelf
trigger1 = numhelper(20000)
trigger1 = helper(20000),stateno=29000

;滅騎（龍頭）
[statedef 22025]
type = S
movetype=I
physics =N
sprpriority = -4
velset = 0,0
anim = 41000

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = varset
trigger1 = 1
fvar(10) = 0

[state 20000]
type = AngleDraw
trigger1 = 1
value = fvar(10)

[state 41500]
type = ChangeAnim
trigger1 = selfanimexist(parent,anim+500) && root,numexplod(50000)
trigger1 = anim!=(parent,anim+500)
value = parent,anim+500

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 22535

[state 190]
type = null;ChangeAnim
trigger1 = (parent,anim-500)%1000!=anim%1000
trigger1 = selfanimexist(41000+(parent,anim-500)%1000)
value = 41000+(parent,anim-500)%1000

[state 190]
type = ChangeState
trigger1 = parent,stateno=22040
value = 22026

[state 190]
type = ChangeState
trigger1 = parent,stateno=22060
value = 22028

[state 190]
type = BindToParent
trigger1 = 1
pos = ceil(154*const(size.xscale)),-ceil(62*const(size.yscale))
time=1
facing=1

[state 190]
type = DestroySelf
trigger1 = numhelper(20000)
trigger1 = helper(20000),stateno=29000

;滅騎（龍頭・地団駄）
[statedef 22026]
type = S
movetype=U
physics =N
sprpriority = -4
velset = 0,0
anim = 41300

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別
[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 30000]
type = VarAdd
trigger1 = !time
var(30) = 30

[state 20000]
type = varset
trigger1 = var(30)<17
fvar(10) = 0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[17,47])
fvar(10) = -.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[48,74])
fvar(10) = 1.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[75,92])
trigger2 = root,numexplod(50000) && (var(30)=[115,132])
trigger3 = root,numexplod(50000) && (var(30)=[155,172])
fvar(10) = -2.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[96,113])
trigger2 = root,numexplod(50000) && (var(30)=[136,153])
fvar(10) = 2.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[173,199])
fvar(10) = .5

[state 20000]
type = varset
trigger1 = root,numexplod(50000) && var(30)>=200
fvar(10) = -4

[state 20000]
type = AngleDraw
trigger1 = 1
value = fvar(10)

[state 20000]
type = AngleSet
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
trigger1 = root,numexplod(50000) && var(30)=170
value = 0

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 22525

[state 190]
type = BindToParent
trigger1 = 1
pos = ceil(154*const(size.xscale))-90*sin(parent,fvar(10)*0.5*Pi/180),-ceil(62*const(size.xscale))-160*sin(parent,fvar(10)*0.5*Pi/180)
time=1
facing=1

[state 190]
type = ChangeState
trigger1 = parent,stateno!=22040
value = 22025

;滅騎（龍頭・火炎放射）
[statedef 22028]
type = S
movetype=U
physics =N
sprpriority = -4
velset = 0,0
anim = 41300

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別
[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 30000]
type = VarAdd
trigger1 = !time
var(30) = 11

[state 30000]
type = ChangeAnim
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=2
trigger2 = var(30)=18
trigger3 = var(30)=19
trigger4 = var(30)=20
trigger5 = var(30)=21
trigger6 = var(30)=22
trigger7 = var(30)=24
trigger8 = var(30)=26
trigger9 = var(30)=28
trigger10 = var(30)=30
trigger11 = var(30)=33
trigger12 = var(30)=40
trigger13 = var(30)=47
trigger14 = var(30)=50
trigger15 = var(30)=54
trigger16 = var(30)=56
trigger17 = var(30)=58
trigger18 = var(30)=62
trigger19 = var(30)=64
trigger20 = var(30)=67
trigger21 = var(30)=70
trigger22 = var(30)=71
trigger23 = var(30)=73
trigger24 = var(30)=76
trigger25 = var(30)=81
trigger26 = var(30)=88
trigger27 = var(30)=96
trigger28 = var(30)=101
trigger29 = var(30)=103
trigger30 = var(30)=108
trigger31 = var(30)=113
value = Anim+1

[state 20000]
type = AngleSet
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
trigger1 = root,numexplod(50000) && var(30)=170
value = 0

[state 20000]
type = varset
trigger1 = var(30)<16
fvar(10) = 0

[state 20000]
type = varadd
trigger1 = var(30)=16
fvar(10) = -1.0*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[17,34])
fvar(10) = -.4*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[35,37])
fvar(10) = -.25*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[38,39])
fvar(10) = -.1*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[40,41])
fvar(10) = .1*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && var(30)=42
fvar(10) = .1*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[43,44])
fvar(10) = .25*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[45,47])
fvar(10) = .5*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[48,58])
fvar(10) = .6*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[59,74])
fvar(10) = .5*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[75,79])
fvar(10) = .35*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[80,85])
fvar(10) = .25*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[86,87])
fvar(10) = .1*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[92,94])
fvar(10) = -.1*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[95,97])
fvar(10) = -.25*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[98,100])
fvar(10) = -.5*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[101,110])
fvar(10) = -.6*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[111,113])
fvar(10) = -.5*1.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[114,115])
fvar(10) = -.25*1.5

[state 20000]
type = varset
trigger1 = root,numexplod(50000) && var(30)>=116
fvar(10) = 0

[state 20000]
type = AngleDraw
trigger1 = 1
value = fvar(10)

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 22525

[state 190]
type = BindToParent
trigger1 = 1
pos = ceil(154*const(size.xscale))-90*sin(parent,fvar(10)*0.5*Pi/180),-ceil(62*const(size.xscale))-160*sin(parent,fvar(10)*0.5*Pi/180)
time=1
facing=1

[state 190]
type = ChangeState
trigger1 = parent,stateno!=22060
value = 22025

;滅騎（大砲）
[statedef 22035]
type = S
movetype=I
physics =N
sprpriority = -3
velset = 0,0
anim = 41500

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 41500]
type = ChangeAnim
trigger1 = selfanimexist(parent,anim+1000) && root,numexplod(50000)
trigger1 = anim!=(parent,anim+1000)
value = parent,anim+1000

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 22535

[state 190]
type = null;ChangeAnim
trigger1 = (parent,anim-1000)%1000!=anim%1000
trigger1 = selfanimexist(41500+(parent,anim-1000)%1000)
value = 41500+(parent,anim-1000)%1000

[state 190]
type = ChangeState
trigger1 = parent,stateno=22040
value = 22036

[state 190]
type = ChangeState
trigger1 = parent,stateno=22050
value = 22037

[state 190]
type = ChangeState
trigger1 = parent,stateno=22060
value = 22038

[state 190]
type = ChangeState
trigger1 = parent,stateno=22070
value = 22039

[state 190]
type = BindToParent
trigger1 = 1
pos = ceil(210*const(size.xscale)),-ceil(160*const(size.yscale))
time=1
facing=1

[state 190]
type = DestroySelf
trigger1 = numhelper(20000)
trigger1 = helper(20000),stateno=29000

;滅騎（大砲・地団駄）
[statedef 22036]
type = S
movetype=I
physics =N
sprpriority = -3
velset = 0,0
anim = 41500

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 30000]
type = VarAdd
trigger1 = !time
var(30) = 30

[state 20000]
type = varset
trigger1 = var(30)<17
fvar(10) = 0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[17,47])
fvar(10) = -.5

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[48,74])
fvar(10) = 1.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[75,92])
trigger2 = root,numexplod(50000) && (var(30)=[115,132])
trigger3 = root,numexplod(50000) && (var(30)=[155,172])
fvar(10) = -2.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[96,113])
trigger2 = root,numexplod(50000) && (var(30)=[136,153])
fvar(10) = 2.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[173,199])
fvar(10) = .5

[state 20000]
type = varset
trigger1 = root,numexplod(50000) && var(30)>=200
fvar(10) = 0

[state 20000]
type = AngleDraw
trigger1 = 1
value = fvar(10)

[state 41500]
type = ChangeAnim
trigger1 = selfanimexist(parent,anim+1000) && root,numexplod(50000)
trigger1 = anim!=(parent,anim+1000)
value = parent,anim+1000

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 22535

[state 190]
type = null;ChangeAnim
trigger1 = (parent,anim-1000)%1000!=anim%1000
trigger1 = selfanimexist(41500+(parent,anim-1000)%1000)
value = 41500+(parent,anim-1000)%1000

[state 190]
type = ChangeState
trigger1 = parent,stateno!=22040
value = 22035

[state 190]
type = BindToParent
trigger1 = 1
pos = ceil(210*const(size.xscale))-100*sin(parent,fvar(10)*0.5*Pi/180),-ceil(160*const(size.yscale))-200*sin(parent,fvar(10)*0.5*Pi/180)
time=1
facing=1

[state 190]
type = DestroySelf
trigger1 = numhelper(20000)
trigger1 = helper(20000),stateno=29000

;滅騎（大砲・砲弾発射）
[statedef 22037]
type = S
movetype=U
physics =N
sprpriority = -3
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20000]
type = ChangeAnim
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
value = 41500+5*50

;時間判別
[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 30000]
type = VarAdd
trigger1 = !time
var(30) = 11

[state 41500]
type = ChangeAnim
trigger1 = selfanimexist(parent,anim+1000) && root,numexplod(50000)
trigger1 = anim!=(parent,anim+1000)
value = parent,anim+1000

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 22535

[state 190]
type = BindToParent
trigger1 = 1
pos = ceil(210*const(size.xscale)),-ceil(160*const(size.yscale))
time=1
facing=1

[state 20000]
type = VarSet
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
trigger1 = var(30)>=80
value = 0

[state 20000]
type = VarAdd
triggerall = root,numexplod(50000)
trigger1 = (var(30)=[43,55])
fvar(10) = -3.461538

[state 20000]
type = VarAdd
triggerall = root,numexplod(50000)
trigger1 = (var(30)=[68,79])
fvar(10) = 3.461538

[state 20000]
type = VarSet
triggerall = root,numexplod(50000)
trigger1 = (var(30)=[56,67])
fvar(10) = -45

[state 20000]
type = AngleSet
triggerall = root,numexplod(50000)
trigger1 = (var(30)=[43,80])
value = fvar(10)

[state 20000]
type = AngleDraw
trigger1 = (var(30)=[43,80])

[state 190]
type = ChangeState
trigger1 = parent,stateno!=22050
value = 22035

;滅騎（大砲・火炎放射）
[statedef 22038]
type = S
movetype=U
physics =N
sprpriority = -3
velset = 0,0
anim = 41800

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 30000]
type = VarAdd
trigger1 = !time
var(30) = 11

[state 20000]
type = AngleSet
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
trigger1 = root,numexplod(50000) && var(30)=170
value = 0

[state 20000]
type = varset
trigger1 = var(30)<16
fvar(10) = 0

[state 20000]
type = varset
trigger1 = var(30)=16
fvar(10) = -1.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[17,20])
fvar(10) = -1.0*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[21,31])
fvar(10) = -1.75*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[32,34])
fvar(10) = -1.0*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[35,37])
fvar(10) = -.5*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[38,39])
fvar(10) = -.25*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[40,41])
fvar(10) = .25*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[42,44])
fvar(10) = .5*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[45,47])
fvar(10) = 1.0*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[48,58])
fvar(10) = 1.5*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[59,79])
fvar(10) = 1.0*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[80,83])
fvar(10) = .5*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[84,85])
fvar(10) = .25*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[86,87])
fvar(10) = .1*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[90,94])
fvar(10) = -.15*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[95,97])
fvar(10) = -.25*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[98,100])
fvar(10) = -.5*3.0

[state 20000]
type = varadd
trigger1 = root,numexplod(50000) && (var(30)=[101,115])
fvar(10) = -.75*3.0

[state 20000]
type = varset
trigger1 = root,numexplod(50000) && var(30)>=116
fvar(10) = 0

[state 20000]
type = AngleDraw
trigger1 = 1
value = fvar(10)

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 22535

[state 190]
type = BindToParent
trigger1 = 1
pos = ceil(210*const(size.xscale)),-ceil(160*const(size.yscale))
time=1
facing=1

[state 20000]
type = BindToParent
trigger1 = root,numexplod(50000) && (var(30)=[16,169])
pos = ceil(210*const(size.xscale))-100*sin(parent,fvar(10)*0.5*Pi/180),-ceil(160*const(size.yscale))-200*sin(parent,fvar(10)*0.5*Pi/180)
time=1
facing=1
0
[state 190]
type = ChangeState
trigger1 = parent,stateno!=22060
value = 22035

;滅騎（大砲・援軍アシスト）
[statedef 22039]
type = S
movetype=U
physics =N
sprpriority = -3
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20000]
type = ChangeAnim
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
value = 41500+7*50

;時間判別
[state 30000]
type = VarAdd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 41500]
type = ChangeAnim
trigger1 = selfanimexist(parent,anim+1000) && root,numexplod(50000)
trigger1 = anim!=(parent,anim+1000)
value = parent,anim+1000

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = ChangeState
trigger1 = root,var(12)=2001||root,fvar(23)>=90000
value = 22535

[state 190]
type = BindToParent
trigger1 = 1
pos = ceil(210*const(size.xscale)),-ceil(160*const(size.yscale))
time=1
facing=1

[state 20000]
type = VarSet
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
trigger1 = var(30)>=80
value = 0

[state 20000]
type = VarAdd
triggerall = root,numexplod(50000)
trigger1 = (var(30)=[60+0,62+0])
trigger2 = (var(30)=[70+0,72+0])&&floor(root,var(43)/1000)>=50
trigger3 = (var(30)=[80+0,82+0])&&(floor(root,var(43)/1000)<50||floor(root,var(43)/1000)>=100)
trigger4 = (var(30)=[90+0,92+0])&&floor(root,var(43)/1000)>=50
trigger5 = (var(30)=[100+0,102+0])
trigger6 = (var(30)=[110+0,112+0])&&floor(root,var(43)/1000)>=100
trigger7 = (var(30)=[120+0,122+0])&&floor(root,var(43)/1000)>=50
trigger8 = (var(30)=[130+0,132+0])&&floor(root,var(43)/1000)>=50
trigger9 = (var(30)=[140+0,142+0])&&floor(root,var(43)/1000)>=100
trigger10 = (var(30)=[150+0,152+0])&&floor(root,var(43)/1000)>=100
fvar(10) = 10

[state 20000]
type = VarAdd
triggerall = root,numexplod(50000)
trigger1 = (var(30)=[63+0,68+0])
trigger2 = (var(30)=[73+0,78+0])&&floor(root,var(43)/1000)>=50
trigger3 = (var(30)=[83+0,88+0])&&(floor(root,var(43)/1000)<50||floor(root,var(43)/1000)>=100)
trigger4 = (var(30)=[93+0,98+0])&&floor(root,var(43)/1000)>=50
trigger5 = (var(30)=[103+0,108+0])
trigger6 = (var(30)=[113+0,118+0])&&floor(root,var(43)/1000)>=100
trigger7 = (var(30)=[123+0,128+0])&&floor(root,var(43)/1000)>=50
trigger8 = (var(30)=[133+0,138+0])&&floor(root,var(43)/1000)>=50
trigger9 = (var(30)=[143+0,148+0])&&floor(root,var(43)/1000)>=100
trigger10 = (var(30)=[153+0,158+0])&&floor(root,var(43)/1000)>=100
fvar(10) = -5

[state 20000]
type = VarSet
trigger1 = (var(30)=[56,59])
fvar(10) = 0

[state 20000]
type = AngleSet
triggerall = root,numexplod(50000)
trigger1 = (var(30)=[43,154])
value = fvar(10)

[state 20000]
type = AngleDraw
trigger1 = (var(30)=[43,154])

[state 190]
type = ChangeState
trigger1 = parent,stateno!=22070
value = 22035

;滅騎（本体・破壊）
[statedef 22500]
type = A
movetype=I
physics =N
anim = 40450+500*1
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20000]
type = PalFX
trigger1 = !time&&root,fvar(23)>=90000
add = -16,-32,-64
time = -1

[state 21000]
type = null;PosSet
trigger1 = !time
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))

[state 12000]
type = ParentVarSet
trigger1 = !time&&root,fvar(23)>=90000
var(40) = -1

[state 12000]
type = ParentVarSet
trigger1 = ScreenPos Y>=260
var(40) = 10+var(40)

[state 20515]
type = null;PosAdd
trigger1 = !time
x = 0
y = -floor(230*const(size.yscale))

[state 12000]
type = PlaySND
trigger1 = !time
value = 30,7
volume = 255

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 190]
type = Helper
trigger1 = !time && !numhelper(26200)
id  = 26200
stateno=26200
name = "explosion1"
pos = floor(0*const(size.xscale)),floor(0*const(size.yscale))
postype = P1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause=1

[state 190]
type = Helper
trigger1 = !time && !numhelper(26201)
id  = 26201
stateno=26201
name = "explosion2"
pos = floor(0*const(size.xscale)),floor(0*const(size.yscale))
postype = P1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause=1

;足1-1
[state -2]
type = Helper
trigger1 = !time && !numhelper(22550)
id = 22550
stateno=22550
name = "Foot1-1"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足1-2
[state -2]
type = Helper
trigger1 = !time && !numhelper(22551)
id = 22551
stateno=22551
name = "Foot1-2"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足1-3
[state -2]
type = Helper
trigger1 = !time && !numhelper(22552)
id = 22552
stateno=22552
name = "Foot1-3"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足2-1
[state -2]
type = Helper
trigger1 = !time && !numhelper(22553)
id = 22553
stateno=22553
name = "Foot2-1"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足2-2
[state -2]
type = Helper
trigger1 = !time && !numhelper(22554)
id = 22554
stateno=22554
name = "Foot2-2"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足2-3
[state -2]
type = Helper
trigger1 = !time && !numhelper(22555)
id = 22555
stateno=22555
name = "Foot2-3"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足3-1
[state -2]
type = Helper
trigger1 = !time && !numhelper(22556)
id = 22556
stateno=22556
name = "Foot3-1"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足3-2
[state -2]
type = Helper
trigger1 = !time && !numhelper(22557)
id = 22557
stateno=22557
name = "Foot3-2"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足3-3
[state -2]
type = Helper
trigger1 = !time && !numhelper(22558)
id = 22558
stateno=22558
name = "Foot3-3"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足4-1
[state -2]
type = Helper
trigger1 = !time && !numhelper(22559)
id = 22559
stateno=22559
name = "Foot4-1"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足4-2
[state -2]
type = Helper
trigger1 = !time && !numhelper(22560)
id = 22560
stateno=22560
name = "Foot4-2"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足4-3
[state -2]
type = Helper
trigger1 = !time && !numhelper(22561)
id = 22561
stateno=22561
name = "Foot4-3"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA
persistent=0

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = var(2)>0
var(2) = var(2)
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = var(3)>0
var(3) = var(3)
ignorehitpause=1

[state 12000]
type = VarSet
trigger1 = var(2)>0
var(2) = 0
ignorehitpause=1

[state 12000]
type = VarSet
trigger1 = var(3)>0
var(3) = 0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = ChangeState
trigger1 = ScreenPos Y >=260
value = 29000

;滅騎（龍頭・破壊）
[statedef 22525]
type = A
movetype=I
physics =N
anim = 40450+500*2
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 21000]
type = PosSet
trigger1 = !time
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(220*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 20000]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;滅騎（大砲・破壊）
[statedef 22535]
type = A
movetype=I
physics =N
anim = 40450+500*3
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 21000]
type = PosSet
trigger1 = !time
y = -floor(240*const(size.yscale))-floor(24*const(size.yscale))

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(220*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 20000]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;滅騎（屋根・破壊）
[statedef 22530]
type = A
movetype=I
physics =N
anim = 40450
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = 0,-floor(150*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 20000]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;滅騎（足1-1・破壊）
[statedef 22550]
type = A
movetype=I
physics =N
anim = 40450+500*4
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = -floor(100*const(size.xscale)),floor(185*const(size.yscale))
time=2
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 20000]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;滅騎（足1-2・破壊）
[statedef 22551]
type = A
movetype=I
physics =N
anim = 40450+500*5
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = -floor(95*const(size.xscale)),floor(185*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 20000]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;滅騎（足1-3・破壊）
[statedef 22552]
type = A
movetype=I
physics =N
anim = 40450+500*6
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = -floor(95*const(size.xscale)),-floor(30*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 20000]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;滅騎（足2-1・破壊）
[statedef 22553]
type = A
movetype=I
physics =N
anim = 40450+500*7
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;滅騎（足2-2・破壊）
[statedef 22554]
type = A
movetype=I
physics =N
anim = 40450+500*8
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = floor(90*const(size.xscale)),floor(185*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(220*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;滅騎（足2-3・破壊）
[statedef 22555]
type = A
movetype=I
physics =N
anim = 40450+500*9
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = floor(90*const(size.xscale)),-floor(30*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(220*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;滅騎（足3-1・破壊）
[statedef 22556]
type = A
movetype=I
physics =N
anim = 40450+500*10
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = -floor(75*const(size.xscale)),floor(150*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(220*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;滅騎（足3-2・破壊）
[statedef 22557]
type = A
movetype=I
physics =N
anim = 40450+500*11
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = -floor(75*const(size.xscale)),floor(152*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(220*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;滅騎（足3-3・破壊）
[statedef 22558]
type = A
movetype=I
physics =N
anim = 40450+500*12
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = -floor(75*const(size.xscale)),-floor(30*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = PosAdd
trigger1 = !time
x = floor(120*const(size.xscale))
y = -floor(220*const(size.yscale))

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;滅騎（足4-1・破壊）
[statedef 22559]
type = A
movetype=I
physics =N
anim = 40450+500*13
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260


;滅騎（足4-2・破壊）
[statedef 22560]
type = A
movetype=I
physics =N
anim = 40450+500*14
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;滅騎（足4-3・破壊）
[statedef 22561]
type = A
movetype=I
physics =N
anim = 40450+500*15
sprpriority = -3
velset = (-3-random%4)*ifelse(random%8<4,1,-1)*const(size.xscale),(-9-random%6)*const(size.yscale)

[state 190]
type = BindToParent
trigger1 = !time
pos = floor(70*const(size.xscale)),floor(150*const(size.yscale))
time=1
facing=1

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 20515]
type = Statetypeset
trigger1 = !time&&root,fvar(23)>=90000
movetype=A

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;時間判別
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

;Attack Lv.2
[state 200]
type = Hitdef
trigger1 = var(30)%10=0 && root,numexplod(50000)
damage = floor(ifelse(10*root,fvar(0)<1,1+(root,var(2)%5=4),10*root,fvar(0))*1.22)
ground.slidetime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
ground.hittime = 12+(P2statetype=C)+(root,var(49)&&!root,var(2))*5
guard.hittime = 10
pausetime = 1,13
ground.velocity = -10.5*(1.0+ifelse(root,var(2)>31,31,root,var(2))*.04)*const(size.xscale)
guard.velocity = -10.5*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = -6*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale),(-12.0*(51-root,var(3))*1.0/51)*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),36+11,24-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+11)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(16*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(16*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(16*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(16*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = Hard
ground.type = High
attr = ,NA
hitflag = MAFD
guardflag = MA

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(10*root,fvar(14)<1,1+(root,var(2)%5=1),10*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 0
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-120*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = AngleAdd
trigger1 = time && root,numexplod(50000)
value = 2.5

[state 190]
type = AngleDraw
trigger1 = 1

[state 190]
type = VelAdd
trigger1 = time && root,numexplod(50000)
y = .15

[state 190]
type = DestroySelf
trigger1 = ScreenPos Y >=260

;援軍アシスト（滅騎）
[statedef 22070]
type = S
movetype=A
physics =S
anim = 40850
sprpriority = 2
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;時間判別(暗転中以外)
[state 20000]
type = varadd
trigger1 = root,numexplod(50000)
var(30) = 1

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 12000]
type = ParentVarSet
trigger1 = var(30)=118&&floor(root,var(43)/1000)<50
trigger2 = var(30)=148&&floor(root,var(43)/1000)<100
trigger3 = var(30)=168&&floor(root,var(43)/1000)>=100
var(40) = 10+var(40)

[state 30000]
type = ChangeAnim
triggerall = SelfAnimExist(Anim+1)&&root,numexplod(50000)
trigger1 = var(30)=32
trigger2 = var(30)=33
trigger3 = var(30)=34
trigger4 = var(30)=35
trigger5 = var(30)=36
trigger6 = var(30)=37
trigger7 = var(30)=38
trigger8 = var(30)=39
trigger9 = var(30)=40
trigger10 = var(30)=41
trigger11 = var(30)=42
trigger12 = var(30)=43
trigger13 = var(30)=44
trigger14 = var(30)=46
trigger15 = var(30)=48
trigger16 = var(30)=50
trigger17 = var(30)=52
trigger18 = var(30)=54
trigger19 = var(30)=56
trigger20 = var(30)=58
trigger21 = var(30)=60
trigger22 = var(30)=62
trigger23 = var(30)=64
trigger24 = var(30)=66
trigger25 = var(30)=68
trigger26 = var(30)=70
trigger27 = var(30)=72
trigger28 = var(30)=74
trigger29 = var(30)=(152-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger30 = var(30)=(153-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger31 = var(30)=(154-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger32 = var(30)=(155-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger33 = var(30)=(156-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger34 = var(30)=(157-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger35 = var(30)=(158-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger36 = var(30)=(159-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger37 = var(30)=(160-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger38 = var(30)=(161-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger39 = var(30)=(162-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger40 = var(30)=(163-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger41 = var(30)=(164-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger42 = var(30)=(165-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger43 = var(30)=(166-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger44 = var(30)=(167-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
value = Anim+1

[state 31000]
type = RemoveExplod
trigger1 = var(30)=32
trigger2 = var(30)=33
trigger3 = var(30)=34
trigger4 = var(30)=35
trigger5 = var(30)=36
trigger6 = var(30)=37
trigger7 = var(30)=38
trigger8 = var(30)=39
trigger9 = var(30)=40
trigger10 = var(30)=41
trigger11 = var(30)=42
trigger12 = var(30)=43
trigger13 = var(30)=44
trigger14 = var(30)=46
trigger15 = var(30)=48
trigger16 = var(30)=50
trigger17 = var(30)=52
trigger18 = var(30)=54
trigger19 = var(30)=56
trigger20 = var(30)=58
trigger21 = var(30)=60
trigger22 = var(30)=62
trigger23 = var(30)=64
trigger24 = var(30)=66
trigger25 = var(30)=68
trigger26 = var(30)=70
trigger27 = var(30)=72
trigger28 = var(30)=74
trigger29 = var(30)=(152-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger30 = var(30)=(153-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger31 = var(30)=(154-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger32 = var(30)=(155-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger33 = var(30)=(156-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger34 = var(30)=(157-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger35 = var(30)=(158-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger36 = var(30)=(159-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger37 = var(30)=(160-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger38 = var(30)=(161-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger39 = var(30)=(162-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger40 = var(30)=(163-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger41 = var(30)=(164-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger42 = var(30)=(165-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger43 = var(30)=(166-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)
trigger44 = var(30)=(167-(floor(root,var(43)/1000)<50)*30-(floor(root,var(43)/1000)<100)*20)

;屋根
[State 40, 1]
type = Explod
trigger1 = !NumExplod(40000) && root,var(12)!=2001
id = 40000
anim = Anim-500
pos = 0,-floor(160*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 999999
supermovetime = 9999999

;龍頭
[state -2]
type = Helper
trigger1 = !numhelper(22040) && root,var(12)!=2001
id = 22040
stateno=22025
name = "Dragon_Head"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;大砲
[state -2]
type = Helper
trigger1 = !numhelper(22050) && root,var(12)!=2001
id = 22050
stateno=22035
name = "Cannon"
pos = 0,-floor(24*const(size.yscale))
postype = P1
pausemovetime=999999
supermovetime=999999

;足1-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42000) && root,var(12)!=2001
id = 42000
anim = Anim+1500
pos = floor(120*const(size.xscale)),floor(270*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(42500) && root,var(12)!=2001
id = 42500
anim = Anim+2000
pos = floor(116*const(size.xscale)),floor(226*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足1-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43000) && root,var(12)!=2001
id = 43000
anim = Anim+2500
pos = floor(120*const(size.xscale)),-floor(58*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(43500) && root,var(12)!=2001
id = 43500
anim = Anim+3000
pos = -floor(130*const(size.xscale)),floor(268*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44000) && root,var(12)!=2001
id = 44000
anim = Anim+3500
pos = -floor(135*const(size.xscale)),floor(224*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足2-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(44500) && root,var(12)!=2001
id = 44500
anim = Anim+4000
pos = -floor(126*const(size.xscale)),-floor(62*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -3
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46000) && root,var(12)!=2001
id = 46000
anim = Anim+5500
pos = floor(110*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45500) && root,var(12)!=2001
id = 45500
anim = Anim+5000
pos = floor(98*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足3-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(45000) && root,var(12)!=2001
id = 45000
anim = Anim+4500
pos = floor(98*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-3
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47500
anim = Anim+7000
pos = -floor(130*const(size.xscale)),-floor(64*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-2
[State 40, 1]
type = Explod
trigger1 = !NumExplod(47000) && root,var(12)!=2001
id = 47000
anim = Anim+6500
pos = -floor(118*const(size.xscale)),floor(180*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

;足4-1
[State 40, 1]
type = Explod
trigger1 = !NumExplod(46500) && root,var(12)!=2001
id = 46500
anim = Anim+6000
pos = -floor(118*const(size.xscale)),floor(230*const(size.yscale))
postype = p1
ownpal = 0
sprpriority = -4
removetime=-1
bindtime=-1
scale = const(size.xscale),const(size.yscale)
pausemovetime = 9999999
supermovetime = 9999999

[state 10000]
type = SprPriority
trigger1 = 1
value = -4
ignorehitpause=1

[state 12000]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[state 200]
type = helper
trigger1 = !var(30)&&!time
id = 7570
stateno = 7570
pos = 0,floor(-180*const(size.yscale))
postype = P1
pausemovetime=30
supermovetime=30
ownpal = 1

[state 13000]
type = SuperPause
trigger1 = !var(30)&&!time
time = 30
movetime = 30
p2defmul = 1
sound = -1
anim = -1
darken = 0
poweradd = 0

[state 13000]
type = PowerAdd
trigger1 = !var(30)&&!time
value  = -1000

[state 13000]
type = VarAdd
trigger1 = !var(30)&&!time
var(42) = -200

[state 13000]
type = VarSet
trigger1 = !var(30)&&!time
var(40) = -1

;EN FIST HIT
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26750)
trigger1 = helper(26750),movehit=1&&helper(26750),numtarget&&helper(26750),var(11)=2
var(11) = 2
ignorehitpause=1
persistent=0

;EN BASARA
[state 12000]
type = VarSet
trigger1 = var(12)=1
var(12) = 0
ignorehitpause=1
persistent=0

;EN BASARA
[state 12000]
type = VarSet
trigger1 = numhelper(26750)
trigger1 = helper(26750),movehit=1&&helper(26750),numtarget
var(12) = 1
ignorehitpause=1
persistent=0

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26750)
trigger1 = var(2)!=var(4);helper(26750),var(2)
var(2) = var(2)
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26750)
trigger1 = var(3)!=var(5);&&helper(26750),numtarget&&(root,var(3)||P2statetype=A)
var(3) = var(3)
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = numhelper(26750)
trigger1 = helper(26750),var(2)
fvar(15) = .00005*floor(ifelse(35*root,fvar(14)<1,1+(root,var(2)%5=1),35*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvaradd
trigger1 = numhelper(26750)
trigger1 = helper(26750),var(2)&&helper(26750),stateno=26751
fvar(15) = .00005*floor(ifelse(30*root,fvar(14)<1,1+(root,var(2)%5=1),30*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = numhelper(26750)
trigger1 = helper(26750),var(2)
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

[state 12000]
type = varset
trigger1 = 1
var(4) = var(2)

[state 12000]
type = varset
trigger1 = var(3)!=var(5)
var(3) = 0

[state 12000]
type = varset
trigger1 = 1
var(5) = var(3)

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
add = 255-time*64,255-time*64,255-time*64
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=10001
var(12) = ifelse((-var(12)+10000)>=(root,var(12)-1),-root,var(12)+10001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StateTypeSet
trigger1 = !time
movetype=A

[state -2]
type = PlaySnd
trigger1 = var(30)=60
trigger2 = var(30)=70&&floor(root,var(43)/1000)>=50
trigger3 = var(30)=80&&(floor(root,var(43)/1000)<50||floor(root,var(43)/1000)>=100)
trigger4 = var(30)=90&&floor(root,var(43)/1000)>=50
trigger5 = var(30)=100
trigger6 = var(30)=110&&floor(root,var(43)/1000)>=100
trigger7 = var(30)=120&&floor(root,var(43)/1000)>=50
trigger8 = var(30)=130&&floor(root,var(43)/1000)>=50
trigger9 = var(30)=140&&floor(root,var(43)/1000)>=100
trigger10 = var(30)=150&&floor(root,var(43)/1000)>=100
value = 30,7
channel = 4

;砲弾
[state -2]
type = Helper
trigger1 = var(30)=60
trigger2 = var(30)=70&&floor(root,var(43)/1000)>=50
trigger3 = var(30)=80&&(floor(root,var(43)/1000)<50||floor(root,var(43)/1000)>=100)
trigger4 = var(30)=90&&floor(root,var(43)/1000)>=50
trigger5 = var(30)=100
trigger6 = var(30)=110&&floor(root,var(43)/1000)>=100
trigger7 = var(30)=120&&floor(root,var(43)/1000)>=50
trigger8 = var(30)=130&&floor(root,var(43)/1000)>=50
trigger9 = var(30)=140&&floor(root,var(43)/1000)>=100
trigger10 = var(30)=150&&floor(root,var(43)/1000)>=100
id = 26750
stateno=26750
name = "Bullet"
pos = ceil(360*const(size.xscale)),-ceil(90*const(size.yscale))
postype = P1
ownpal = 1
sprpriority = 4
pausemovetime=999999
supermovetime=999999

;爆発エフェクト
[state 26200]
type = Helper
trigger1 = var(30)=60
trigger2 = var(30)=70&&floor(root,var(43)/1000)>=50
trigger3 = var(30)=80&&(floor(root,var(43)/1000)<50||floor(root,var(43)/1000)>=100)
trigger4 = var(30)=90&&floor(root,var(43)/1000)>=50
trigger5 = var(30)=100
trigger6 = var(30)=110&&floor(root,var(43)/1000)>=100
trigger7 = var(30)=120&&floor(root,var(43)/1000)>=50
trigger8 = var(30)=130&&floor(root,var(43)/1000)>=50
trigger9 = var(30)=140&&floor(root,var(43)/1000)>=100
trigger10 = var(30)=150&&floor(root,var(43)/1000)>=100
id = 26209
stateno=26209
name = "exp"
pos = ceil(360*const(size.xscale)),-ceil(90*const(size.yscale))
postype = P1
ownpal = 1
pausemovetime=999999
supermovetime=999999

[state 190]
type = ChangeState
trigger1 = var(30)=118&&floor(root,var(43)/1000)<50
trigger2 = var(30)=148&&floor(root,var(43)/1000)<100
trigger3 = var(30)=168&&floor(root,var(43)/1000)>=100
value = 22000

[state 190]
type = ChangeState
trigger1 = root,var(12)=1||root,fvar(23)>=90000
value = 22500

;滅騎(砲弾・援軍アシスト)
[statedef 26750]
type = A
movetype = A
physics =N
sprpriority = 2
velset = 0,0
anim = 26730

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 26000]
type = AngleDraw
trigger1 = 1
scale = .8,.8

[state 20000]
type = VelSet
trigger1 = time=1
x = (8+random%6*.75)*const(size.xscale)
y = -4.0*const(size.yscale)

[state 20000]
type = VelAdd
trigger1 = time>1 && root,numexplod(50000)
y = .4*const(size.yscale)

[state 20000]
type = VelMul
trigger1 = time>1 && root,numexplod(50000)
x = 1.02

[state 20000]
type = PosFreeze
trigger1 = !root,numexplod(50000)
value = 1

;Attack Lv.4
[state 200]
type = Hitdef
triggerall = !movecontact && !movereversed && root,numexplod(50000)
trigger1 = 1
damage = floor(35*ifelse(root,fvar(1)<.25,.25,root,fvar(1))*root,fvar(2)*root,fvar(3)*root,fvar(4)*1.22),floor((35*root,fvar(3)*root,fvar(4)/4)*1.22)
ground.slidetime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
ground.hittime = 17+(P2statetype=C)+(root,var(49)&&!root,var(2))*7
guard.slidetime = 15
guard.hittime = 15
pausetime = 1,15
ground.velocity =ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0015,-6.0*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
guard.velocity = -13.5*parent,var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = parent,var(35)*ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0013,-6.0*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-12.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*parent,var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),37+13,20-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+13)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,2)
guardsound = s7000,2
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = up
ground.type = High
air.type = Low
attr = A,HP
hitflag = MAFD
guardflag = MA

[state -1]
type = AttackDist
trigger1 = movecontact
value = 0

;en first hit
[state -2]
type = parentVarset
triggerall = root,var(44)%2048<1024 && numexplod(8798)
trigger1 = movehit=1
var(11) = 2
ignorehitpause=1

[state -1]
type = targetstate
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
value = 926+10*(root,var(1)%8>=4)
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(35*root,fvar(14)<1,1+(root,var(2)%5=1),35*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%6
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = floor(P2dist X)+ifelse((P2dist X=[1,60]),10,-10)+floor(-60*const(size.yscale))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(0*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

;BASARA Moves Finish
[state 3510]
type = Helper
trigger1 = !numhelper(8800)
trigger1 = (movehit=[1,2]) && !enemynear,alive && roundstate=3
id  = 8800
stateno=8800
pos = 0,0
postype = left
scale = const(size.xscale),const(size.yscale)
persistent=0
ignorehitpause=1

[state 190]
type = ChangeState
trigger1 = movecontact>=2||movereversed||(Pos Y>=0)
value = 26751

;滅騎(砲弾破裂・援軍アシスト)
[statedef 26751]
type = A
movetype = A
physics = N
sprpriority = 2
velset = 0,0
anim = 26731

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 26200]
type = PosSet
trigger1 = !time && Pos Y>0
y = 0

[state 20000]
type = PlaySnd
trigger1 = !time
value = 30,7

;爆発エフェクト
[state 26200]
type = Helper
trigger1 = !time
id = 26209
stateno=26209
name = "exp"
pos = 0,0
postype = P1
ownpal = 1
pausemovetime=999999
supermovetime=999999

;Attack Lv.3
[state 200]
type = Hitdef
triggerall = Anim!=90000 && !movecontact && !movereversed && root,numexplod(50000)
trigger1 = 1
damage = floor(30*ifelse(root,fvar(1)<.25,.25,root,fvar(1))*root,fvar(2)*root,fvar(3)*root,fvar(4)*1.22),floor(ceil(30*root,fvar(3)*root,fvar(4)*1.0/4)*1.22)
ground.slidetime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
ground.hittime = 14+(P2statetype=C)+(root,var(49)&&!root,var(2))*6
guard.slidetime = 12
guard.hittime = 12
pausetime = 1,14
ground.velocity =ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0014,-4.0*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-11.0*(51-root,var(3))/51-.9)*const(size.yscale))
guard.velocity = -12.0*parent,var(35)*const(size.xscale)
ground.cornerpush.veloff = 0
air.velocity = ifelse(root,var(1)%8>=4||root,var(1)%2>=1,-10.0-.0014,-4.0*parent,var(35)*(1.0+ifelse(root,var(3)>31,31,root,var(3))*.06)*const(size.xscale)),ifelse(root,var(6)%10>0,2,(-11.0*(51-root,var(3))/51-.9)*const(size.yscale))
airguard.velocity = -6*parent,var(35)*const(size.xscale),-2*const(size.yscale)
air.cornerpush.veloff = 0
yaccel = .9*const(size.yscale)
fall.recover = ifelse(root,var(6)%10>0||root,var(28)>0,0,1)
fall.recovertime = ifelse(root,var(49)&&!root,var(2),40+12,32-ifelse(floor(root,var(14)/85)>6,6,floor(root,var(14)/85))+12)
hitsound = s7100,ifelse(!(enemynear,teammode=simul)&&enemynear,name="Honda Tadakatsu",999,1)
guardsound = s7000,1
getpower = floor(ifelse(root,var(9),0,floor(26*root,fvar(1)*root,fvar(3))*1.38*root,fvar(16))),floor(ifelse(root,var(9),0,ceil(26*root,fvar(3)*1.0/8)*1.38*root,fvar(16)))
givepower = floor(26*root,fvar(1)*root,fvar(3)*.8)*1.38,floor(26*root,fvar(3)*.8*1.0/8)*1.38
air.fall = 1
sparkno = -1;0
guard.sparkno = -1;40
sparkxy = ifelse(P2bodydist X<20,-20,-10),floor(-60*const(size.xscale))
animtype = up
ground.type = High
air.type = Low
attr = ,HA
hitflag = MAFD
guardflag = MA

[state -1]
type = AttackDist
trigger1 = movecontact
value = 0

;en first hit
[state -2]
type = parentVarset
triggerall = root,var(44)%2048<1024 && numexplod(8798)
trigger1 = movehit=1
var(11) = 2
ignorehitpause=1

[state -1]
type = parentvaradd
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
var(1) = -1*(root,var(1)%2>=1)-4*(root,var(1)%8>=4)
ignorehitpause=1

[state -1]
type = targetstate
trigger1 = (root,var(1)%2>=1||root,var(1)%8>=4)&&numtarget
trigger1 = movehit=1 && target,time=0
value = 926+10*(root,var(1)%8>=4)
ignorehitpause=1

;援軍ヒット判別
[state 12000]
type = ParentVarSet
trigger1 = movecontact=1
var(15) = ifelse((root,stateno=[1000,1999]),36,28)*ifelse(moveguarded||!numtarget,-1,1)
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = movehit=1&&numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = movehit=1
fvar(15) = .00005*floor(ifelse(30*root,fvar(14)<1,1+(root,var(2)%5=1),30*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

;◇◇ヒットスパーク◇◇
[state 240]
type = VarSet
trigger1 = 1
var(16) = 10+random%4
persistent=0

;X座標
[state 240]
type = VarSet
trigger1 = 1
var(17) = ifelse(abs(P2dist X)>(100*const(size.xscale)),floor(100*const(size.xscale))*(1-((P2dist X)<0)*2),floor(P2dist X))

;Y座標
[state 240]
type = VarSet
trigger1 = 1
var(18) = 0;floor(-180*const(size.yscale))

;ヒットスパーク
[state 1000]
type = Helper
trigger1 = movecontact=1
id = 7000
stateno=7000+(movehit)*100
pos = var(17),var(18)
postype = p1
ignorehitpause=1
ownpal = 1
pausemovetime=99999
supermovetime=99999
size.xscale = .5
size.yscale = .5

;ガードクラッシュ減少値/気絶値増加値判別
[State 100, Helper]
type = Helper
triggerall = !enemynear,numpartner && !numhelper(15904)&&IsHelper
trigger1 = time=1
id = 15904
stateno=15904
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 190]
type = ChangeAnim
trigger1 = !AnimTime && Anim!=90000
value = 90000

[state 190]
type = StateTypeSet
trigger1 = Anim=90000
movetype = I

[state 190]
type = DestroySelf
trigger1 = Anim=90000 &&(!numtarget||root,numtarget)

;援軍カウンター（滅騎）
[statedef 22080]
type=S
movetype=U
physics = N
velset = 0,0

[state 20000]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 21000]
type = PosSet
trigger1 = 1
y = -floor(270*const(size.yscale))-floor(18*const(size.yscale))

;時間判別
[state 20000]
type = varadd
trigger1 = 1
var(30) = 1

[state 20000]
type = varset
trigger1 = !time&&((prevstateno=[20000,22090])||prevstateno=29000||roundstate<ifelse((prevstateno!=[20000,29999]),3,2))
var(30) = 0

[state 190]
type = VarSet
trigger1 = !time&&prevstateno=22000
var(50) = root,var(40)

[state 190]
type = VarSet
trigger1 = !var(30)&&!time
var(35) = ifelse(P2dist X<0,-1,1)

[state 190]
type = ParentVarSet
trigger1 = var(30)=40
var(40) = var(40)

[state 13500]
type = SuperPause
trigger1 = numhelper(26710)
trigger1 = helper(26710),movehit=1&&helper(26710),numtarget
time = 0
movetime=0
p2defmul = 1
sound = -1
anim = -1
darken = 0
poweradd = 0

;ヒットポーズ中
[state 12000]
type = VarAdd
trigger1 = var(26)>1
var(26) = -1
ignorehitpause=1

;ヒットポーズ中
[state 12000]
type = VarSet
trigger1 = numhelper(26710)&&!var(26)
trigger1 = helper(26710),movehit=1&&helper(26710),numtarget
var(26) = 20
persistent=0
ignorehitpause=1

;ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26710)
trigger1 = helper(26710),movehit=1&&helper(26710),numtarget
var(2) = 1
persistent=0
ignorehitpause=1

;空中ヒット数補正増加
[state 12000]
type = ParentVarAdd
trigger1 = numhelper(26710)
trigger1 = helper(26710),movehit=1&&helper(26710),numtarget&&(root,var(3)||P2statetype=A)
var(3) = 1
persistent=0
ignorehitpause=1

;ヒットによる増加(スタイリッシュポイント)
[state -2]
type = parentvaradd
trigger1 = numhelper(26710)
trigger1 = helper(26710),movehit=1
fvar(15) = .00005*floor(ifelse(20*root,fvar(14)<1,1+(root,var(2)%5=1),20*root,fvar(14))*1.22)
ignorehitpause=1

[state -2]
type = parentvarset
trigger1 = numhelper(26710)
trigger1 = helper(26710),movehit=1
fvar(14) = root,fvar(1)*root,fvar(2)*root,fvar(3)*root,fvar(4)
ignorehitpause=1

[state 190]
type = AttackDist
trigger1 = var(30)=40
value = 0

[state 190]
type = PalFX
trigger1 = time<4&&prevstateno=[5000,5099]
mul = 96+8*time,96+8*time,96+8*time
time = 1

[state 190]
type = NothitBy
trigger1 = 1
value = ,AT
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,NA,NT,NP
slot = 0
stateno = 29500;stateno
time=-1

[state 190]
type = hitOverride
trigger1 = !time
trigger1 = var(55):=stateno
attr = SCA,SA,ST,SP,HA,HT,HP
slot = 1
stateno = 29550;stateno
time=-1

[state 190]
type = ParentVarAdd
trigger1 = var(12)<0 && var(12)!=10001
var(12) = ifelse((-var(12)+10000)>=(root,var(12)-1),-root,var(12)+10001,var(12))
ignorehitpause=1

[state 190]
type = VarSet
trigger1 = var(12)!=0
var(12) = 0
ignorehitpause=1

[state 190]
type = StateTypeSet
trigger1 = Gethitvar(damage)
movetype=I

[state 190]
type = StatetypeSet
trigger1 = !time
movetype=A

[state 190]
type = ChangeState
trigger1 = var(30)=40
value = 22000

;ミサイル
[state -2]
type = Helper
trigger1 = var(30)=1
id = 26710
stateno=26710
name = "missile"
pos = floor(0*const(size.xscale)),-floor(100*const(size.yscale))
postype = P1
ownpal = 1
sprpriority = 4
pausemovetime=999999
supermovetime=999999

[state 190]
type = ChangeState
trigger1 = root,var(12)=10001
value = 29000

