[Command]
name = "AI1"
command = b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b
time = 0
[Command]
name = "AI2"
command = c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI3"
command = x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI4"
command = y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI5"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI6"
command = s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI7"
command = F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F
time = 0
[Command]
name = "AI8"
command = D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D
time = 0
[Command]
name = "AI9"
command = B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B
time = 0
[Command]
name = "AI10"
command = U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U
time = 0
[Command]
name = "AI11"
command = a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI12"
command = c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI13"
command = x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI14"
command = y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI15"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI16"
command = s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI17"
command = a,B,c,x,y,z,s,B,D,F,U,a,b,c,x,y,z,s,s
time = 0
[Command]
name = "AI18"
command = a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI19"
command = b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b
time = 0
[Command]
name = "AI20"
command = c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI_1"
command = x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI_2"
command = y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI_3"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI_4"
command = s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI_5"
command = F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F
time = 0
[Command]
name = "AI_6"
command = D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D
time = 0
[Command]
name = "AI_7"
command = B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B
time = 0
[Command]
name = "AI_8"
command = U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U
time = 0
[Command]
name = "AI_9"
command = a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI_10"
command = c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI_11"
command = x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI_12"
command = y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI_13"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI_14"
command = s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI_15"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI_16"
command = z,z,z,z,z,z,a,a,a,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI_17"
command = z,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,z,z,z
time = 0
[Command]
name = "AI_18"
command = z,z,z,z,z,a,a,a,z,z,z,z,z,a,a,a,z,z,z
time = 0
[Command]
name = "AI_19"
command = z,z,z,z,z,a,a,a,z,z,z,z,z,z,a,a,z,z,z
time = 0
[Command]
name = "AI_20"
command = z,z,z,z,a,a,a,z,z,z,z,a,z,z,a,a,z,z,z
time = 0
[Command]
name = "AI_21"
command = z,z,z,a,z,z,z,z,z,z,z,z,z,a,a,z,z,z,z
time = 0
[Command]
name = "AI_22"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI_23"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,a,a,z
time = 0
[Command]
name = "AI_24"
command = z,z,a,a,a,a,z,z,z,z,z,z,z,z,z,a,a,a,z
time = 0
[Command]
name = "AI_25"
command = z,z,z,z,z,z,a,a,z,z,z,z,z,a,a,a,a,z,z
time = 0
[Command]
name = "AI_26"
command = z,z,z,z,z,z,z,z,a,a,a,a,a,a,z,z,z,z,z
time = 0
[Command]
name = "AI_27"
command = z,z,z,a,a,a,a,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI_28"
command = z,z,z,z,z,a,a,a,z,z,z,a,a,a,z,z,a,z,a
time = 0
[Command]
name = "AI_29"
command = z,z,z,z,a,a,a,z,z,z,z,z,a,a,a,z,z,z,z
time = 0
[Command]
name = "AI_30"
command = z,z,z,a,a,z,z,z,z,z,z,z,z,z,a,a,z,z,z
time = 0

;====================================================================
;-| Hyper      |----------------------------------------
[Command]
name = "チェーンドライブ -code blood-"  ;ok
command = ~D,F,D,F,z
time = 30

[Command]
name = "chaindrive2003" ;ok
command = ~D,F,D,B, c
time = 24

[Command]
name = "mushiki"
command = ~D,B,D,B, z ;ok
time = 24

[Command]
name = "kuri"
command = ~D,B,D,B,c  ;ok
time = 24

[Command]
name = "heatdriver"  ;ok
command = ~D,F,D,F, x
time = 24

[Command]
name = "heatdriver2"   ;ok
command = ~D,F,D,F, y
time = 24

[Command]
name = "heatdriverSDM" ;ok
command = ~D,F,D,F, a+b
time = 24

[Command]
name = "EZheatdriver" ;ok
command = ~D,F,D,F, x+y
time = 25

[Command]
name = "chaindriver"    ;ok
command = ~D,F,D,B, x
time = 24

[Command]
name = "chaindriver"   ;ok
command = ~D,F,D,B, y
time = 24

[Command]
name = "chaindriverSDM"  ;OK
command = ~D,F,D,F, c
time = 24

[Command]
name = "heavensdrive" ;ok
command = ~D,F,D,F, a
time = 24

[Command]
name = "heavensdrive"   ;ok
command = ~D,F,D,F, b
time = 24

[Command]
name = "b_c"           ;ok
command = ~D,B,D,B, x
time = 30

[Command]
name = "b_c"
command = ~D,B,D,B, y   ;ok
time = 30

[Command]
name = "keii"   ;ok
command = ~D, F, s
time = 20

;-| Special    |----------------------------------------
; Crow Bite A
[Command]
name = "Crow_Bite_A" ;ok
command = ~F,D,F, x
time = 18

; Crow Bite C
[Command]
name = "Crow_Bite_C"  ;ok
command =  ~F,D,F, y
time = 18

; Minute_spike_B
[Command]
name = "Minute_spike_B" ;ok
command = ~D,B, a
time = 14

; Minute_spike_D
[Command]
name = "Minute_spike_D"  ;ok
command = ~D,B, b
time = 14

[Command]
name = "Blackout_B"  ;ok
command = ~D,F, a
time = 18

[Command]
name = "Blackout_D"   ;ok
command = ~D,F, b
time = 18

; Eine trigger
[Command]
name = "Eine_Trigger_A"   ;ok
command = ~D,F,x
time = 14

; Eine trigger
[Command]
name = "Eine_Trigger_C"   ;ok
command = ~D,F,y
time = 14


; nalow spike
[command]
name = "nalow"
command = ~D,B, a   ;ok
time = 18

[command]
name = "nalow"
command = ~D,B, b  ;ok
time = 18

; air trigger
[command]
name = "air_A"      ;ok
command = ~D,F, a
time = 18

[command]
name = "air_C"       ;ok
command = ~D,F, b
time = 18



;-| Double Tap |-----------------------------------------------------------

[Command]
name = "FF"
command = F, F
time = 20

[Command]
name = "BB"
command = B, B
time = 20

;-| 2/3 Button Combination |-----------------------------------------------

[Command]
name = "recovery"
command = a+x
time = 1

[Command]
name = "dodge"
command = a+x
time = 1

[Command]
name = "CD"
command = b+y
time = 1

[Command]
name = "abc"
command = a+b+c
time = 1

[Command]
name = "harakiri"
command = U,U,U
time = 30

;-| Single Tap |---------------------------------------------------------
[Command]
name = "justfwd"
command = F
time = 1

[Command]
name = "justback"
command = B
time = 1

[Command]
name = "justup"
command = U
time = 1

[Command]
name = "justdown"
command = D
time = 1

;------------------------------------------------------
[Command]
name = "CD"
command = c
time = 1

[Command]
name = "c"
command = c
time = 1

[Command]
name = "recovery"
command = z
time = 1

[Command]
name = "dodge"
command = z
time = 1

[Command]
name = "z"
command = z
time = 1

[Command]
name = "s"
command = s
time = 1

;------------------------------------------------------
[Command]
name = "A"
command = a
time = 1

[Command]
name = "B"
command = b
time = 1

[Command]
name = "C"
command = x
time = 1

[Command]
name = "D"
command = y
time = 1

[Command]
name = "M"
command = c
time = 1

[Command]
name = "N"
command = z
time = 1

; - [Hold button] - 
;-------------------------------------------------
[Command]
name = "hold_A"
command = /$x
time = 1

[Command]
name = "hold_B"
command = /$a
time = 1

[Command]
name = "hold_C"
command = /$y
time = 1

[Command]
name = "hold_D"
command = /$b
time = 1

;-| Hold Dir |--------------------------------------------------------------
[Command]
name = "holdfwd";Required (do not remove)
command = /$F
time = 1

[Command]
name = "holdback";Required (do not remove)
command = /$B
time = 1

[Command]
name = "holdup" ;Required (do not remove)
command = /$U
time = 1

[Command]
name = "holddown";Required (do not remove)
command = /$D
time = 1

;longjump
[Command]
name = "longjump"
command = D, $U
time = 18

;carica cosmo
[Command]
name = "holdpowercosmos z" ;Required (do not remove)
command = /z
time = 1

[Command]
name = "holdpowercosmos c" ;Required (do not remove)
command = /c
time = 1


;---------------------------------------------------------------------------
; 2. State entry
; --------------
; This is where you define what commands bring you to what states.
;
; Each state entry block looks like:
;   [State -1]                  ;Don't change this
;   type = ChangeState          ;Don't change this
;   value = new_state_number
;   trigger1 = command = command_name
;   . . .  (any additional triggers)
;
; - new_state_number is the number of the state to change to
; - command_name is the name of the command (from the section above)
; - Useful triggers to know:
;   - statetype
;       S, C or A : current state-type of player (stand, crouch, air)
;   - ctrl
;       0 or 1 : 1 if player has control. Unless "interrupting" another
;                move, you'll want ctrl = 1
;   - stateno
;       number of state player is in - useful for "move interrupts"
;   - movecontact
;       0 or 1 : 1 if player's last attack touched the opponent
;                useful for "move interrupts"
;
; For reference on triggers, see CNS documentation.
;
; Just for your information (skip if you're not interested):
; This part is an extension of the CNS. "State -1" is a special state
; that is executed once every game-tick, regardless of what other state
; you are in.


; Don't remove the following line. It's required by the CMD standard.
;-|Commands|------------------------------------------------------------------------------
[Statedef -1]

;===============================================
;AI
;aaaaaaaaaaaaaaaaaaaaaa
;aaaaaaaaaaaaaaaaaaaaaa
;===============================================

;Carica Cosmo
[State -1, Carica cosmo]
type = ChangeState
value = 35000
;triggerall = var(59) = 0
trigger1 = command = "holdpowercosmos z"
trigger1 = command = "holdpowercosmos c"
trigger1 = Power < 3000
trigger1 = statetype = S
trigger1 = ctrl
trigger1 = StateNo != 20
trigger1 = StateNo != 21

[State abc]
type = varset 
triggerall = alive
triggerall = var(59) = 0 
trigger1 = command = "AI_1" 
trigger2 = command = "AI_2" 
trigger3 = command = "AI_3" 
trigger4 = command = "AI_4" 
trigger5 = command = "AI_5" 
trigger6 = command = "AI_6" 
trigger7 = command = "AI_7" 
trigger8 = command = "AI_8" 
trigger9 = command = "AI_9" 
trigger10 = command = "AI_10" 
trigger11 = command = "AI_11" 
trigger12 = command = "AI_12" 
trigger13 = command = "AI_13" 
trigger14 = command = "AI_14" 
trigger15 = command = "AI_15" 
trigger16 = command = "AI_16"
trigger17 = command = "AI_17"
trigger18 = command = "AI_18"
trigger19 = command = "AI_19"
trigger20 = command = "AI_20"
trigger21 = command = "AI_21"
trigger22 = command = "AI_22"
trigger23 = command = "AI_23"
trigger24 = command = "AI_24"
trigger25 = command = "AI_25"
trigger26 = command = "AI_26"
trigger27 = command = "AI_27"
trigger28 = command = "AI_28"
trigger29 = command = "AI_29"
trigger30 = command = "AI_30"
var(59) = 1
ignorehitpause = 1
persistent = 1

[State AI2]
type = VarSet
triggerall = var(59) = 0
triggerall = alive
trigger1 = command = "AI1"
trigger2 = command = "AI2"
trigger3 = command = "AI3"
trigger4 = command = "AI4"
trigger5 = command = "AI5"
trigger6 = command = "AI6"
trigger7 = command = "AI7"
trigger8 = command = "AI8"
trigger9 = command = "AI9"
trigger10 = command = "AI10"
trigger11 = command = "AI11"
trigger12 = command = "AI12"
trigger13 = command = "AI13"
trigger14 = command = "AI14"
trigger15 = command = "AI15"
trigger16 = command = "AI16"
trigger17 = command = "AI17"
trigger18 = command = "AI18"
trigger19 = command = "AI19"
trigger20 = command = "AI20"
trigger21 = ishometeam && (teamside>1||matchno>1)
var(59) = 1
ignorehitpause = 1
persistent = 1



[State -2]
type = ChangeState
value = 0
triggerall = var(59) = 1 && statetype != A && ctrl
trigger1 = Win = 1


;===============================================
;Hyper
;===============================================
;==============================================================================
;チェーンドライブ -code blood-
[State -1, 3singi]
type = ChangeState
value = 3011
triggerall = command = "チェーンドライブ -code blood-"
triggerall = power >= 3000
trigger1 = statetype != A
trigger1 = ctrl
trigger2 = stateno = 205 && movecontact
trigger3 = stateno = 215 && movecontact
trigger4 = stateno = 245 && movecontact
trigger5 = stateno = 400 && movecontact
trigger6 = stateno = 410 && movecontact
trigger7 = stateno = 430 && movecontact
trigger8 = stateno = 440 && movecontact
trigger9 = stateno = 315 && movecontact
trigger10 = stateno = 1150 && AnimElemtime(4) >= 0 && AnimElemtime(6) < 0 && movecontact
trigger11 = (stateno = 3010) &&(time>0)
trigger12 = stateno = 1020 && movecontact
triggerall = var(59) = 0

; 炎の暴走−MUSHIKI−
[state -1]
type = changestate
value = 975
triggerall = command = "mushiki"
triggerall = statetype != A
triggerall = power >= 3000
trigger1 = ctrl = 1

;チェーンドライブ２００３
[State -1]
type = ChangeState
value = 3300
triggerall = !var(6) && !var(7)
triggerall = !Var(59); hide AI
triggerall = command = "chaindrive2003"
triggerall = statetype != A
triggerall = power >= 2000
triggerall = stateno != 5120
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]

; クリムゾンスターロード
[state -1]
type = changestate
value = 13501
triggerall = command = "kuri"
triggerall = statetype != A
triggerall = power >= 2000
trigger1 = ctrl = 1
trigger2 = stateno = 301

; SDM heatdrive removed. 
; heatdriver A
[State -1]
type = ChangeState
value = 3000 - (var(59) = 1)*1300 ; =1700
triggerall = !var(7) && !var(6)
triggerall = !Var(50) ;  AI memory and focus
triggerall = command = "heatdriver"
triggerall = statetype != A
triggerall = power >= 1000
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301 
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]
triggerall = p2stateno != 10210
triggerall = p2stateno != 9010
triggerall = p2stateno != 1610
triggerall = p2stateno != 1620
triggerall = NumExplod(7089) != 1
triggerall = NumExplod(89) != 1
trigger1 = statetype = S



; heatdriver A CounterMode version
[State -1]
type = ChangeState
value = 3400; - (var(59) = 1)*1700 ; =1700
triggerall = !var(7)
triggerall = var(6) != 0
triggerall = !Var(50) ;  AI memory and focus
triggerall = command = "heatdriver"
triggerall = statetype != A
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301 
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]
trigger7 = stateno = 1500
trigger8 = stateno = 300
trigger8 = time = [1,40]


;--------------------------
; heatdriver C , KOF00 version
[State -1]
type = ChangeState
;value = 3005 ; KOF99
value = 3100; - (var(59) = 1 && p2statetype = L)*3060 ; = 40
triggerall = !var(7)
triggerall = !Var(50) ; AI memory and focus
triggerall = command = "heatdriver2"
triggerall = statetype != A
triggerall = power >= 1000
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430] 
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]

;--------------------
; 3250 SDM chaindriver
[State -1]
type = ChangeState
value = 3250
triggerall = !var(6) && !var(7)
triggerall = !Var(59); hide AI
triggerall = command = "chaindriverSDM"
triggerall = statetype != A
triggerall = power >= 2000
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]

; 3200 chain driver
[State -1]
type = ChangeState
value = 3200
triggerall = !var(6) && !var(7)
triggerall = !Var(59); hide AI
triggerall = command = "chaindriver"
triggerall = statetype != A
triggerall = power >= 1000
triggerall = stateno != 5120
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]

; 3199 chain driver countermode version
[State -1]
type = ChangeState
value = 3199
triggerall = !var(7)
triggerall = var(6) != 0
triggerall = !Var(59); hide AI
triggerall = command = "chaindriver"
triggerall = statetype != A
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]
trigger7 = stateno = 1500
trigger8 = stateno = 300
trigger8 = time = [1,40]

; バーニングコロナ
[state -1]
type = changestate
value = 990
triggerall = command = "b_c"
triggerall = statetype != A
triggerall = power >= 1000
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430] 
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]

; ヘヴンズドライブ
[state -1]
type = changestate
value = 3340
triggerall = command = "heavensdrive"
triggerall = statetype != A
triggerall = power >= 1000
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430] 
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]

; ナロウスパイク
[state -1]
type = changestate
value = 13505
triggerall = command = "nalow"
triggerall = command = "Minute_spike_D" || command = "Minute_spike_B"
trigger1 = stateno = 1301
trigger2 = stateno = 1306

; エアトリガー　弱
[state -1]
type = changestate
value = 963
triggerall = command = "air_A"
triggerall = statetype = A
trigger1 = ctrl = 1
trigger2 = stateno = 314 || (stateno = [620,650])
trigger2 = movecontact = 1
trigger3 = stateno = 1505

; エアトリガー　強
[state -1]
type = changestate
value = 964
triggerall = command = "air_C"
triggerall = statetype = A
trigger1 = ctrl = 1
trigger2 = stateno = 314 || (stateno = [620,650])
trigger2 = movecontact = 1
trigger3 = stateno = 1505

; 敬意
[state -1]
type = changestate
value = 970
triggerall = command = "keii"
triggerall = statetype != A
trigger1 = ctrl = 1


;=======================================
; TEMP vars
;=======================================
[State -1]
type = varset
triggerall = command = "holdfwd" && command = "B"
triggerall = time = [2,13]
trigger1 = stateno = 1000 || stateno = 1006
trigger2 = stateno = 1504
var(2) = 1

[State -1]
type = varset
triggerall = command = "holdfwd" && command = "A"
triggerall = time = [2,13]
trigger1 = stateno = 1000 || stateno = 1006
trigger2 = stateno = 1504
var(2) = 2

[State -1]
type = varset
triggerall = command = "holdback" && command = "A"
triggerall = time = [2,13]
trigger1 = stateno = 1000 || stateno = 1006
var(2) = 3

[State -1]
type = varset
triggerall = command = "holdback" && command = "B"
triggerall = time = [2,13]
trigger1 = stateno = 1000 || stateno = 1006
var(2) = 4

[State -1]
type = ChangeState
value = 1500
triggerall = command = "Crow_Bite_A"
triggerall = statetype != A
triggerall = !var(59) ; hide AI
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]
trigger7 = stateno = 220 
trigger7 = (movecontact = 1) || time = [5,11]

; Uppercut_C
[State -1]
type = ChangeState
value = 1503
triggerall = !Var(59); hide AI
triggerall = command = "Crow_Bite_C"
triggerall = statetype != A
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]
trigger7 = stateno = 220 
trigger7 = (movecontact = 1) || time = [5,11]

; 1300 Shala! Minute spike_B
[State -1]
type = ChangeState
value = 1300; - (var(59) = 1 && p2movetype = H && p2statetype = S && stateno != 301)*987
triggerall = !var(50)
triggerall = command = "Minute_spike_B"
triggerall = statetype != A
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]
trigger7 = stateno = 220 
trigger7 = (movecontact = 1) || time = [5,11]

; Aerial Shala B
[State -1]
type = ChangeState
value = 1302 ; aerial minute spike
triggerall = !Var(59); hide AI
triggerall = command = "Minute_spike_B"
triggerall = statetype = A
trigger1 = ctrl = 1
trigger2 = stateno = 314 || (stateno = [620,650])
trigger2 = movecontact = 1
trigger3 = stateno = 1505

; 1300 Shala! D
[State -1]
type = ChangeState
value = 1305
triggerall = !Var(59); hide AI
triggerall = command = "Minute_spike_D"
triggerall = statetype != A
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]
trigger7 = stateno = 220 
trigger7 = (movecontact = 1) || time = [5,11]

; Aerial Shala D
[State -1]
type = ChangeState
value = 1307
triggerall = !Var(59); hide AI
triggerall = command = "Minute_spike_D"
triggerall = statetype = A
trigger1 = ctrl = 1
trigger2 = stateno = 314 || (stateno = [620,650])
trigger2 = movecontact = 1
trigger3 = stateno = 1505

; 1700 Black out
[State -1]
type = ChangeState
value = 1700
triggerall = command = "Blackout_B"
triggerall = statetype != A
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger3 = !Var(59); hide AI
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]
trigger7 = stateno = 220 
trigger7 = (movecontact = 1) || time = [5,11]

;1710 Black out D
[State -1]
type = ChangeState
value = 1710 ; - (var(59) = 1 && p2movetype = H)*410
triggerall = command = "Blackout_D"
triggerall = statetype != A
triggerall = !Var(59); hide AI
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]
trigger7 = stateno = 220 
trigger7 = (movecontact = 1) || time = [5,11]

; eine trigger A
[State -1]
type = ChangeState
value = 1000
triggerall = !Var(59)
triggerall = command = "Eine_Trigger_A"
triggerall = numproj = 0
triggerall = statetype != A
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]
trigger7 = stateno = 220 
trigger7 = (movecontact = 1) || time = [5,11]

; eine trigger C
[State -1]
type = ChangeState
value = 1006
triggerall = !Var(50); AI focus
triggerall = command = "Eine_Trigger_C"
triggerall = numproj = 0
triggerall = statetype != A
trigger1 = ctrl = 1
trigger2 = stateno = [250,280]
trigger2 = (movecontact = 1 && time <= 10) || time = [5,11]
trigger3 = stateno = [400,430]
trigger3 = movecontact = 1
trigger4 = stateno = 301
trigger4 = movecontact = 1 && time = [15,17]
trigger4 = time = [15,21]
trigger5 = stateno = 356
trigger6 = stateno = 240 || stateno = 321 || stateno = 420 || stateno = 430
trigger6 = time = [7,14]
trigger7 = stateno = 220 
trigger7 = (movecontact = 1) || time = [5,11]

;========================================
; misc moves
;========================================

; 113 during guard roll back cancel
[State -1]
type = ChangeState
value = 113
triggerall = !Var(59)
triggerall = command = "A" && command = "C" || command = "N"
triggerall = command = "holdback"
triggerall = statetype != A
triggerall = power >= 1000
trigger1 = stateno = 150
trigger2 = stateno = 152

; 112 during guard roll fwd cancel
[State -1]
type = ChangeState
value = 112
triggerall = !Var(59)
triggerall = command = "A" && command = "C" || command = "N"
triggerall = command != "holdback"
triggerall = statetype != A
triggerall = power >= 1000
trigger1 = stateno = 150
trigger2 = stateno = 152

; 110 dodge forward
[State -1]
type = ChangeState
value = 110
trigger1 = command = "A" && command = "C" || command = "N"
trigger1 = command = "holdfwd"
trigger1 = statetype = S
trigger1 = ctrl = 1

; 111 dodge forward attack
[State -1]
type = ChangeState
value = 111
triggerall = !var(59) ; hide AI
triggerall = stateno = 110
trigger1 = command = "A"
trigger2 = command = "B"
trigger3 = command = "C"
trigger4 = command = "D"

; 360 dodge backward KOF99
[State -1]
type = ChangeState
value = 355
trigger1 = command = "A" && command = "C" || command = "N"
trigger1 = command = "holdback"
trigger1 = statetype = S
trigger1 = ctrl = 1

[State -1]
type = ChangeState
value = 110
trigger1 = command = "A" && command = "C" || command = "N"
trigger1 = statetype = S
trigger1 = ctrl = 1

;---------------------------------------
; FWD_A 1inch
[State -1]
type = ChangeState
value = 300 ;+ (var(59) = 1 && p2statetype = C && p2bodydist X <= 50)*10
triggerall = command = "holdfwd" && command = "C"
trigger1 = statetype = S
trigger1 = ctrl = 1

; FWD_A 1inch Type 2
[State -1]
type = ChangeState
value = 301
triggerall = !var(59)
triggerall = command = "holdfwd" && command = "C"
triggerall = statetype != A
trigger1 = ctrl = 1
trigger2 = (stateno = [250,260]) || (stateno = [400,430])
trigger2 = time = [2,10]
trigger3 = stateno = [270,280]
trigger3 = movecontact = 1 && time <= 18
trigger4 = stateno = 270
trigger4 = P2bodydist X <= 18
trigger4 = time = [4,10]
trigger5 = stateno = 111
trigger5 = var(6) != 0
trigger5 = movecontact = 1

; FWD + B
[State -1]
type = ChangeState
value = 310
triggerall = command = "holdfwd" && command = "A"
triggerall = !Var(59); hide AI
trigger1 = statetype = S
trigger1 = ctrl = 1

; FWD + B cancelled
[State -1]
type = ChangeState
value = 313
triggerall = command = "holdfwd" && command = "A"
triggerall = statetype != A
triggerall = !Var(59); hide AI
trigger1 = ctrl = 1
trigger2 = (stateno = [250,260]) || (stateno = [400,430])
trigger2 = time = [2,10]
trigger3 = stateno = [270,280]
trigger3 = movecontact = 1 && time <= 18
trigger4 = stateno = 270
trigger4 = P2bodydist X <= 18
trigger4 = time = [4,10]
trigger5 = stateno = 111
trigger5 = var(6) != 0
trigger5 = movecontact = 1


; standing CD attack
[State -1]
type = ChangeState
value = 240
triggerall = !var(59)
triggerall = command = "CD" || command = "M"
triggerall = statetype != A
triggerall = statetype = S
trigger1 = ctrl = 1

; CD during guard cancel
[State -1]
type = ChangeState
value = 321
triggerall = command = "CD" || command = "M"
triggerall = statetype != A
triggerall = power >= 1000
trigger1 = stateno = 150
trigger2 = stateno = 152

; jump CD
[State -1]
type = ChangeState
value = 650
triggerall = command = "CD"
triggerall = statetype = A
trigger1 = ctrl = 1

;===================================
; Throws
;===================================

;Throw Attack C
[State -1]
type = ChangeState
value = 370
triggerall = P2bodydist X <= 10
triggerall = p2movetype != H && p2statetype != A
triggerall = statetype = S && ctrl
triggerall = p2stateno != 5120
triggerall = stateno != 100
trigger1 = command = "holdfwd" && command = "D"
;trigger2 = var(59) >= 1
;trigger2 = Random <= 100
;trigger2 = (p2bodydist X <= 2) && (p2stateno < 100)
;trigger3 = var(50) = 1 && Random <= 800

;Throw Attack D
[State -1]
type = ChangeState
value = 380
triggerall = P2bodydist X <= 10
triggerall = p2movetype != H && p2statetype != A
triggerall = statetype = S && ctrl
triggerall = p2stateno != 5120
triggerall = stateno != 100
trigger1 = command = "holdfwd" && command = "B"
;trigger2 = var(59) >= 1
;trigger2 = Random <= 100
;trigger2 = (p2bodydist X <= 2) && (p2stateno < 100)

;--------------------------------------------------------------------------------------
; Standing close attacks

 ;Stand_A (close)
[State -1]
type = ChangeState
value = 260
triggerall = !Var(59); hide AI
triggerall = command = "A"
triggerall = p2bodydist x <= 18
triggerall = command != "holddown"
triggerall = statetype != A
trigger1 = ctrl = 1
trigger2 = stateno = 250
trigger2 = time >= 6
trigger2 = movecontact = 1
trigger3 = stateno = 260
trigger3 = time >= 7
trigger3 = movecontact = 1
trigger4 = stateno = 400
trigger4 = time >= 6
trigger4 = movecontact = 1
trigger5 = stateno = 410
trigger5 = time >= 7
trigger5 = movecontact = 1

 ;Stand_B (close)
[State -1]
type = ChangeState
value = 280
triggerall = command = "B"
triggerall = command != "holddown"
triggerall = statetype != A
triggerall = p2bodydist x <= 18
trigger1 = ctrl = 1
trigger2 = stateno = 250
trigger2 = time >= 6
trigger2 = movecontact = 1
trigger3 = stateno = 260
trigger3 = time >= 7
trigger3 = movecontact = 1
trigger4 = stateno = 400
trigger4 = movecontact = 1
trigger4 = time >= 6
trigger5 = stateno = 410
trigger5 = time >= 7
trigger5 = movecontact = 1

; Stand_C (close)
[State -1]
type = ChangeState
value = 250
triggerall = !Var(59); hide AI
triggerall = command = "C"
trigger1 = P2bodydist X <= 20
trigger1 = statetype = S
trigger1 = ctrl = 1

; Stand_D (close)
[State -1]
type = ChangeState
value = 270
triggerall = !Var(50)
triggerall = command = "D"
triggerall = !Var(58)
triggerall = p2bodydist x <= 20
trigger1 = statetype = S
trigger1 = ctrl = 1


;----------------------------------------------------
; Standing (far) attacks

; Stand_A (far)
[State -1]
type = ChangeState
value = 210
triggerall = command = "A"
triggerall = p2bodydist x > 18
triggerall = command != "holddown"
triggerall = statetype != A
trigger1 = ctrl = 1
trigger2 = stateno = 200
trigger2 = time >= 8
trigger3 = stateno = 250
trigger3 = movecontact = 1
trigger3 = time >= 8
trigger4 = stateno = 260
trigger4 = time >= 7
trigger4 = movecontact = 1
trigger5 = stateno = 400
trigger5 = movecontact = 1
trigger5 = time >= 6
trigger6 = stateno = 410
trigger6 = time >= 7
trigger6 = movecontact = 1

; Stand_B (far)
[State -1]
type = ChangeState
value = 230
triggerall = !Var(59); hide AI
triggerall = command = "B"
triggerall = p2bodydist x > 18
triggerall = command != "holddown"
triggerall = statetype != A
trigger1 = ctrl = 1
trigger2 = stateno = 200
trigger2 = time >= 8
trigger3 = stateno = 250
trigger3 = movecontact = 1
trigger3 = time >= 8
trigger4 = stateno = 260
trigger4 = time >= 7
trigger4 = movecontact = 1
trigger5 = stateno = 400
trigger5 = movecontact = 1
trigger5 = time >= 6
trigger6 = stateno = 410
trigger6 = time >= 7
trigger6 = movecontact = 1

; Stand_C (far)
[State -1]
type = ChangeState
value = 200
triggerall = !Var(50); AI focus
triggerall = command = "C"
triggerall = P2bodydist X > 20
trigger1 = statetype = S
trigger1 = ctrl = 1

; Stand_D (far)
[State -1]
type = ChangeState
triggerall = !Var(50)
value = 220
triggerall = !Var(58)
triggerall = command = "D"
trigger1 = statetype = S
trigger1 = ctrl = 1

;------------------------------------------------
; Crouching attacks

; Crouching A
[State -1]
type = ChangeState
value = 410
triggerall = !Var(50); AI focus
triggerall = command = "holddown" && command = "A"
triggerall = statetype = C
trigger1 = ctrl = 1
trigger2 = stateno = 400
trigger2 = time >= 8
trigger3 = stateno = 410
trigger3 = (time >= 7) || movecontact


; Crouching B
[State -1]
type = ChangeState
value = 430
triggerall = !Var(50); AI focus
triggerall = command = "holddown" && command = "B"
triggerall = statetype = C
trigger1 = ctrl = 1
trigger2 = stateno = 410
trigger2 = (time >= 8) || movecontact
trigger2 = p2bodydist X >= 0
trigger3 = stateno = 400
trigger3 = time >= 8
trigger4 = var(59)
trigger4 = hitcount = 1
trigger4 = stateno = 410 && movecontact

; Crouching C
[State -1]
type = ChangeState
value = 400
triggerall = !Var(59); hide AI
triggerall = command = "holddown" && command = "C"
triggerall = statetype = C
trigger1 = ctrl = 1
trigger2 = stateno = 410
trigger2 = movecontact = 1

; Crouching D
[State -1]
type = ChangeState
value = 420
triggerall = !Var(59); hide AI
triggerall = command = "holddown" && command = "D"
triggerall = statetype = C
trigger1 = ctrl = 1

; Jumping light punch
[State -1]
type = ChangeState
value = 610
triggerall = !Var(59); hide AI
trigger1 = command = "A"
trigger1 = statetype = A
trigger1 = ctrl = 1

; Jumping light kick
[State -1]
type = ChangeState
value = 630
trigger1 = command = "B"
trigger1 = statetype = A
trigger1 = ctrl = 1

; Jumping hard punch
[State -1]
type = ChangeState
value = 600
trigger1 = command = "C"
trigger1 = statetype = A
trigger1 = ctrl = 1

; Jumping hard kick
[State -1]
type = ChangeState
value = 620
trigger1 = command = "D"
trigger1 = statetype = A
trigger1 = ctrl = 1


;=======================================
; Taunt
[State -1]
type = ChangeState
value = 195
triggerall = !Var(50); AI focus
trigger1 = command = "s"
trigger1 = statetype = S
trigger1 = stateno != 195
trigger1 = ctrl = 1

; Run Forward
[State -1]
type = ChangeState
value = 100
trigger1 = command = "FF"
trigger1 = statetype = S
trigger1 = command != "holddown"
trigger1 = ctrl = 1
trigger1 = stateno != 100 && prevstateno != 100
trigger1 = stateno != 10044 && prevstateno != 10044

; Run Backwards
[State -1]
type = ChangeState
value = 105 + (var(59) = 1 && BackEdgeDist <= 165)*9939
trigger1 = command = "BB"
trigger1 = statetype = S
trigger1 = command != "holddown"
trigger1 = ctrl = 1

[State -1]
type = Helper
trigger1 = NumHelper(9999) = 0
id = 9999
pos = 0, 150
stateno = 9999
pausemovetime = 999999
Name = "AI switch - Thanks to 'ANMC' && 'Bagaliao'"
keyctrl = 1
persistent = 0






;=======================================
; AI plus, most of AI is in CNS
;=======================================

; Crawbite C (anti air)
[State -1]
type = ChangeState
value = 1503 - (p2stateno >= 2000 && p2movetype = A)*1373 ;130
triggerall = var(59) >= 1 && ctrl
triggerall = var(63) != 1
triggerall = statetype != A
triggerall = P2bodydist x = (10,50)
triggerall = FrontEdgeDist > 50
triggerall = P2movetype != H ;&& (P2StateNo != [120,155]) && (P2StateNo != 0)
trigger1 = P2bodydist Y = (-68,-40)
trigger1 = P2statetype = A
trigger1 = random <= 999; && p2movetype = A
trigger2 = (PrevStateNo = [151,153]) || (PrevStateNo = 140)
trigger2 = p2stateno < 2000

; Crawbite A (anti attack)
[State -1]
type = ChangeState
value = 1500 - (p2stateno >= 2000 && p2movetype = A)*1370 ;130
triggerall = var(59) >= 1 && ctrl
triggerall = (Random >= 100) || (var(50) = 1)
triggerall = var(62) != 1
triggerall = statetype != A
triggerall = P2bodydist X = (5,50)
triggerall = FrontEdgeDist > 50
triggerall = P2movetype = A
trigger1 = P2dist Y = (-50,-40)
trigger1 = P2statetype = A
trigger2 = stateno = 5120
trigger2 = AnimTIme = 0
;trigger = (PrevStateNo = [151,153]) || (PrevStateNo = 140)

; Minute spike B
;[State -1]
;type = ChangeState
;value = 1300
;triggerall = var(59) >= 1 && ctrl
;triggerall = statetype != A && p2statetype != A
;triggerall = p2stateno < 1000
;triggerall = Random <= 600
;triggerall = var(61) != 1
;trigger1 = P2stateno = (105,107)
;trigger1 = P2bodydist X = (25,35)
;trigger2 = P2stateno = 100
;trigger2 = P2bodydist X = (30,65)
;trigger3 = P2movetype = A
;trigger3 = P2bodydist X = (30,80)
;trigger4 = p2bodydist X = [112,117]
;trigger4 = p2stateno = 20

[State -1,defence]
type = ChangeState
value =  120
triggerall = statetype != A
triggerall = var(59) = 1
triggerall = ctrl
;triggerall = enemy,facing != facing
triggerall = alive
trigger6 = p2movetype = A
triggerall = p2stateno != [5050,5122]
;trigger1 = p2bodydist X=[60,230]
;trigger1 = p2movetype = A
;trigger1 = random = 999
;trigger1 = prevstateno = 5120
;trigger1 = (enemy,numhelper > 1)||(enemy,numproj > 1)
trigger1 = random = 999
trigger1 = p2stateno = [3000,5000)

[State -1,defence]
type = ChangeState
value =  122
triggerall = statetype = A
triggerall = ctrl
triggerall = var(59) = 1
;triggerall = enemy,facing != facing
triggerall = alive
trigger6 = p2movetype = A
triggerall = p2stateno != [5050,5122]
trigger1 = random = 999
trigger1 = p2stateno = [3000,5000)

[State -1, crouching B]
type = ChangeState
value = 410 
triggerall = var(59) = 1 && ctrl
triggerall = PrevStateNo != 5120
triggerall = P2StateType != C && statetype != A && P2Statetype != L
triggerall = (P2bodydist X <= 35) && (P2bodydist Y = [-10,0])
triggerall = (P2MoveType != A) || (PrevStateNo = [151,153]) || (PrevStateNo = 140)
triggerall = P2life != 0
trigger1 = !var(50)
trigger2 = var(50)
trigger2 = Random = [0,500]

; stop AI walk
[State -1]
type = AssertSpecial
trigger1 = Var(59)
flag = NoWalk

[state -1]
type = ChangeState
triggerall = var(59) = 1 && ctrl
trigger1 = P2bodyDist X != [18,50]
trigger1 = RoundState != 3
trigger1 = Anim != 5
trigger1 = StateNo = 0
trigger1 = Pos Y = 0
value = 2044 ; AI walk loop state


;trigger3 = enemy, numproj = 1 && (enemy,time <= 12) ; mugen 414 2001 only
; jump D
[State -1]
type = ChangeState
value = 630
triggerall = statetype = A
triggerall = var(59) = 1 && ctrl
trigger1 = p2bodydist x >= 105 && Pos Y < -30
trigger1 = power < 1000
trigger1 = random

; Minute spike D
;[State -1]
;type = ChangeState
;value = 1305
;triggerall = var(59) >= 1 && ctrl
;triggerall = var(61) != 1
;triggerall = statetype != A
;triggerall = P2bodydist X = (36,60)
;trigger1 = P2stateno = (105,106)
;trigger2 = P2stateno = 40
;trigger2 = time < 2

; hop back
[State -1]
type = ChangeState
value = 355 + (BackEdgeDist < 125)*9939
triggerall = var(59) >= 1 && ctrl
triggerall = statetype != A
triggerall = BackEdgeDist >= 100 && (PrevStateNo != [105,107])
triggerall = P2movetype = I
trigger1 = FrontEdgeBodyDist <= 26
trigger1 = Random <= 100
trigger2 = P2bodydist X = [0,50]
trigger2 = P2StateNo = 5120
trigger2 = Random < 80
trigger3 = P2bodydist X = [30,40]
trigger3 = Random < 100

; Eine Trigger
[State -1, AIEineTrigger1]
type = ChangeState
value = 1006
triggerall = var(59) >= 1 && ctrl && (statetype != A)
triggerall = FrontEdgeBodyDist >= 26
trigger1 = P2bodydist X = (30,85)
trigger1 = P2statetype != A
trigger1 = enemynear,facing !=facing
trigger1 = random >= 900
trigger1 =  p2stateno != [5050,5122]
trigger2 = stateno = 420
trigger2 = time = 5
trigger2 = random <= 900
trigger2 = movehit
trigger3 = stateno = 270
trigger3 = time = 10
trigger3 = random <= 900
trigger3 = movehit
trigger4 = P2bodydist X = (10,65)
trigger4 = P2movetype = A
trigger4 = enemy,facing = facing
trigger4 = random = 999
trigger5 = P2bodydist X = (30,85)
trigger5 = P2movetype = A
trigger5 = enemynear,facing =facing
trigger5 = random >= 900
trigger5 =  p2stateno < 3000

; combo eine trigger
[state -1]
type = ChangeState
value = 1006
triggerall = var(59) && ctrl = 0
triggerall = movecontact
triggerall = (hitcount >= 2) || p2bodydist X >= 5
trigger1 = stateno = 400
trigger2 = stateno = 410

; 3300  chaindriver 2003 unhide AI
[State -1]
type = ChangeState
value = 3300
triggerall = ctrl && power >= 2000
triggerall = p2statetype != A && statetype != A 
triggerall = var(59) = 1 ; unhide AI
triggerall = (Prevstateno != 5120 || Prevstateno != 151 )|| Prevstateno != 150
triggerall = enemynear,animtime < -10-(p2bodydist X/10)
trigger1 = random <= 9411 && p2life > 500
trigger1 = p2bodydist X = [128,244] ; farthest possible is 255
trigger1 = p2movetype = A
trigger1 =  p2stateno != [3000,5000)
trigger2 = stateno = 420
trigger2 = time = 5
trigger2 = random <= 900
trigger2 = movehit
trigger2 =  p2stateno != [3000,5000)
trigger3 = enemy,facing = facing
trigger3 = p2movetype = A
trigger3 = random = 999
trigger1 = p2bodydist X = [58,254]


[State -1]
type = ChangeState
value = 3200
triggerall = enemynear,animtime < -10-(p2bodydist X/10)
triggerall = (Prevstateno != 5120 || Prevstateno != 151 )|| Prevstateno != 150
triggerall = ctrl && power >= 1000
triggerall = p2statetype != A && statetype != A 
triggerall = var(59) = 1 ; unhide AI
triggerall =  p2stateno != [3000,5000)
trigger1 = random < 711 && p2life > 300
trigger1 = p2bodydist X = [138,244] ; farthest possible is 255
trigger1 = p2movetype = A
trigger2 = stateno = 420
trigger2 = time = 5
trigger2 = movehit
trigger2 = random <= 900

;[State -1]
;type = ChangeState
;value = 1710
;triggerall = ctrl
;triggerall = p2statetype != A && statetype != A
;triggerall = var(59) = 1
;trigger1 = random <= 911
;trigger1 = p2bodydist X = [188,220]
;trigger1 = p2movetype = A

;[State -1]
;type = ChangeState
;value = 1710
;triggerall = ctrl
;triggerall = p2statetype != A && statetype != A
;triggerall = var(59) = 1
;trigger1 = random <= 911
;trigger1 = p2bodydist X = [140,220]
;trigger1 = p2movetype = A

[State -1]
type = ChangeState
value = 420
triggerall = p2statetype != A && p2bodydist X = [20,40]
trigger1 = P2movetype != A && var(59) = 1 && statetype != A && ctrl && random <= 999
;trigger2 =  P2movetype = A
trigger2 = var(59) = 1
trigger2 = ctrl
trigger2 = random = 999
trigger2 = enemy,facing = facing

[State -1]
type = ChangeState
value = 3100
triggerall = enemynear,facing = facing
trigger1 = p2statetype != A
trigger1 = p2bodydist X = (50,170]
trigger1 = power = [1000,2000)
trigger1 = enemynear,animtime < -15
trigger1 = P2movetype = A && var(59) = 1 && statetype != A && ctrl && random <= 999
trigger2 = p2statetype = A
trigger2 = p2bodydist Y = (-70,-50)
trigger2 = enemy,vel y > 0
trigger2 = p2bodydist X = (80,180]
trigger2 = power >= 1000
trigger2 = P2movetype = A && var(59) = 1 && statetype != A && ctrl && random <= 999
 
[State -1]
type = ChangeState
value = 1307
triggerall = statetype = A
trigger1 = movehit && stateno = 630 && var(59) = 1 && random <= 999 && time = 10
trigger2 = movehit && stateno = 1505 && var(59) = 1 && random <= 999 && time = 11


;[State -1]
;type = ChangeState
;value = 0
;triggerall = ctrl && statetype != A && var(59) = 1
;trigger1 = random <= 799
;trigger1 = p2stateno = [5050,5122]
;trigger1 = p2bodydist X >= 70

;[State -1]
;type = ChangeState
;value = 300
;triggerall = ctrl && statetype != A && var(59) = 1
;trigger1 = random <= 599 &&  p2stateno = [5050,5122]
;trigger1 = power < 3000
;trigger1= p2bodydist X >= 70

;=======================================
; AI anti boss
;=======================================

; blackout
;[State -1, 581]
;type = ChangeState
;value = 1710
;triggerall = var(59) = 1
;triggerall = statetype != A && ctrl
;trigger1 = p2movetype = I
;trigger1 = p2bodydist  X = 165
;trigger1 = random <= 300

[State -1]
type = ChangeState
value = 3250 ; SDM chain
triggerall = var(58) = 1
triggerall = statetype != A && ctrl && power >= 3000
trigger1 = p2stateno = 900 || p2stateno = 950
trigger1 = p2bodydist X > 43

; defense up
[State -1, 58571]
type = ChangeState
value = 120 + (p2statetype = C)*11
trigger1 = Var(58) = 1
trigger1 = RoundState = 2
trigger1 = alive = 1 && ctrl
trigger1 = p2movetype = A
trigger1 = p2statetype != C
trigger1 = statetype != A
trigger1 = ctrl = 1

[State-1]
type = ChangeState
value = 105 ; hop back
triggerall = var(58) = 1
triggerall = PrevStateNo != [105,107]
triggerall = statetype != A && ctrl
trigger1 = random <= 200
trigger1 = P2bodydist X = (195,209)
trigger2 = backedgedist > 60
trigger2 = P2bodydist X < 80
trigger2 = p2stateno = 5120; get up

[State -1]
type = ChangeState
value = 1503
trigger1 = var(58) = 1
trigger1 = statetype != A && ctrl
trigger1 = p2stateno = 100
trigger1 = p2bodydist X < 85


;=======================================
; AI walk state 2044
[Statedef 2044]
type    = S
physics = S
sprpriority = 0

;fwd
[State 2044, 1]
type = VelSet
trigger1 = Var(59)
trigger1 = P2BodyDist X >= 38
trigger1 = FrontEdgeDist >=50 
x = const(velocity.walk.fwd.x)

;bak
[State 2044, 2]
type = VelSet
triggerall = Var(59)
trigger1 = P2BodyDist X < 20
trigger1 = BackEdgeDist >= 45
;trigger2 = P2BodyDist X < 28 && P2Statetype = L
x = const(velocity.walk.back.x)

[State 2044, 3]
type = ChangeAnim
triggerall = vel x > 0
triggerall = var(59) = 1
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 2044, 4]
type = ChangeAnim
triggerall = vel x < 0
triggerall = var(59) = 1
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

; go back to neutral state
[State 2044, Ai end walk]
type = ChangeState
triggerall = Var(59)
triggerall = stateno != 0
trigger1 = P2BodyDist X > 195
trigger1 = P2BodyDist X < 35
trigger2 = P2MoveType = A
trigger2 = Vel X <= 0
trigger3 = RoundState = 3
trigger4 = Vel X = 0
trigger4 = Anim != 0
value = 0

; Black out b
[State -1,blackout b]
type = ChangeState
value =  1700
triggerall = var(59) = 1
triggerall = enemynear,facing != facing
triggerall = alive
triggerall = ctrl
triggerall = statetype != A
triggerall = p2stateno != [5050,5122]
triggerall = p2stateno < 3000
triggerall = Random <= 10
trigger1 = p2dist X=(70,130]
trigger1 = p2movetype = A
trigger1 = enemynear,animtime < -23
trigger1 = random <= 1
trigger1 = prevstateno != 5120
trigger2 = p2dist X=[50,130]
trigger3 = prevstateno = 5120
trigger3 = p2bodydist X=[0,60]
trigger3 = random <= 1
trigger3 = p2movetype = A
trigger4 = p2bodydist X=[0,60]
trigger4 = random <= 1
trigger4 = (prevstateno = 151 ||prevstateno = 150)
trigger5 = enemy,numproj > 0
trigger5 = p2movetype = A
trigger5 = p2dist X= (70,150]
trigger5 = random <= 1
trigger5 = p2stateno != [3000,5000)
trigger6 = p2movetype = A
trigger6 = (enemy,numhelper > 0)
trigger6 = p2dist X= (70,150]
trigger6 = random <= 1
trigger6 = p2stateno != [3000,5000)


[State -1,black out D]
type = ChangeState
value =  1710
triggerall = var(59) = 1
triggerall = enemy,facing != facing
triggerall = p2stateno < 3000
triggerall = ctrl
triggerall = statetype != A
triggerall = Random <= 10
trigger1 = p2bodydist X=[130,180]
trigger1 = p2movetype != A
trigger1 = alive
trigger1 = random <= 1
trigger1 = p2stateno != [5050,5122]
trigger2 = p2bodydist X < 0
trigger3 = backedgedist <= 50
trigger3 = p2bodydist X=[0,100]
trigger3 = random <= 1
trigger4 = p2bodydist X=[140,180]
trigger4 = p2movetype = A
trigger4 = random <= 1
trigger4 = p2stateno < 3000
trigger4 = enemynear,animtime < -33
trigger5 = p2stateno = [3000,5000)
trigger5 = (enemy,numhelper < 2)||(enemy,numproj < 2)
trigger5 = random <= 1
trigger6 = p2bodydist X=[140,250]
trigger6 = p2movetype != A
trigger6 = alive
trigger6 = random <= 1
trigger6 = p2stateno != [5050,5122]
trigger7 = enemy,numproj > 0
trigger7 = p2dist X= (130,350]
trigger7 = random <= 1
trigger7 = p2movetype = A
trigger7 = p2stateno != [3000,5000)
trigger8 = (enemy,numhelper > 0)
trigger8 = p2dist X= (130,450]
trigger8 = random <= 1
trigger8 = p2movetype = A
trigger8 = p2stateno != [3000,5000)



[State -1,dodge forward]
type = ChangeState
value =  110
triggerall = var(59) = 1
triggerall = enemy,facing != facing
triggerall = alive
trigger1 = p2dist X= (0,70]
trigger1 = enemynear,animtime < -20
trigger1 = p2movetype = A
trigger1 = random = 999
trigger2 = enemy,numproj > 0
trigger2 = p2dist X= (0,90]
trigger2 = random = 999
trigger2 = p2stateno != [3000,5000)
trigger3 = (enemy,numhelper > 0) || (EnemyNear,vel x >= 5)
trigger3 = p2dist X= (0,90]
trigger3 = random = 999
trigger3 = p2stateno != [3000,5000)

[State -1,dodge backward]
type = ChangeState
value =  355
triggerall = var(59) = 1
triggerall = enemy,facing != facing
triggerall = backedgedist <= 60
triggerall = alive
trigger1 = p2dist X= (0,90]
trigger1 = enemynear,animtime >= -23
trigger1 = (enemy,numhelper = 0) && (EnemyNear,vel x < 5)
trigger1 = p2movetype = A
trigger1 = p2stateno != [3000,5000)
trigger1 = random <= 499
trigger2 = p2dist X= (0,90]
trigger2 = enemynear,animtime >= -23
trigger2 = p2movetype = A
trigger2 = p2stateno != [3000,5000)
trigger2 = random <= 499
trigger2 = enemy,numproj > 0

;[State -1,m]
;type = ChangeState
;value = 380
;triggerall = p2statetype = S && p2bodydist X = [0,10]
;trigger1 = var(59) = 1 && statetype != A && ctrl && random <= 999 && p2stateno != [5050,5122]

[State -1,T]
type = ChangeState
value = 990
triggerall = p2statetype = A
triggerall = p2bodydist X = [40,120]
triggerall = p2stateno != [5050,5122]
triggerall = power >= 1000
trigger1 = var(59) = 1
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = random <= 999
trigger1 = enemy,vel y > 0
trigger1 = p2bodydist Y = (-120,-40)

[State -1,T]
type = ChangeState
value = 990
trigger1 = p2statetype = A
trigger1 = p2bodydist Y = (-90,-20)
trigger1 = enemynear,vel y > 0
trigger1 = enemynear,vel x >= -3
trigger1 = p2bodydist X = (0,80]
trigger1 = power >= 1000
trigger1 = P2movetype = A && var(59) = 1 && statetype != A && ctrl && random <= 999

[State -1,N]
type = ChangeState
value = 3100
triggerall = p2statetype = A && p2bodydist X = [50,240]
triggerall = p2stateno != [5050,5122]
triggerall = power >= 1000
trigger1 = var(59) = 1 && statetype != A && ctrl && random <= 999 && p2bodydist Y = (-70,-30)
trigger1 = enemy,vel y > 0

;[State -1,O]
;type = ChangeState
;value = 3300
;triggerall = p2statetype = A && p2bodydist X = [50,240]
;triggerall = p2stateno != [5050,5122]
;triggerall = power >= 2000
;trigger1 = var(59) = 1 && statetype != A && ctrl && random <= 999
;p2bodydist Y = (-100,-30)
;trigger1 = enemy,vel y > 0

[State -1,m]
type = ChangeState
value =  1305
triggerall = var(59) = 1
triggerall = Vel Y > 0
triggerall = p2bodydist X=[30,150]
triggerall = power <= 1000
triggerall = p2movetype != A
triggerall = alive
triggerall = random <= 999
trigger1 = p2bodydist Y=[-40,-10]
trigger1 = p2stateno != [5050,5122]

;[State -1,throw d]
;type = ChangeState
;value = 380
;triggerall = var(59) = 1
;triggerall = statetype = A
;trigger1 = movehit
;trigger1 = stateno = 1700
;trigger1 = var(59) = 1
;trigger1 = random <= 999
;trigger1 = p2bodydist X=[0,2]
;trigger1 = movehit
;trigger2 = stateno = 1720
;trigger2 = var(59) = 1
;trigger2 = random <= 999
;trigger2 = p2bodydist X=[0,2]

;[State -1,throw c]
;type = ChangeState
;value = 370
;triggerall = var(59) = 1
;triggerall = statetype = A
;trigger1 = movehit
;trigger1 = stateno = 1700
;trigger1 = var(59) = 1
;trigger1 = random <= 999
;trigger1 = p2bodydist X=[0,2]
;trigger1 = movehit
;trigger2 = stateno = 1720
;trigger2 = var(59) = 1
;trigger2 = random <= 999
;trigger2 = p2bodydist X=[0,2]

[State -1,close c]
type = ChangeState
value =  270
triggerall = p2statetype = S
trigger1 = p2bodydist X = [2,20]
trigger1 = var(59) = 1 && statetype != A && ctrl && random = 999 && p2stateno != [5050,5122]
trigger1 = p2movetype != A
trigger2 = P2movetype = A
trigger2 = p2bodydist X = [0,20]
trigger2 = var(59) = 1
trigger2 = ctrl
trigger2 = random = 999
trigger2 = enemy,facing = facing



[State -1,big close c]
type = ChangeState
value = 975
triggerall = p2statetype = S && p2bodydist X = [2,15]
trigger1 = power >= 3000
trigger1 = var(59) = 1 && statetype != A && ctrl && random <= 999 && p2stateno != [5050,5122]
trigger1 = p2movetype != A

;[State -1,throw c]
;type = ChangeState
;value = 370
;triggerall = p2statetype = S
;trigger1 = var(59) = 1
;trigger1 = p2bodydist X = [0,2]
;trigger1 = statetype != A
;trigger1 = ctrl
;trigger1 = random = 999
;trigger1 = p2stateno != [5050,5122]

;[State -1,throw d]
;type = ChangeState
;value = 380
;triggerall = p2statetype = S
;trigger1 = var(59) = 1
;trigger1 = p2bodydist X = [0,2]
;trigger1 = statetype != A
;trigger1 = ctrl
;trigger1 = random = 999
;trigger1 = p2stateno != [5050,5122]

[State -1, dodge when near]
type = ChangeState
value = 355
triggerall = ctrl && statetype != A && var(59) = 1
trigger1 = p2bodydist X = [1,40]
trigger1 = random <= 999 &&  p2stateno = [5050,5122]

[State -1,m]
type = ChangeState
value =  1305
triggerall = var(59) = 1
triggerall = Vel Y > 0
triggerall = p2bodydist X=[30,150]
triggerall = power <= 1000
triggerall = p2movetype != A
triggerall = alive
triggerall = random <= 999
trigger1 = p2bodydist Y=[-40,-10]
trigger1 = p2stateno != [5050,5122]

[State -1,m]
type = ChangeState
value =  950
triggerall = life >= 900
triggerall = enemynear,life < 200
trigger1 = p2stateno = [5050,5122]








;[State -1,m]
;type = ChangeState
;value =  1700
;triggerall = var(59) = 1
;trigger1 = p2bodydist X >0
;trigger1 = p2bodydist x < 0
;trigger1 = random <= 999
;trigger2 = p2bodydist X >0
;trigger2 = p2bodydist x < 0
;trigger2 = random <= 999


;[State -1,m]
;type = ChangeState
;value =  1700
;triggerall = var(59) = 1
;trigger1 = p2bodydist X=[2, 90]
;trigger1 = backEdgeBodyDist < 30
;trigger1 = p2movetype != A
;trigger1 = alive


;ﾁｬﾕﾐ
[State -1,narow spike]
type = ChangeState
value = 13505
triggerall = var(59) = 1
triggerall = statetype = A
;triggerall = p2bodydist X=[30,80]
trigger1 = stateno = 1301
trigger1 = time = 4
trigger1 = var(59) = 1
trigger1 = random <= 999
trigger2 = stateno = 1306
trigger2 = var(59) = 1
trigger2 = random <= 999
trigger2 = time = 4
trigger2 = !ctrl

[State -1,O]
type = ChangeState
value = 1307
triggerall = p2statetype = A && p2bodydist X = [50,100]
triggerall = p2stateno != [5050,5122]
trigger1 = var(59) = 1
trigger1 = pos Y = [-10,0]
trigger1 = vel y > 0

;____________________________________________________________________
;[state -1, memory shala b]
;type = VarSet
;trigger1 = Var(59) = 1
;trigger1 = PrevStateNo = 1300
;trigger1 = MoveType = H ; when countered
;trigger1 = time = 0
;ignorehitpause = 1
;var(61) = 1

[state -1, memory crawbite a]
type = VarSet
trigger1 = Var(59) = 1
trigger1 = PrevStateNo = 1500
trigger1 = MoveType = H ; when countered
trigger1 = time = 0
ignorehitpause = 1
var(62) = 1

[state -1, memory crawbite c]
type = VarSet
trigger1 = Var(59) = 1
trigger1 = PrevStateNo = 1503
trigger1 = MoveType = H ; when countered
trigger1 = time = 0
ignorehitpause = 1
var(63) = 1




[State -1,]
type = ChangeState
value = 3011
triggerall = random <= 999
triggerall = power >= 3000
triggerall = roundstate = 2
triggerall = var(59)
triggerall = p2bodydist x = [0,300]
triggerall = movehit
trigger1 = stateno = 315
trigger2 = stateno = 1020
trigger2 = Time >= 49
trigger3 = stateno = 215
trigger4 = stateno = 245
trigger5 = stateno = 400
trigger6 = stateno = 410

[State AI]
type = ChangeState
value = 3011
triggerall = var(59)
triggerall = power >= 3000
triggerall = random <= 999
triggerall = roundstate = 2
triggerall = p2statetype != A
triggerall = p2statetype != L
triggerall = p2stateno != [5050,5122]
triggerall = ctrl && statetype != A
triggerall = p2bodydist x = [0,300]
triggerall = p2movetype = A
triggerall = statetype = S
trigger1 = ctrl
trigger1 = p2movetype != H

[State AI]
type = ChangeState
value = 3011
triggerall = var(59)
triggerall = random <= 999
triggerall = power >= 3000
triggerall = roundstate = 2
triggerall = p2statetype != A
triggerall = p2statetype != L
triggerall = p2stateno != [5050,5122]
triggerall = ctrl && statetype != A
triggerall = p2bodydist x = [0,300]
triggerall = p2movetype = A
triggerall = statetype = S
trigger1 = ctrl && enemynear,Numhelper && statetype != A && random = [10,300]
trigger1 = p2movetype != H
