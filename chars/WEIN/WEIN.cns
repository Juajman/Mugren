[Data]
life = 1500
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 38
airjuggle = 10
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 0
IntPersistIndex = (40,43),55
power=3000

[Size]
;xscale = 0.40
xscale = 0.33
yscale = 0.40
ground.back = 16
ground.front = 16
stand.height = 70
head.pos = -5,-90
mid.pos = -10,-60
air.back = 15
air.front = 15
z.width = 3
attack.width = 0
attack.dist = 160
proj.attack.dist = 90

[Velocity]
walk.fwd  = 1.8      
walk.back = -1.2
run.fwd      = 6, 0
run.back     = -6,-4
jump.neu = 0,-11.5    
jump.back = -2,1   
jump.fwd = 3.2,1      
runjump.back = -1.9,-7.5 
runjump.fwd = 3.7,-7.5    
airjump.neu = 0,-8.1      
airjump.back = 1.5     
airjump.fwd = 1.9

[Movement]
airjump.num=0
airjump.height=35
yaccel=0.583
crouch.friction=0.82
stand.friction=0.85


;=================================================================
; 99 jumping system
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0

[State 40, turn]
type = turn
trigger1 = time = 0 && P2dist X < 0

[State 40, Disable AI jump]
type = ChangeState
trigger1 = Var(59)= 1
trigger1 = time = 0
trigger1 = Pos Y = 0
value = 355 + (BackEdgeDist < 50)*1345; dodge back
ctrl = 1

[State 40, 0]
type = VarSet
trigger1 = Time = 0
var(8) = 0

[State 40, 1]
type = VarSet
triggerall = !var(59)
trigger1 = command = "holdfwd"
trigger1 = var(8) != 2
var(8) = 1

[State 40, 2]
type = VarSet
triggerall = !var(59)
trigger1 = command = "holdback"
trigger1 = var(8) != -2
var(8) = -1

[State 40, 3]
type = VarSet
triggerall = !var(59)
triggerall = Time = 0
triggerall = command = "holdfwd"
trigger1 = command = "longjump"
trigger2 = prevstateno = 100 ;RUN_FWD
var(8) = 2

[State 40, 4]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
trigger1 = command = "holdback"
trigger1 = command = "longjump"
var(8) = -2

[State 40, 5]
type = Afterimage
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
time = 15
length = 6
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1
FrameGap = 4
Trans = Add1

[State 40, 6]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = var(8) != 0
trigger1 = var(8) != 1
trigger1 = var(8) != -1
trigger1 = command = "holdup"
trigger2 = command != "holdup"
value = 2041

[State 40, 7]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(var(8)=0, const(velocity.jump.neu.x), ifelse(var(8)>0, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 50; + (var(59) = 1)*1991
ctrl = 1

;---------------------------------------------------------------------------
; JUMP_UP (short)
[Statedef 2041]
type    = A
physics = A
velset = 0, -8
ctrl = 1

;[State 2041, AI anim]
;type = ChangeAnim
;triggerall = var(59)
;trigger1 = Time = 0
;trigger1 = Vel X = 0
;value = 2041

;[State 2041, AI anim]
;type = ChangeAnim
;triggerall = var(59)
;trigger1 = Time = 0
;trigger1 = Vel X >  0
;value = 2042

;[State 2041, 1] ; Play sound when jumping (normal)
;type = PlaySnd
;trigger1 = Time = 0
;trigger1 = var(8) != -2
;trigger1 = var(8) != 2
;value = 40,0

[State 2041, 2] ; Play sound when jumping (long)
type = PlaySnd
triggerall = Time = 0
trigger1 = var(8) = -2
trigger2 = var(8) = 2
value = 2041,0

[State 2041, 3] ; Shadows
type = Afterimage
triggerall = Time = 0
trigger1 = var(8) = -2
trigger2 = var(8) = 2
time = 17
length = 9
PalBright   =   0,  0,  0
PalContrast = 128,128,128
PalAdd      =   0,  0,  0
PalMul      =  1,1,1;.9, .9, .9
FrameGap = 3
Trans = Add1

[State 2041, 4] ; Shadows off
type = Afterimage
trigger1 = Time = 14
time = 0

[State 2041, 5] ;Holding up?
type = VelSet
triggerall = !var(59)
trigger1 = Time = 0
trigger1 = command = "holdup"
y = -10

[State 2041, 6]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = 1
x = 3.4

[State 2041, 7]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = 2
x = 4.6

[State 2041, 8]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = -1
x = -3.4

[State 2041, 9]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = -2
x = -4.6

[State 2041, 10]
type = ChangeAnim
triggerall = !var(59)
trigger1 = Time = 0
trigger1 = Vel X = 0
trigger1 = command = "holdup"
value = 41

[State 2041, 11] ;Short
type = ChangeAnim
triggerall = !var(59)
trigger1 = Time = 0
trigger1 = Vel X = 0
trigger1 = command != "holdup"
value = 2041

[State 2041, 12]
type = ChangeAnim
triggerall = !var(59)
trigger1 = Time = 0
trigger1 = Vel X > 0
trigger1 = command = "holdup"
value = 42

[State 2041, 13] ;Short
type = ChangeAnim
triggerall = !var(59)
trigger1 = Time = 0
trigger1 = Vel X > 0
trigger1 = command != "holdup"
value = 2042

[State 2041, 3.1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X < 0
value = 43

;---------------------------------------------------------------------------
; Jump Up for gravity
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 1.5]
type = veladd
trigger1 = Time >= 22
y = 0.3

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;--------------
; Jump Landing
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 52, 1]
type = Playsnd
trigger1 = Time = 0
value = 47,0

[State 52, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 3]
type = changestate
trigger1 = time = 1 && command = "holdup"
value = 40
ctrl = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------

; 100 running
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1

[State 100, AI run]
type = ChangeState
trigger1 = var(59)
trigger1 = PrevStateNo != 10044 && PrevStateNo != 100
value = 10044 ; AI temp run state

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100,3]
type = playsnd
trigger1 = time = 0
trigger1 = !var(59) ; prevent double run sound for AI
value = 100,0
channel = 4
loop = 1

[State 100, 4]
type = StopSnd
trigger1 = (command != "holdfwd") && (time >= 12)
channel = 4

[State 100, 3]
type = ChangeState
trigger1 = (command != "holdfwd") && (time >= 12)
value = 101
ctrl = 0

;---------------------------------------------------------------------------

; 10044 AI run state
; can only access if var(59) is activated
[Statedef 10044]
type    = S
physics = S
anim = 100
sprpriority = 1

[State 10044, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 10044, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 10044,3]
type = playsnd
trigger1 = time = 0
value = 100,0
channel = 4
loop = 1

[State 100, 4]
type = StopSnd
trigger1 = (p2bodydist X <= 85) && (time >= 12)
channel = 4

[State 10044, 3]
type = ChangeState
trigger1 = (p2bodydist X <= 85) && (time >= 12)
value = 101 ; run friction
ctrl = 0

;---------------------------------------------------------------------------
;  101 slide
[Statedef 101]
type = S
physics = S
anim = 101

[State 101, 1]
type = VelSet
trigger1 = Time = 0
x = 2

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
; hopback - start
[Statedef 105]
type = S
movetype = I
physics = S
anim = 105
velset = 0
ctrl = 0

[State 105, 1]
type = PlaySnd
trigger1 = Time = 2
value = 105,0

[State 105, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 106

[State 105, 1]
type = ChangeState
trigger1 = var(59) = 1
trigger1 = Time = 0
value = 360

; hopback in air
[Statedef 106]
type = A
movetype = I
physics = N
anim = 106
velset = -6,-2.4

[State 106, 2]
type = VelAdd
trigger1 = Time > 0
y = 0.4

[State 106, 3]
type = ChangeState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 107

; hopback landing
[Statedef 107]
type = S
movetype = I
physics = S
anim = 107
velset = 0,0

[State 107, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 107, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------
; dodge forward 110
[Statedef 110]
type    = S
movetype= I
physics = S
velset = 0,0,0
ctrl = 0
anim = 10000
sprpriority = -1

[State 110, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1700, 1

[State 110, 1]
type = Afterimage
trigger1 = Time = 3
time = 10
length = 5
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1
FrameGap = 4
Trans = Add1

[State 110, Vel Y]
type = VelSet
trigger1 = Time >= 2
x = 7

[State 110, 3]
type = VelSet
trigger1 = Time >= 19
x = 0

[State 110, 4]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 110, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------
; 111 dodge forward attack
[Statedef 111]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0
ctrl = 0
anim = 351

[State 111, 1]
type = PlaySnd
trigger1 = Time = 1
value = 400,0

[State 111, 1]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 111, 1]
type = VelSet
trigger1 = Time >= 0
x = 0

[State 111, 2]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 10

[State 111, 3]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage    = 50
guardflag = MA
pausetime = 12,12
sparkno = 2
sparkxy = -20,-60
hitsound   = S220,0
guardsound = S150,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -6
air.animtype = Back
air.velocity = -3,-4

[State 111, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;--------------------------------------------------------
; 112 dodge forward during guard
[Statedef 112]
type    = S
movetype= I
physics = N
velset = 0,0,0
ctrl = 0
anim = 352
power = -1000

[State 112, 4]
type = Explod
trigger1 = time = 0
anim = F800
pos = 30,-90
sprpriority = 2
bindtime = 1
ownpal = 1

[State 112, 3] ;Flash
type = EnvColor
Trigger1 = Time = 0
value = 240,240,240
under = 1
time = 3

[State 112, 1]
type = PlaySnd
trigger1 = Time = 0
value = 400,0

[State 112, afterimage]
type = AfterImage
trigger1 = time = 17
time = 16
Trans = Add1
length = 14

[State 112, Vel X]
type = VelSet
trigger1 = animelemtime(4) >= 1
trigger1 = animelemtime(7) <= 1
x = 6

[State 112, Vel X]
type = VelSet
trigger1 = animelem = 8
x = 0

[State 112, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 112, 4]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 112, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;--------------------------------------------------------
; 113 dodge backward during guard
[Statedef 113]
type    = S
movetype= I
physics = N
velset = 0,0,0
ctrl = 0
anim = 353
poweradd = -1000

[State 113, 4]
type = Explod
trigger1 = time = 0
anim = F800
pos = 30,-90
sprpriority = 2
bindtime = 1
ownpal = 1

[State 113, 3] ;Flash
type = EnvColor
Trigger1 = Time = 0
value = 240,240,240
under = 1
time = 3

[State 113, 1]
type = PlaySnd
trigger1 = Time = 0
value = 400,0

[State 113, afterimage]
type = AfterImage
trigger1 = time = 10
time = 16
Trans = Add1
length = 14

[State 113, Vel Y]
type = VelSet
trigger1 = animelemtime(4) >= 1
trigger1 = animelemtime(7) <= 5
x = -6

[State 112, Vel X]
type = VelSet
trigger1 = animelem = 8
x = 0

[State 113, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 113, 4]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 113, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;Œã•û‹Ù‹}‰ñ”ð
[Statedef 355]
type    = S
movetype= I
physics = N
velset = 0,0,0
ctrl = 0
anim = 10001

[State 110, 1]
type = PlaySnd
trigger1 = Time = 1
value = 1700, 1

[State 355, 1]
type = VelSet
trigger1 = time >= 2
x = -6

[State 355, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 355, 1]
type = Afterimage
trigger1 = Time = 5
time = 10
length = 5
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1
FrameGap = 4
Trans = Add1

[State 355, 2]
type = VelSet
trigger1 = Time >= 20
x = 0

[State 355, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; overwrite common state 120, KOF pre-guard state
; GUARD (start) 
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = statetype = S
value = 130

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = statetype = C
value = 131

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = statetype = A
value = 132

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 120, 5]
type = ChangeAnim
triggerall = Anim != 135
triggerall = time >= 0
trigger1 = P2stateno != [400,410]
trigger1 = P2stateno = (210,999) 
trigger1 = P2dist X < 35
trigger2 = p2stateno >= 1000
value = 135 ; hard guard

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
trigger1 = Anim != 135
value = 130

;------------------------------------------------------------------
; Time over
[Statedef 170]
type = S
anim = 170

[state 19000: 	assertspecial] 
type = assertspecial
trigger1 = 1
flag = intro
flag2 = nomusic

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S99,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S99,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 20
value = S99,2



[State 170, 1]
type = AssertSpecial
trigger1 = Time = [0,230]
flag = RoundNotOver

;---------------
; winning pose
[Statedef 180]
type = S


[State 180, 1]
type = ChangeState
trigger1 = animtime = 0
value = 182

[State 180, 1]
type = ChangeState
trigger1 = animtime = 0
value = 181





;-----------------
; Win pose A
[Statedef 181]
type = S
physics = S
velset = 0
anim = 181

[state 19000: 	assertspecial] 
type = assertspecial
trigger1 = 1
flag = intro
flag2 = nomusic

[State 181, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S99,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 46
value = S99,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 55
value = S99,5


[State 840,0]
type = envcolor
trigger1 = Time = [452,650]
time = 200
value = 0,0,0
under = -1
ignorehitpause = 1


[State 181, 2]
type = Explod
trigger1 = animelem = 55
anim = 6000
pos = 0,-100
supermove = 1
scale = 0.50,0.50
sprpriority = 2
bindtime = 1
removetime = 160
shadow = 64,64,64
ownpal = 1

[State 181, 2]
type = Explod
trigger1 = animelem = 55
anim = 6001
pos = 0,-100
supermove = 1
scale = 0.50,0.50
sprpriority = 2
bindtime = 1
removetime = 160
shadow = 64,64,64
ownpal = 1

[State 181, 6]
type = AssertSpecial
trigger1 = Time = [0,650]
flag = RoundNotOver

[State 181, 7]
type = varset
trigger1 = animtime = 0
var(1) = 0

;------------
; Win pose B
[Statedef 182]
type = S
physics = S
velset = 0
anim = 182

[state 19000: 	assertspecial] 
type = assertspecial
trigger1 = 1
flag = intro
flag2 = nomusic

[State 181, 2]
type = Explod
trigger1 = animelem = 31
anim = 6002
pos = -200,0
supermove = 1
scale = 0.30,0.40
sprpriority = 2
bindtime = 1
vel = 5,0
removetime = 40
shadow = 64,64,64
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = TIME = 340
anim = 6003
ID =  6003
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 124
pausemovetime = 0
scale = 0.30,0.40
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;trans =
;persistent =
;supermove = 0
;pausemove = 0

[State 181, 2]
type = Explod
trigger1 = TIME= 464;474
anim = 6002
pos = 0,0
supermove = 1
scale = 0.30,0.40
sprpriority = 2
bindtime = 1
vel = 5,0
removetime = 60
shadow = 64,64,64
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = TIME = 382
value = S99,10


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S99,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 30
value = S99,7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 33
value = S99,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 31
value = S99,9





[State 182, 3]
type = AssertSpecial
trigger1 = Time = [0,480]
flag = RoundNotOver



;-----------------
; Win pose C
[Statedef 183]
type = S
physics = S
velset = 0
anim = 183

[state 19000: 	assertspecial] 
type = assertspecial
trigger1 = 1
flag = intro
flag2 = nomusic

[State 183, 0]
type = PlaySnd
trigger1 = Time = 4
trigger1 = var(41) != 1
trigger1 = var(42) != 1
value = 183,0

[State 183, 0]
type = PlaySnd
trigger1 = Time = 4
trigger1 = var(41) = 1
trigger1 = var(42) != 1
value = 221,20

[State 183, 0]
type = PlaySnd
trigger1 = animelem = 6,10
trigger1 = var(42) = 1
value = 3000,0

[State 183, 1]
type = AssertSpecial
trigger1 = Time = [0,150]
flag = RoundNotOver

[State 183, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 183, 3]
type = varset
trigger1 = animtime = 0
var(1) = 0

;-----------------
; Win pose D(vs KULA By NAO&M.)
[Statedef 184]
type = S
physics = S
velset = 0
anim = 182

[state 19000: 	assertspecial] 
type = assertspecial
trigger1 = 1
flag = intro
flag2 = nomusic

[State 183, 0]
type = PlaySnd
trigger1 = animelem = 14
value = 221,21

[State 183, 1]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver

[State 183, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 183, 3]
type = varset
trigger1 = animtime = 0
var(1) = 0


;-----------------
; Win pose E
[Statedef 185]
type = S
physics = S
velset = 0
anim = 185

[state 19000: 	assertspecial] 
type = assertspecial
trigger1 = 1
flag = intro
flag2 = nomusic

[State 183, 1]
type = AssertSpecial
trigger1 = Time = [0,150]
flag = RoundNotOver

[State 183, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 183, 3]
type = varset
trigger1 = animtime = 0
var(1) = 0


;============================
; intro
[Statedef 191]
type = S
movetype = I
physics = S
velset = 0
anim = 191

[state 19000: 	assertspecial] 
type = assertspecial
trigger1 = 1
flag = intro
flag2 = nomusic

[State 191, 1]
type = ChangeState
triggerall = Time = 0
trigger1 = (p2name = "RAUL") || (p4name = "RAUL")
value = 192

[State 191, 1]
type = ChangeState
triggerall = Time = 0
trigger1 = (p2name = "KENSHIRO") || (p4name = "KENSHIRO")
value = 193

[State 191, 1] ;va vari
type = ChangeState
triggerall = Time = 0
trigger1 = (p2name = "RIUGA") || (p4name = "RIUGA")
trigger2 = (p2name = "RIUKEN") || (p4name = "RIUKEN")
trigger3 = (p2name = "SHUREN") || (p4name = "SHUREN")
trigger4 = (p2name = "RIACO") || (p4name = "RIACO")
trigger5 = (p2name = "FUDO DIAVOLO") || (p4name = "FUDO DIAVOLO")
trigger6 = (p2name = "FUDO") || (p4name = "FUDO")
trigger7 = (p2name = "AIN") || (p4name = "AIN")
trigger8 = (p2name = "SORIA") || (p4name = "SORIA")
trigger9 = (p2name = "BORZ") || (p4name = "BORZ")
trigger10 = (p2name = "TIGE") || (p4name = "TIGE")
trigger11 = (p2name = "PIRATA ROSSO") || (p4name = "PIRATA ROSSO")
trigger12 = (p2name = "ORK") || (p4name = "ORK")
trigger13 = (p2name = "ALF") || (p4name = "ALF")
trigger14 = (p2name = "CESAR") || (p4name = "CESAR")
trigger15 = (p2name = "JUKEI") || (p4name = "JUKEI")
trigger16 = (p2name = "YASHA NERO") || (p4name = "YASHA NERO")
trigger17 = (p2name = "RONN") || (p4name = "RONN")
trigger18 = (p2name = "KAIOHELMO") || (p4name = "KAIOHELMO")
trigger19 = (p2name = "KAIOH") || (p4name = "KAIOH")
trigger20 = (p2name = "KAIOHH") || (p4name = "KAIOHH")
value = 0

[State 191, 1]
type = ChangeState
triggerall = Time = 0
trigger1 = (p2name = "FUDO SPENCER") || (p4name = "FUDO SPENCER")
value = 100000

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 192, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 99,49

[State 191, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0

; VS RAUL
[Statedef 192]
type = S
movetype = I
physics = S
velset = 0
anim = 192

[state 19000: 	assertspecial] 
type = assertspecial
trigger1 = 1
flag = intro
flag2 = nomusic

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 99,14

[State 191, 3]
type = PlaySnd
trigger1 = AnimElem = 28
value = 99,50

[State 191, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0

;-----------------------------------------------
[State 181, 2]
type = Explod
trigger1 = animelem = 93
anim = 6002
pos = 0,0
supermove = 1
scale = 0.40,0.40
sprpriority = 2
bindtime = 1
vel = 5,0
removetime = 60
shadow = 64,64,64
ownpal = 1


[State 192, 3]
type = ChangeState
trigger1 = AnimELEM = 93
value = 40

;-----------------------------------------------------vs FUDO SPENCER
[Statedef 100000]
type = S
ctrl = 0
anim = 100000
velset = 0,0

[state 19000: 	assertspecial] 
type = assertspecial
trigger1 = 1
flag = intro
flag2 = nomusic

[State 201, 2]
type = AssertSpecial
trigger1 = 1;time = [0,180]
flag = Intro

[State 201, 1]
type = playsnd
trigger1 = animelem = 1
value = S99,53

[State 201, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0

;-----------------------------------------------------vs Kenshiro
[Statedef 193]
type = S
ctrl = 0
anim = 193
velset = 0,0

[state 19000: 	assertspecial] 
type = assertspecial
trigger1 = 1
flag = intro
flag2 = nomusic

[State 201, 2]
type = AssertSpecial
trigger1 = 1;time = [0,180]
flag = Intro

[State 201, 1]
type = playsnd
trigger1 = animelem = 1
value = S99,51

[State 201, 1]
type = playsnd
trigger1 = animelem = 20
value = S99,52

[State 201, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------


;--------------------------

;=============================
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 970
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 970]
type = PlaySnd
trigger1 = Time = 5
value = 5210,0
channel = 3

[State Snd];
type = ctrlset
trigger1 = time = 150
value = 1

[State 970]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;============================================================
; ¤pµ´©Û eine trigger 
;============================================================
; 1000 iron trigger
[Statedef 1000]
type    = S
movetype= A
physics = S
ctrl = 0
poweradd = 63
anim = 1000
velset = 0,0,0

[State 1000, var]
type = varset
trigger1 = time = 0
var(2) = 0

[State 1000, 0] ; voice
type = PlaySnd
trigger1 = Time = 0
value = 99,18

[State 1000, 0] ;flame burst
type = PlaySnd
trigger1 = AnimElem = 10
value = 99,19


[State 1000, 1]
type = Projectile
trigger1 = AnimElem = 10
ProjAnim = 6000
ProjID = 6000
ProjHitAnim = -1
ProjRemoveTime = 150
projhits = 20
offset = 0,40
projscale = 0.40,0.70
accel = 0, 0
hitflag = MA
guardflag = MA
attr = S, SP
projshadow = 68,68,68
damage = 5,1
animtype = Hard
getpower = 104
givepower = 50
pausetime = 4,3
sparkno = 0
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 2
ground.hittime = 2
ground.velocity = -5.9
guard.velocity = -10.9
airguard.velocity = -4.0,-3.0
air.velocity = -4,-5
;air.juggle = 1 + var(12)
air.fall = 1
projhits = 20
air.recover = 0
fall.recover = 0 
air.animtype = Back
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10 
envshake.ampl = 3

[State 1000, 1]
type = Projectile
trigger1 = AnimElem = 10
ProjAnim = 6001
ProjID = 6001
ProjHitAnim = -1
projhits = 20
ProjRemoveTime = 150
offset = 0,40
projscale = 0.40,0.70
accel = 0, 0
hitflag = MA
guardflag = MA
attr = S, SP
projshadow = 68,68,68
damage = 5,1 ;125,20
animtype = Hard
getpower = 104
givepower = 50
pausetime = 4,3
sparkno = 0
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 2
ground.hittime = 2
ground.velocity = -5.9
guard.velocity = -10.9
airguard.velocity = -4.0,-3.0
air.velocity = -4,-5
;air.juggle = 1 + var(12)
air.fall = 1
air.recover = 0
fall.recover = 0
air.animtype = Back
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 3



; AI use Shell 
[State 1000, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = Animtime = 0
triggerall = P2statetype != C
trigger1 = FrontEdgeDist <= 100
trigger2 = P2statetype = A && p2stateno != [105,107] 
trigger2 = P2BodyDist X = [0,135]
trigger2 = P2BodyDist Y = [-99,0]
trigger2 = P2stateno != (105,106)
trigger3 = projhit1001 = 1
trigger3 = P2bodydist X = (0,72)
value = 1040

; gogo: i have to break up this state into two parts because
; this is the only way to make the AI check for eine trigger AND blackout together 
; simutanouesly.

; AI use Shoot  1st use
[State 1000, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = Animtime = 0
trigger1 = projhit1001 = 1
trigger1 = FrontEdgeDist > 50
trigger2 = p2bodydist X >= 160 ;126, 175 max range for AI eine trigger use
trigger3 = p2statetype = C
trigger4 = p2stateno = (105,106)
value = 1010 + (p2bodydist X > 120)
ctrl = 0

; AI use 2nd shoot 2nd use
[State 1000, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = Animtime = 0
trigger1 = p2bodydist X = (15,89)
trigger1 = p2statetype != A
trigger1 = FrontEdgeDist >= 88
trigger2 = ProjGuarded1001 = 1
value = 1010 + (FrontEdgeDist <= 88 && P2statetype = S && P2movetype = H)*30
ctrl = 0

; AI use Eine blackout B
[State 1000, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = Animtime = 0
;trigger1 = projhit1001 != 1
;trigger1 = projcontact1001 != 1
trigger1 = p2bodydist X = (90,159) 
trigger1 = FrontEdgeDist >= 100
trigger2 = p2bodydist X < 0 ; when opponent is behind
value = 1720 - (projhit1001 = 1 || p2movetype = H)*710
ctrl = 0
ignorehitpause = 1

[State 1000, 3]   ;shell
type = ChangeState
trigger1 = (var(2) = 1) && (Animtime = 0)
value = 1040
ctrl = 0

[State 1000, 3]   ;second shoot
type = ChangeState
trigger1 = (var(2) = 2) && (Animtime = 0)
value = 1010

[State 1000, 3]   ;blackout B
type = ChangeState
trigger1 = (var(2) = 3) && (Animtime = 0)
value = 1720
ctrl = 0

[State 1000, 3]   ;blackout D
type = ChangeState
trigger1 = (var(2) = 4) && (Animtime = 0)
value = 1730
ctrl = 0

[State 1000, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 1005
ctrl = 0

;---------------
; end of eine trigger
[Statedef 1005]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 1005
velset = 0,0,0

[State 1005, 1]
type = Explod
trigger1 = time = 0
anim = 1002 ;fire end
bindtime = 1
postype = P1
pos = 4,-45
sprpriority = 2

[State 1005 , 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
; 1006 Eine Trigger C
[Statedef 1006]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 1000
poweradd = 63
velset = 0,0,0

[State 1006, var-reset]
type = varset
trigger1 = time = 0
var(2) = 0

[State 1000, 0] ; voice
type = PlaySnd
trigger1 = Time = 0
value = 99,18

[State 1000, 0] ;flame burst
type = PlaySnd
trigger1 = AnimElem = 10
value = 99,19

[State 1000, 1]
type = Projectile
trigger1 = AnimElem = 10
ProjAnim = 6000
ProjID = 6000
ProjHitAnim = -1
ProjRemoveTime = 160
projhits = 20
offset = 0,40
projscale = 0.40,0.70
accel = 0, 0
hitflag = MA
guardflag = MA
attr = S, SP
projshadow = 68,68,68
damage = 5,1
animtype = Hard
getpower = 104
givepower = 50
pausetime = 4,3
sparkno = 0
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 2
ground.hittime = 2
ground.velocity = -5.9
guard.velocity = -10.9
airguard.velocity = -4.0,-3.0
air.velocity = -4,-5
;air.juggle = 1 + var(12)
air.fall = 1
projhits = 20
air.recover = 0
fall.recover = 0
air.animtype = Back
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 3

[State 1000, 1]
type = Projectile
trigger1 = AnimElem = 10
ProjAnim = 6001
ProjID = 6001
ProjHitAnim = -1
projhits = 20
ProjRemoveTime = 160
offset = 0,40
projscale = 0.40,0.70
accel = 0, 0
hitflag = MA
guardflag = MA
attr = S, SP
projshadow = 68,68,68
damage = 5,1 ;125,20
animtype = Hard
getpower = 104
givepower = 50
pausetime = 4,3
sparkno = 0
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 2
ground.hittime = 2
ground.velocity = -5.9
guard.velocity = -10.9
airguard.velocity = -4.0,-3.0
air.velocity = -4,-5
;air.juggle = 1 + var(12)
air.fall = 1
air.recover = 0
fall.recover = 0
air.animtype = Back
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 3

; AI use Shell 
[State 1006, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = Animtime = 0
;trigger1 = projhit1001 = 1
trigger1 = p2bodydist X < 65
trigger1 = p2stateno != [5050,5122]
;trigger1 = P2statetype != c
trigger1 =p2movetype = h
value = 1040
ctrl = 0

[State 1006, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = Animtime = -1
trigger1 = p2stateno != [5050,5122]
;trigger1 = P2statetype = C
trigger1 =p2movetype = h
trigger1 = p2bodydist X >= 65
;trigger2 = projhit1001 = 1
value = 1011
ctrl = 0

;Ai use wocao
[State 1006, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = Animtime = -4
trigger1 =p2movetype != h
;trigger1 = projhit1001 = 0
trigger1 = p2bodydist X = (-100, 100)
trigger1 = enemy,facing != facing
value = 1720
ctrl = 0

[State 1006, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = Animtime = -4
trigger1 = enemy,facing != facing
trigger1 = p2stateno != [5050,5122]
trigger1 =p2movetype != h
;trigger1 = projhit1001 = 0
trigger1 = p2bodydist X = (100, 180)
value = 1730
ctrl = 0

[State 1006, 2]   ;second shoot fast type
type = ChangeState
trigger1 = (var(2) = 2) && (Animtime = 0)
value = 1011

[State 1006, 3]   ;shell
type = ChangeState
trigger1 = (var(2) = 1) && (Animtime = 0)
value = 1040
ctrl = 0

[State 1006, 3]   ;blackout B
type = ChangeState
trigger1 = (var(2) = 3) && (Animtime = 0)
value = 1720
ctrl = 0

[State 1006, 3]   ;blackout D
type = ChangeState
trigger1 = (var(2) = 4) && (Animtime = 0)
value = 1730
ctrl = 0

[State 1006, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 1005
ctrl = 0


;----------------------
; fwd Kick_B second shoot
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1010
poweradd = 42
velset = 0,0,0

[State 40, 5]
type = Afterimage
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
time = 15
length = 6
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1
FrameGap = 4
Trans = Add1

[State 1000, 0]
type = PlaySnd
trigger1 = animelem = 5
value = 99,22

[State 1000, 0]
type = PlaySnd
trigger1 = AnimElem = 2
value = 99,23

[State 1010, 1]
type = varset
trigger1 = time = 0
var(2) = 0

[State 1010, 2]
type = posadd
trigger1 = animelem = 3
trigger2 = animelem = 4
x = 8

[State 1010, 3]
type = posadd
trigger1 = animelem = 7
trigger2 = animelem = 8
x = -8

[State 1010, 4]
type = Explod
trigger1 = time = 0
Anim = 1003
Removetime = 24
Bindtime = 1
pos = 4,0
shadow = 68,68,68
sprpriority = 2

[State 1010, 5]
type = Projectile
trigger1 = AnimElem= 5
ProjAnim = 1020
ProjID = 1020
offset = 80,-70
velocity = 4,0
accel = 0, 0
projhits = 10
projscale = 1,0.50
attr = S, SP
projshadow = 68,68,68
damage = 20,5
animtype = Hard
getpower = 42
givepower = 50
guardflag = MA,L
pausetime = 0,8
guard.pausetime = 0,7
sparkno = -1
sparkxy = -1
hitsound = S99,24
guardsound = -1
ground.type = High
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -9
guard.velocity = -8 ; -4
airguard.velocity = -4.0,-3.0
air.velocity = -2.5,-5.5
air.juggle = 1 ;+ var(12)
air.animtype = Back
air.recover = 0
fall.recover = 0 
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 12 
envshake.ampl = 3

[State 1010, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
; fwd Kick_B second shoot (hard)
[Statedef 1011]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 3011
poweradd = 42
velset = 0,0,0

[State 40, 5]
type = Afterimage
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
time = 15
length = 6
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1
FrameGap = 4
Trans = Add1

[State 1011, 1]
type = varset
trigger1 = time = 0
var(2) = 0

[State 1000, 0]
type = PlaySnd
trigger1 = animelem = 5
value = 99,22

[State 1000, 0]
type = PlaySnd
trigger1 = AnimElem = 2
value = 99,23

[State 1011, 2]
type = posadd
trigger1 = animelem = 3
trigger2 = animelem = 4
x = 8

[State 1011, 3]
type = posadd
trigger1 = animelem = 7
trigger2 = animelem = 8
x = -8

[State 1010, 4]
type = Explod
trigger1 = time = 0
Anim = 1003
Removetime = 24
Bindtime = 1
pos = 4,0
shadow = 68,68,68
sprpriority = 2

[State 1010, 5]
type = Projectile
trigger1 = AnimElem= 5
ProjAnim = 1020
ProjID = 1020
offset = 80,-70
velocity = 7,0
accel = 0, 0
projhits = 10
projscale = 1,0.50
attr = S, SP
projshadow = 68,68,68
damage = 20,5
animtype = Hard
getpower = 42
givepower = 50
guardflag = MA,L
pausetime = 0,8
guard.pausetime = 0,7
sparkno = -1
sparkxy = -1
hitsound = S99,24
guardsound = -1
ground.type = High
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -9
guard.velocity = -8 ; -4
airguard.velocity = -4.0,-3.0
air.velocity = -2.5,-5.5
air.juggle = 1 ;+ var(12)
air.animtype = Back
air.recover = 0
fall.recover = 0
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 12
envshake.ampl = 3


[State 1011, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------
; 1040 fwd_D shell
[Statedef 1040]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 1040
poweradd = 42
velset = 0,0,0

[State 1040, 0]
type = PlaySnd
trigger1 = Time = 1
value = 221,8

[State 1040, 0]
type = PlaySnd
trigger1 = animelem = 5
value = 1040,0

[State 1040, 1]
type = varset
trigger1 = time = 0
var(2) = 0

[State 1040, Nothitby]
type = NotHitBy
trigger1 = Time = 5
value = SA
time = 3

[State 1040, 2]
type = explod
trigger1 = time = 0
Anim = 1003
Removetime = 7
bindtime = 1
pos = 4, -45
sprpriority = 2
shadow = 68,68,68

[State 1040, 4]
type = Projectile
trigger1 = AnimElem = 5
ProjRemoveTime = 13
ProjAnim = 1030
ProjHitAnim = 1030
ProjID = 1030
offset = 50,0  ; 54, -120
velocity = 0,0;    0,-1.4
accel = 0, 0
projhits = 10
attr = S, SP
hitflag = MA;F
guardflag = M ; MA
projshadow = 68,68,68
damage = 10,5
animtype = Hard
getpower = 42
givepower = 50
guardflag = MA,L
pausetime = 6,14
guard.pausetime = 0,8
sparkno = 0
yaccel = 0.48
hitsound = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -1.5, -10    ; -1.3,-10
air.velocity = -1.5, -10           ; -1.3,-9
air.juggle = 1 + var(13)
air.animtype = Back
fall = 0
air.fall = 0
fall.recover = 0
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
P2stateno = 1041
envshake.time = 14 
envshake.ampl = 3

; auto AI use
; heat drive combo, if not enough power, see def 2999
[State 1040, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = time = 36
trigger1 = p2movetype = H
;trigger1 = projhit1030 = 1
value = 6661

;[State 1040, 5]
[State 1040, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------
;been hit by 2nd shell
[Statedef 1041]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1041, 0]
type = ChangeAnim2
trigger1 = hitshakeover = 0
value = 1041

[State 1041, 0]
type = ForceFeedBack
trigger1 = hitshakeover = 0
time = 1
waveform = square

[State 1041, 0]
type = ChangeState
trigger1 = hitshakeover = 1
value = 1042

;part2
[Statedef 1042]
type = A
movetype= H
physics = N
ctrl = 0

[State 1042, 0]
type = changeanim2
trigger1 = time = 0
value = 1041

[State 1042, 2]
type = ChangeAnim
trigger1 = anim = 1041
trigger1 = animtime = 0
trigger1 = AnimExist(5035)
value = 5030

[State 1042, 2]
type = ChangeAnim
trigger1 = anim = 5030
trigger1 = animtime = 0
trigger1 = AnimExist(5035)
value = 5035

[State 1042, 2]
type = ChangeAnim
triggerall = Anim = 5030 || Anim = 5035
trigger1 = AnimTime = 0
trigger1 = AnimExist(5050)
value = 5050

[State 1042, 2]
type = ChangeAnim
triggerall = Anim = 5050
trigger1 = AnimTime = 0
trigger1 = AnimExist(5060)
value = 5060

[State 1042, 0]
type = HitVelSet
trigger1 = time = 0
x = 1
y = 1

[State 1042, 1]
type = VelAdd
trigger1 = 1
y = ifelse( GetHitVar(yaccel)!=0 , GetHitVar(yaccel) , 0.45)

[State 1042, 10]
type = selfstate
trigger1 = Vel Y > 0
trigger1 = Pos Y > 15
value = 5100



;-----------------------------------------------------------
; 1500 uppercut craw bite A
[Statedef 1500]
type	= S
movetype= A
physics = S
poweradd = 125
ctrl = 0
velset = 0,0,0
anim = 1500
juggle = 7

[State 1500, burn]
type = varset
trigger1 = movehit
var(3) = 1

[State 1500, 0]
type = PlaySnd
trigger1 = Time = 0
value = 99,25

[State 1500, 0]
type = PlaySnd
trigger1 = Time = 0
value = 99,28



[State 1500, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 7 ; 10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
x = 8







[State 1500, 3]
type = HitDef
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger2 = !movecontact
trigger3 = animelem = 3
trigger3 = !movecontact
attr = S, SA
animtype = Medium
damage = 100,12
getpower = 63
sparkno = 1
priority = 6
guardflag = M
yaccel = 0.5
sparkxy = -10,-55
pausetime = 9,9
hitsound = S99,26
guardsound = S150,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2.0,-10
guard.velocity = -3.5
air.velocity = -2.0,-10
air.animtype = Back
fall = 1
fall.recover = 0
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10 
envshake.ampl = 2

[State 1500, 4]
type = HitDef
trigger1 = animelem = 6
attr = S, SA
animtype = Medium
damage = 40,12
getpower = 42
sparkno = 1
priority = 6
guardflag = M
yaccel = 0.5
sparkxy = -10,-55
pausetime = 10,10
hitsound = S99,26
guardsound = S150,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -3.0 + (movehit)*1,-10
guard.velocity = -4.0
air.velocity = -2.0,-10
air.animtype = Back
fall = 1
fall.recover = 0
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10 
envshake.ampl = 3



[State 1500, 4]
type = varset
trigger1 = movecontact
var(1) = 1

[State 1500, CMcancel]
type = ChangeState
trigger1 = command = "EZheatdriver"
trigger1 = var(6) != 0
value = 3400
ctrl = 0

[State 1500, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 1501

;------------------In Air
[Statedef 1501]
type = A
movetype = A
physics = N
juggle = 8
anim = 1501
velset = 1,-7

[State 1500, burn]
type = varset
trigger1 = movehit
var(3) = 1

[State 1501, 2]
type = VelAdd
trigger1 = Time > 0
y = 0.40



[State 1501, 6]
type = HitDef
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
trigger6 = animelem = 6
trigger7 = animelem = 7
trigger8 = animelem = 8
attr = A, SA
animtype = Hard
damage = 15,5
getpower = 63
sparkno = 2
sparkxy = 0,-60
hitflag = MAF
guardflag = MA
yaccel = 0.5
pausetime = 8,8
hitsound = S99,27
guardsound = S150,1
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -1.5,-10
air.velocity = -1.5,-10
air.animtype = Back
fall = 1
fall.recover = 0
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 12 
envshake.ampl = 3

[State 1501, 7]
type = varset
trigger1 = animtime = 0
var(1) = 0

[State 1501, 8]
type = ChangeState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 312
ctrl = 0

;===========================================================
; 1503 uppercut_C crow bite C
[Statedef 1503]
type	= S
movetype= A
physics = S
poweradd = 125
ctrl = 0
velset = 0,0,0
anim = 1500
juggle = 4 + var(13)

[State 1500, 0]
type = PlaySnd
trigger1 = Time = 0
value = 99,25

[State 1500, 0]
type = PlaySnd
trigger1 = Time = 0
value = 99,28

[State 1503, 1]
type = HitBy
trigger1 = Time = 3
value = SCA, SA,HA,AP
time = 13

[State 1500, burn]
type = varset
trigger1 = movehit
var(3) = 1

[State 1503, 2]
type = PosAdd
trigger1 = AnimElemtime(4) = 0
trigger2 = AnimElemtime(5) = 0
x = 8

[State 1503, 2]
type = PosAdd
trigger1 = AnimElemtime(5) = 1
x = 7

[State 1503, 2]
type = PosAdd
trigger1 = AnimElemtime(6) = 0
trigger2 = AnimElemtime(6) = 1
x = 5


[State 1503, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5 && !movecontact
attr = S, SA
animtype = Medium
damage = 42,9
getpower = 63
guardflag = M ; MA
sparkno = 1
sparkxy = -10,-55
pausetime = 6,8
hitsound = S99,26
guardsound = S150,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5   ;,-6   no Y velocity on firsrt hit
air.velocity = -5,-6
air.animtype = Back
fall.recover = 0
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 12 
envshake.ampl = 3

[State 1503, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
animtype = Medium
damage = 42,9
getpower = 63
guardflag = M ; MA
sparkno = 1
sparkxy = -10,-55
pausetime = 6,8
hitsound = S99,26
guardsound = S150,1
ground.type = Low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -5,-6.5  ; X -4 Y  -6
air.velocity = -5,-6
air.animtype = Back
fall = 1
fall.recover = 0
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 12 
envshake.ampl = 3





[State 1503, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 1504

;------------------In Air
[Statedef 1504]
type = A
movetype = A
physics = N
anim = 1501
velset = 5, -10
juggle = 2

[State 1504, 1]
type = VelAdd
trigger1 = Time > 0
y = 0.55

[State 1500, burn]
type = varset
trigger1 = movehit
var(3) = 1

[State 1504, var-reset]
type = varset
trigger1 = time = 0
var(2) = 0

[State 1504, 4]
type = HitDef
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
trigger6 = animelem = 6
trigger7 = animelem = 7
trigger8 = animelem = 8
attr = A, SA
animtype = Hard
damage = 17,5
getpower = 63
sparkno = 2
sparkxy = 0,-60
pausetime = 6,8
guardflag = MA
hitsound = S99,26
guardsound = S150,1
ground.slidetime = 10
ground.hittime = 5
ground.velocity = -3,-7
air.velocity = -4,-7
air.animtype = Back
fall = 1
fall.recover = 0
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 14 
envshake.ampl = 3

[State 1504, 4]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = AnimElem = 3, = 4
trigger1 = movecontact
value = 1505
ctrl = 0

[State 1504, 5]
type = ChangeState
trigger1 = (var(2) = 1) && (AnimElem = 3, = 4)
value = 1505

[State 1504, 5]
type = ChangeState
trigger1 = (var(2) = 2) && (AnimElem = 3, = 4)
value = 1505

[State 1504, 6]
type = ChangeState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 312
ctrl = 0

;--------------------
;1505 fwd_D in air
[Statedef 1505]
type = A
movetype = A
physics = N
anim = 1505
poweradd = 42
juggle = 2

[State 1505 , 4]
type = VelAdd
trigger1 = Time > 0
y = 0.45

[State 1500, burn]
type = varset
trigger1 = movehit
var(3) = 1

[State 1000, 0]
type = PlaySnd
trigger1 = Time = 2
value = 400,1




[State 1505 , 6]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = (AnimElem = 5) && (!movecontact)
trigger3 = (AnimElem = 6) && (!movecontact)
attr = A, SA
animtype = Hard
damage = 40,9
getpower = 42
sparkno = 2
guardflag = MA
sparkxy = 0,-60
pausetime = 8,8
hitsound = S220,0
guardsound = S150,1
ground.slidetime = 15
ground.hittime = 15
ground.velocity = 0,7
air.velocity = -7,-2
air.animtype = Back
fall = 1
fall.recover = 0
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 14 
envshake.ampl = 3

[State 1505 , 10]
type = ChangeState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 312
ctrl = 0

;===========================
; 1300 shala! minute bike B startup
[Statedef 1300]
type	= S
movetype= I
physics = S
poweradd = 146
ctrl = 0
velset = 0,0,0
anim = 1300

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S99,30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S99,22

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 15
value = S99,31




[State 1000, 1]
type = Projectile
trigger1 = AnimElem = 15
ProjAnim = 1303
ProjID = 1303
ProjHitAnim = -1
ProjRemoveTime = 60
projhits = 10
offset = 5,-310
projscale = 1.5,1.5
accel = 0, 0
hitflag = MA
guardflag = MA
attr = S, SP
projshadow = 68,68,68
damage = 30,6
animtype = Hard
getpower = 104
givepower = 50
pausetime = 4,3
sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -5.9
guard.velocity = -10.9
airguard.velocity = -4.0,-3.0
air.velocity = -4,-5
;air.juggle = 1 + var(12)
air.fall = 1
projhits = 20
air.recover = 0
fall.recover = 0
air.animtype = Back
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 3

[State 1000, 1]
type = Projectile
trigger1 = AnimElem = 16
ProjAnim = 1303
ProjID = 1303
ProjHitAnim = -1
ProjRemoveTime = 30
projhits = 10
offset = 5,-310
projscale = 1.5,1.5
accel = 0, 0
hitflag = MA
guardflag = MA
attr = S, SP
projshadow = 68,68,68
damage = 50,10
animtype = Hard
getpower = 104
givepower = 50
pausetime = 4,3
sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -5.9
guard.velocity = -10.9
airguard.velocity = -4.0,-3.0
air.velocity = -4,-5
fall = 1
;air.juggle = 1 + var(12)
air.fall = 1
projhits = 20
air.recover = 0
fall.recover = 0
air.animtype = Back
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 3






;ai optional forbidden
[State 280, 1]
type = ChangeState
triggerall = var(59) = 1
triggerall = var(61) = 1
trigger1 = time = 0
value = 0
ctrl = 0



[State 1300, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; 1301 minute spike B attack
[Statedef 1301]
type	= A
movetype= A
physics = N
ctrl = 0
anim = 1306
juggle = 9
velset = 6,-1.2

[State 1300, 0]
type = PlaySnd
trigger1 = Time = 0
value = 1300,1

[State 1301, 1]
type = PosAdd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
x = 8

[State 1301, 2]
type = VelAdd
trigger1 = Time > 7
y = .55

[State 1301, 3]
type = velset
trigger1 = time = 14
x = 3

[State 1301, 4]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
trigger3 = AnimElem = 7
trigger4 = AnimElem = 8
trigger2 = (animelem = 6) && (!movecontact)
attr = A, SA
animtype = diagup
damage = 50,20
getpower = 63
guardflag = MA
pausetime = 10,12
sparkxy = -10,-70
yaccel = 0.45
hitsound = S240,0
guardsound = S150,1
guard.velocity = -14 
ground.slidetime = 8
ground.hittime = 8
ground.velocity = -5 ,-7
air.velocity = -5,-4
airguard.velocity = -3,-2
fall = 1
fall.recover = 0
envshake.time = 12 
envshake.ampl = 3

;ai narow spike
[State 1301, ai narow]
type = ChangeState
trigger1 = var(59) = 1
trigger1 = !p2statetype = a
trigger1 =  p2bodydist x = [50,80]
value = 13505
ctrl = 0

[State 1301, 5]
type = ChangeState
trigger1 = var(59) = 1
trigger1 = !p2statetype = a
trigger1 =  movehit
trigger1 = animtime = 0
value = 990
ctrl = 0

[State 1301, 5]
type = ChangeState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 312
ctrl = 0










;----------------------------
; 1302 Air Minute Spike B
[Statedef 1302]
type	= A
movetype= A
physics = N
ctrl = 0
anim = 1306
poweradd = 146
;juggle = 10
velset = 0,0,0

[State 1300, 0]
type = PlaySnd
trigger1 = Time = 0
value = 1300,1

[State 1301, 1]
type = PosAdd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
x = 8

[State 1301, 2]
type = VelAdd
trigger1 = Time > 7
y = .55

[State 1301, 3]
type = velset
trigger1 = time = 14
x = 3

[State 1301, 4]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
trigger3 = AnimElem = 7
trigger4 = AnimElem = 8
trigger2 = (animelem = 6) && (!movecontact)
attr = A, SA
animtype = diagup
damage = 50,20
getpower = 63
guardflag = MA
pausetime = 10,12
sparkxy = -10,-70
yaccel = 0.45
hitsound = S240,0
guardsound = S150,1
guard.velocity = -14
ground.slidetime = 8
ground.hittime = 8
ground.velocity = -5 ,-7
air.velocity = -5,-4
airguard.velocity = -3,-2
fall = 1
fall.recover = 0
envshake.time = 12
envshake.ampl = 3

;ai narow spike
[State 1301, ai narow]
type = ChangeState
trigger1 = var(59) = 1
trigger1 = !p2statetype = a
trigger1 =  p2bodydist x = [50,80]
value = 13505
ctrl = 0

[State 1301, 5]
type = ChangeState
trigger1 = var(59) = 1
trigger1 = !p2statetype = a
trigger1 =  movehit
trigger1 = animtime = 0
value = 990
ctrl = 0

[State 1301, 5]
type = ChangeState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 312
ctrl = 0

;===========================================================
; 1305 shala! Minute Bike D startup
[Statedef 1305]
type	= S
movetype= I
physics = S
poweradd = 146
ctrl = 0
velset = 0,0,0
anim = 1305

[State 1300,0]
type = ReversalDef
trigger1 = time >= 0
reversal.attr = SA,NA,SA
numhits = 0
pausetime = 15,20
sparkno = 40
hitsound = 6,0

[State 1305, 1]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 8

[State 1305, 0]
type = PlaySnd
trigger1 = Time = 0
value = 99,23

[State 1305, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 1306

; 1306 shala! Minute Spike D attack
[Statedef 1306]
type	= A
movetype= A
physics = N
ctrl = 0
anim = 1306
velset = 8,-2
juggle = 9

[State 1305, 0]
type = PlaySnd
trigger1 = Time = 0
value = 1300,1

[State 1306, 1]
type = PosAdd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = animelem = 9
x = 8

[State 1306, 2]
type = VelAdd
trigger1 = Time > 7
y = .55

[State 1306, 3]
type = velset
trigger1 = time = 15
x = 3

[State 1306, 4]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
animtype = diagup
guardflag = MA
damage = 60,20
getpower = 63
sparkno = 2
sparkxy = 0,-60
yaccel = 0.45
pausetime = 10,12
hitsound = S240,0
guardsound = S150,1
guard.velocity = -14
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -6 ,-7
air.velocity = -7,-7
fall = 0
fall.recover = 0
envshake.time = 14 
envshake.ampl = 3

[State 1306, 4]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
trigger3 = AnimElem = 8
attr = A, SA
animtype = diagup
guardflag = MA
damage = 40,20
getpower = 63
sparkno = 2
sparkxy = 0,-60
yaccel = 0.45
pausetime = 10,12
hitsound = S240,0
guardsound = S150,1
guard.velocity = -14
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -6 ,-7
air.velocity = -7,-7
fall = 1
fall.recover = 0
envshake.time = 14
envshake.ampl = 3

[State 1306, 5]
type = ChangeState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 312
ctrl = 0

;----------------------------
; 1307 Air Minute Spike D
[Statedef 1307]
type	= A
movetype= A
physics = N
ctrl = 0
anim = 1306
poweradd = 146
;juggle = 10
velset = 0,0,0

[State 1307,0]
type = ReversalDef
trigger1 = time >= 0
reversal.attr = SA,NA,SA
numhits = 0
pausetime = 12,20
sparkno = 40
hitsound = 6,0

[State 1307, 1]
type = Velset
trigger1 = animelem = 3
x = 9
y = -2

[State 1300, 0]
type = PlaySnd
trigger1 = Time = 0
value = 2400,0

[State 1300, 0]
type = PlaySnd
trigger1 = Time = 6
value = 1300,1

[State 1307, 2]
type = PosAdd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = animelem = 9
x = 10

[State 1307, 3]
type = Veladd
trigger1 = Time > 11
y = 0.52

[State 1307, 3]
type = Veladd
trigger1 = Time > 15
x = -0.3

[State 1306, 4]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
animtype = diagup
guardflag = MA
damage = 60,20
getpower = 63
sparkno = 2
sparkxy = 0,-60
yaccel = 0.45
pausetime = 10,12
hitsound = S240,0
guardsound = S150,1
guard.velocity = -14
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -6 ,-7
air.velocity = -7,-7
fall = 0
fall.recover = 0
envshake.time = 14
envshake.ampl = 3

[State 1306, 4]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
trigger3 = AnimElem = 8
attr = A, SA
animtype = diagup
guardflag = MA
damage = 40,20
getpower = 63
sparkno = 2
sparkxy = 0,-60
yaccel = 0.45
pausetime = 10,12
hitsound = S240,0
guardsound = S150,1
guard.velocity = -14
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -6 ,-7
air.velocity = -7,-7
fall = 1
fall.recover = 0
envshake.time = 14
envshake.ampl = 3

[State 1307, 6]
type = ChangeState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 312
ctrl = 0

;---------------------------------------
; 1700 blackout B Normal
[Statedef 1700]
type = S
movetype = I
physics = N
anim = 1700
poweradd = 83
velset = 0
ctrl = 0

[State 1700, 0]
type = PlaySnd
trigger1 = Time = 0
value = 99,32

[State 1700, 0]
type = PlaySnd
trigger1 = animelem = 3, = 3
value = 1700,1

[State 1700, posadd]
type = posadd
trigger1 = animelemtime (12) = 1
trigger2 = animelemtime (12) = 2
trigger3 = animelemtime (13) = 1
x = 4

[State 1700, posadd]
type = posadd
trigger1 = animelemtime (13) = 0
trigger2 = animelemtime (13) = 2
trigger3 = animelemtime (13) = 3
trigger4 = animtime = 0
x = 3

[State 1700, posadd]
type = posadd
trigger1 = animelemtime (3) = 3
trigger2 = animelemtime (11) = 1
x = 5

[State 1700, posadd]
type = posadd
trigger1 = animelemtime (11) = 2
x = 9

[State 1700, posadd]
type = posadd
trigger1 = animelemtime (4) = 0
trigger2 = animelemtime (9) = 0
trigger3 = animelemtime (12) = 0
x = 21

[State 1700, 1]
type = VelSet
trigger1 = AnimElemtime (4) >= 1
trigger1 = AnimElemTime (8) <= 0
x = 5

[State 1700, 1]
type = VelSet
trigger1 = AnimElemTime (8) = 1
x = 0

[State 1700, posadd]
type = posadd
trigger1 = animelemtime (10) = 0
trigger2 = animelemtime (11) = 0
x = 13

[State 1700, 3]
type = PlayerPush
trigger1 = Time <= 22
value = 0

[State 1700, 4]
type = AfterImage
trigger1 = AnimElem = 5, = 0
time = 12
length = 5
framegap = 3
PalBright   = 0,0,0
PalContrast = 255,255,255

[State 1700, turn]
type = turn
trigger1 = animtime = 1 && P2dist X < 0

[State 1700, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; --------------------------------------------
; 1710 blackout D Normal
[Statedef 1710]
type = S
movetype = I
physics = N
anim = 1700
velset = 0
poweradd = 83
ctrl = 0

[State 1710, turn]
type = turn
trigger1 = animtime = 0 && P2dist X < 0

[State 1710, 0]
type = PlaySnd
trigger1 = Time = 0
value = 99,32

[State 1710, 0]
type = PlaySnd
trigger1 = animelem = 3, = 3
value = 1700,1

[State 1710, velset]
type = velset
trigger1 = animelemtime(9) = 0
x = 0

[State 1710, posadd]
type = posadd
trigger1 = animelemtime(3) = 4
trigger2 = animelemtime(4) = 1
trigger3 = animelemtime(9) = 1
x = 10

[State 1710, posadd]
type = posadd
trigger1 = animelemtime(4) = 0
trigger2 = animelemtime(9) = 0
x = 26

[State 1710, posadd]
type = posadd
trigger1 = animelemtime(10) = 0
x = 17

[State 1710, posadd]
type = posadd
trigger1 = animelemtime(12) = 0
x = 11

[State 1710, posadd]
type = posadd
trigger1 = animelemtime(13) = 1
trigger2 = animelemtime(13) = 2
x = 5

[State 1710, posadd]
type = posadd
trigger1 = animelemtime(13) = 3
trigger2 = animelemtime(13) = 4
x = 4

[State 1710, posadd]
type = posadd
trigger1 = animelemtime(12) = 1
trigger2 = animelemtime(12) = 2
trigger3 = animelemtime(13) = 0
x = 5

[State 1710, posadd]
type = posadd
trigger1 = animelemtime(11) = 0
x = 17

[State 1710, velset]
type = velset
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(8) <= 1
x = 10

[State 1710, 3]
type = PlayerPush
trigger1 = Time <= 36
value = 0

[State 1710, 4]
type = AfterImage
trigger1 = AnimElem = 4, = 1
time = 10
framegap = 4
length = 6
PalBright   = 0,0,0
PalContrast = 255,255,255

[State 1710, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------
; 1720 blackoutB after eine / iron trigger
[Statedef 1720]
type = S
movetype = A
physics = N
anim = 1720
poweradd = 42
velset = 0,0
ctrl = 0

[State 1720, turn]
type = turn
trigger1 = animtime = 0 && P2dist X < 0

[State 1720, 1]
type = explod
triggerall = time = 0
trigger1 = (prevstateno = 1000) || (prevstateno = 1006)
Anim = 1002
bindtime = 1
pos = 4,-45
shadow = 68,68,68
sprpriority = 2

[State 1720, shadow]
type = AfterImage
trigger1 = AnimElem = 4, = 0
time = 10
length = 5
framegap = 4
PalBright   = 0,0,0
PalContrast = 255,255,255

[State 1720, 0]
type = PlaySnd
trigger1 = Time = 0
value = 1700,2

[State 1720, 0]
type = PlaySnd
trigger1 = animelem = 3, = 3
value = 1700,1

[State 1720, 0]
type = varset
trigger1 = time = 0
var(2) = 0

[State 1720, 1]
type = VelSet
trigger1 = AnimElem = 3, = 2
x = 12 

[State 1720, 2]
type = Veladd
trigger1 = AnimElem = 3, > 2
x = -0.4

[State 1720, 3]
type = PlayerPush
trigger1 = Time <= 24
value = 0

[State 1720, 5]
type = VelSet
trigger1 = AnimElem = 13, = 0
x = 0

[State 1720, AIkoko]
type= changestate
trigger1 = var(59) = 1
trigger1 = AnimTime = 0 && statetype != A
trigger1 = P2bodydist X = (8,35)
trigger1 = P2movetype != A && P2statetype != L && P2statetype != C
trigger1 = stateno != 409 || stateno != 410
value = 409 ; stand to crouch temporay state

[State 1720, AIkoko]
type= changestate
trigger1 = var(59) = 1
trigger1 = AnimTime = 0 && statetype != A
trigger1 = P2bodydist X = (5,8)
trigger1 = P2movetype != A && P2statetype != L && P2statetype = C
value = 420 ; crouch HP

[State 1720, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------
; 1730 blackout D after iron trigger
[Statedef 1730]
type = S
movetype = A
physics = N
anim = 1730
velset = 0
poweradd = 42
ctrl = 0

[State 1730, turn]
type = turn
trigger1 = animtime = 0 && P2dist X < 0

[State 1730,0]
type = explod
triggerall = time = 0
trigger1 = (prevstateno = 1000) || (prevstateno = 1006)
Anim = 1002
bindtime = 1
pos = 4,-45
shadow = 68,68,68
sprpriority = 2

[State 1730, shadow]
type = AfterImage
trigger1 = AnimElem = 4, = 0
time = 14
length = 7
framegap = 4
PalBright   = 0,0,0
PalContrast = 255,255,255

[State 1730, 0]
type = PlaySnd
trigger1 = Time = 0
value = 1700,2

[State 1730, 0]
type = PlaySnd
trigger1 = animelem = 3, = 3
value = 1700,1

[State 1730, 0]
type = varset
trigger1 = animtime = 0
var(2) = 0

[State 1730, 1]
type = VelSet
trigger1 = AnimElem = 3, = 3
x = 15

[State 1730, 2]
type = VelAdd
trigger1 = AnimElem = 3, > 3
x = -0.42

[State 1730, 3]
type = PlayerPush
trigger1 = Time <= 26
value = 0

[State 1730, 5]
type = VelSet
trigger1 = AnimElem = 13, = 0
x = 0

[State 1730, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================
;===========================================================
; Standing light punch
[Statedef 200]
type = S
movetype = A
physics = S
anim = 200
velset = 0
ctrl = 0
juggle = 9 + var(33)

;ai forbidden
[State 280, 1]
type = ChangeState
triggerall = var(59) = 1
trigger1 = time = 0
value = 410

[State 200, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 400)
value = 400,0

[State 200, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 200, 3]
type = HitDef
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = Light
damage    = 30
givepower = 63
guardflag = M
pausetime = 12,12
sparkno = 1
sparkxy = -15,-86
hitsound   = S200,0
guardsound = S150,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -5
ground.cornerpush = 1
air.velocity = -3,-1
air.cornerpush = 1
air.animtype = Back
air.fall = 1
fall.recover = 0 

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; standing light kick
[Statedef 210]
type = S
movetype = A
physics = S
anim = 210
velset = 0,0
ctrl = 0
juggle = 9

;ai forbidden
[State 280, 1]
type = ChangeState
triggerall = var(59) = 1
trigger1 = time = 0
value = 410

[State 210, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 400)
value = 400,0

[State 210, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1

[State 210, 3]
type = HitDef
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = Light
damage    = 30
givepower = 63
guardflag = L
pausetime = 12,12
sparkno = 1
sparkxy = -10,-46
hitsound   = S210,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -5
ground.cornerpush = 1
air.velocity = -3,-1
air.cornerpush = 1
air.animtype = Back
air.fall = 1
fall.recover = 0 

[State 210, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------
; Standing strong punch (far)
[Statedef 220]
type = S
movetype = A
physics = S
anim = 220
velset = 0
ctrl = 0
juggle = 9

;ai forbidden
[State 280, 1]
type = ChangeState
triggerall = var(59) = 1
trigger1 = time = 0
value = 1006


[State 220, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,1

[State 220, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 220 , 1]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = (AnimElem = 6) && (!movecontact)
attr = S, NA
animtype = Med
getpower = 125
givepower = 80
damage = 111
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = 2
sparkxy = -10,-80
hitsound = S220,0
guardsound = S150,1
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -5
guard.velocity = -3
air.velocity = -5,-1
airguard.velocity = -5,-1
air.cornerpush = 1
air.animtype = Back
air.fall = 1
fall.recover = 0 

[State 220, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


; Standing strong kick
[Statedef 230]
type = S
movetype = A
physics = S
anim = 230
velset = 0
ctrl = 0
juggle = 9

;ai forbidden
[State 280, 1]
type = ChangeState
triggerall = var(59) = 1
trigger1 = time = 0
value = 1006

[State 230, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,1

[State 230, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = Med
getpower = 125
givepower = 80
damage = 125
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = 2
sparkxy = -10,-80
hitsound = S230,0
guardsound = S150,1
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -7
guard.velocity = -5
air.velocity = -5,-3
airguard.velocity = -4,-1
air.cornerpush = 1
air.animtype = Back
air.fall = 1
fall.recover = 0 

[State 230, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


; Crouching light punch
[Statedef 400]
type = C
movetype = A
physics = C
anim = 400
velset = 0
ctrl = 0
juggle = 9

[State 400, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 500)
value = 400,0

[State 400, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 400 , 3]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 30
animtype  = Light
getpower  = 63
givepower = 15
hitflag = MA
guardflag = M
pausetime = 11,11  ;12
sparkxy = -3,-40
sparkno = 1
hitsound   = S200,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -5
ground.cornerpush = 1
air.velocity = -2,-3
air.animtype = Back
down.velocity = -4,0
down.hittime = 20
air.fall = 1
fall.recover = 0 

[State 400, 4]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = movecontact
value = 1000

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; AI Stand to Crouch temporary
; common state is state 10, we use state 409
; purpose: because stand to crouch takes 2 ticks to archieve. 

[Statedef 409]
type    = C
physics = C
anim = 10

[State 409, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 409, 2]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = var(59) = 1
;value = 11 ; regular crouch
value = 410 ; crouching light kick

;---------------------------------------------------------------------------
; Crouching light kick
[Statedef 410]
type = C
movetype = A
physics = C
anim = 410
velset = 0
ctrl = 0
juggle = 9

[State 410, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 500)
value = 400,0

[State 410, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1

[State 410, 3]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = 30
getpower  = 63
givepower = 15
hitflag = MA
animtype = light
guardflag = L
pausetime = 11,11 ;12
sparkno = 1
sparkxy = -5,-6
hitsound   = S210,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -6.5
ground.cornerpush = 1
air.velocity = -2,-3
air.animtype = Back
guard.velocity = -5
air.fall = 1
fall.recover = 0 

[State 410, 4]
type = ChangeState
trigger1 = var(59) = 1
trigger1 = p2bodydist X < 4
trigger1 = movehit || moveguarded
value = 400

[State 410, 4]
type = ChangeState
trigger1 = movehit
trigger1 = var(59) = 1
trigger1 = p2bodydist X = (0,35]
trigger1 = AnimTime = 0
value = 410

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

; Crouching hard punch
[Statedef 300]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 420
velset = 0,0
juggle  = 8

[State 400, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,0

[State 400, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 300 , 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, SA
animtype  = Medium
damage    = 77
getpower  = 146
givepower = 25
guardflag = M
pausetime = 12,12
sparkxy = -30,-50
sparkno = 3
guard.sparkno = 40
hitsound   = S220,0
guardsound = S150,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5.5,-5
guard.cornerpush.veloff = -14
air.velocity = -5.5,-5
air.animtype = Back
yaccel = .66
fall = 1
air.fall = 1
fall.recover = 0
P2stateno = 305
air.fall = 1
fall.recover = 0 

[State 300 , 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Crouching hard punch
[Statedef 420]
type = C
movetype = A
physics = C
anim = 422
velset = 0
ctrl = 0
juggle = 9

[State 420, possadd]
type = Posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
value = 10

[State 400, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,0

[State 400, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 420, 3]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = (AnimElem = 5) && (!movecontact)
attr = C, NA
animtype = Med
damage = 98
getpower  = 125
givepower = 80
guardflag = L
pausetime = 11,11
sparkxy = -10,-50
hitsound   = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 15
ground.velocity = -4
ground.cornerpush.veloff = -15
air.velocity = -4,-3
air.animtype = Back
airguard.velocity = -3,-1.5
air.fall = 1
fall.recover = 0 

[State 420, 3]
Type = Changestate
value = 1700
triggerall = var(59) = 1
;trigger1 = random = 999
trigger1 = time = 6
trigger1 = !movehit
trigger1 = enemy,facing != facing

[State 420, 4]
type = ChangeState
triggerall = var(59) >= 1
trigger1 = movecontact
trigger1 =  p2bodydist x = [50,70]
trigger1 = p2statetype != A
trigger2 =  p2bodydist x = [0,70]
trigger2 = p2statetype != A
trigger2 = power = 3000
value = 301

[State 420, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 420, 5]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = Time = 8
trigger1 = movehit
trigger1 = p2bodydist x = [10,50]
value = 1006

[State 420, 3]
Type = Changestate
value = 1006
triggerall = var(59) = 1
trigger1 = time = 29
trigger1 = !movehit
trigger1 = enemy,facing = facing
trigger1 = p2bodydist x = [10,50]
ctrl = 0




; Crouching hard kick
[Statedef 430]
type = C
movetype = A
physics = C
anim = 430
velset = 0
juggle = 10
ctrl = 0

[State 400, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,1

[State 400, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1

[State 430 , 3]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage    = 70
getpower  = 125
animtype = Med
givepower = 55
hitflag = MA
guardflag = L
pausetime = 11,11
sparkxy = -10,-25
sparkno = 2
hitsound   = S230,0
guardsound = S150,1
ground.type = Trip
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -1,-7
yaccel = 0.55
air.velocity = -1.2,-3
air.animtype = Back
guard.velocity = -5
fall = 1
fall.recover = 0

[State 420, 4]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = movehit
trigger1 = p2statetype != A
value = 1710 ;1300

[State 430, 4]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = moveguarded
value = 301

[State 430, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

; Jumping light punch
[Statedef 600]
type = A
movetype = A
physics = A
anim = 600
ctrl = 0
juggle = 9

[State 600, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,0

[State 600, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 600, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
animtype = light
damage = 30
getpower  = 63
givepower = 30
guardflag = HA
pausetime = 10,12
sparkxy = -10,-50
hitsound   = S200,0
guardsound = S150,0
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3
air.velocity = -3,-2
air.animtype = Back
airguard.velocity = -2.5,-1
fall.recover = 0 

[State 600, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; Jumping light kick
[Statedef 610]
type = A
movetype = A
physics = A
ctrl = 0
juggle = 9

[State 610, 0]
type = changeanim
trigger1 = time = 0
value = ifelse(vel X = 0,610,615)

[State 610, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,0

[State 610, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1

[State 610, 3]
type = HitDef
trigger1 = time = 0
persistent = 0
attr = A, NA
animtype  = light
damage    = 53
getpower  = 63
givepower = 10
guardflag = HA
priority = 5
pausetime = 10,12
sparkxy = -10,-50
sparkno = 1
hitsound   = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -3
air.velocity = -1.3,-3
air.animtype = Back
fall.recover = 0 

[State 610, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; Jumping strong punch
[Statedef 620]
type = A
movetype = A
physics = A
anim = 620
ctrl = 0
juggle = 9

[State 620, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,1

[State 620, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1

[State 620 , 3]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage    = 83
animtype  = Med
getpower  = 125
givepower = 45
guardflag = HA
priority = 5
pausetime = 10,12
sparkxy = -10,-58
sparkno = 2
hitsound   = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -1.3,-3
air.animtype = Back
fall.recover = 0 

[State 620,6]
type = ChangeState
trigger1 = (var(59) >= 1) && (movecontact) && (Pos Y >= -10)
value = 644 ; AI land and combo state

[State 620, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; Jump_D
[Statedef 630]
type = A
movetype = A
physics = A
anim = 630
ctrl = 0
juggle = 9

[State 630, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,1

[State 630, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1

[State 630 , 2]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = (AnimElem = 5) && (!movecontact)
trigger3 = (AnimElem = 6) && (!movecontact)
attr = A, NA
damage    = 111
animtype  = Med
getpower  = 125
givepower = 45
guardflag = HA
priority = 6
pausetime = 10,12
sparkxy = -10,-51
sparkno = 2
hitsound   = S230,0
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -2,-3
air.animtype = Back
fall.recover = 0 

[State 630, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 630,6]
type = ChangeState
trigger1 = (var(59) >= 1) && (movecontact) && (Pos Y >= -10)
value = 644

;----------------------------------
; temp AI jump-in combo state
[Statedef 644]
type = S
movetype = I
physics = S
ctrl = 0
anim = 47

[State 644,1]
type = posset
trigger1 = time = 0
y = 0

[State 644,2]
type = velset
trigger1 = time = 0
y = 0

[State 644,3]
type = ChangeState
trigger1 = time = 4
trigger1 = P2bodydist X = [0,18]
value = 270

[State 644,3]
type = ChangeState
trigger1 = time = 3
trigger1 = P2bodydist X = [19,34]
value = 430

[State 644,3]
type = ChangeState
trigger1 = animtime = 0
;trigger1 = (P2bodydist X > 34) || (P2bodydist X < 0)
value = 0
ctrl = 1

;-----------------------------------
; close attacks 

; stand A close
[Statedef 250]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0,0
anim = 250
juggle  = 9

;ai forbidden
[State 280, 1]
type = ChangeState
triggerall = var(59) = 1
trigger1 = time = 0
value = 270


[State 250, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,0

[State 250, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 250 , 3]
type = HitDef
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = Light
damage    = 30
getpower = 63
givepower = 12,6
guardflag = MA
pausetime = 12,12
sparkno = 1
sparkxy = -10,-90
hitsound   = S200,0
guardsound = S150,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -5
ground.cornerpush = 1
air.velocity = -3,-2
air.cornerpush = 1
air.juggle = 9
air.animtype = Back
air.fall = 1
fall.recover = 0 

[State 250, 4]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = movecontact
value = 260

[State 250 , 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing B (close)
;---------------
[Statedef 260]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 260
juggle  = 9

;ai forbidden
[State 280, 1]
type = ChangeState
triggerall = var(59) = 1
trigger1 = time = 0
value = 270

[State 260, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1

[State 260 , 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Light
damage    = 33
getpower = 63
givepower = 12,6
guardflag = L
pausetime = 12,12
sparkno = 1
sparkxy = -16,-30
hitsound   = S210,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 6 ; 9 KOF99 default
ground.velocity = -5
ground.cornerpush = 1
air.velocity = -3,-2
air.cornerpush = 1
air.juggle = 9
air.animtype = Back
air.fall = 1
fall.recover = 0 

[State 260, 4]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = movehit
value = 1500
;value = 1503

[State 260, 4]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = moveguarded
value = 1000

[State 260 , 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------
; Standing C (close)

[Statedef 270]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0
anim = 270
juggle  = 5

[State 270, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,0

[State 420, 3]
Type = Changestate
value = 1700
triggerall = var(59) = 1
trigger1 = time = 5
trigger1 = !movehit
trigger1 = enemy,facing != facing
ctrl = 0

[State 420, 3]
Type = Changestate
value = 1006
triggerall = var(59) = 1
trigger1 = time = 15
trigger1 = !movehit
trigger1 = enemy,facing = facing
trigger1 = p2bodydist x = [0,50]
ctrl = 0

[State 270, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 270 , 2]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = animelem = 5
attr = S, NA
animtype  = Med
damage    = 40
getpower  = 125
givepower = 45
hitflag = MAF
guardflag = MA
pausetime = 10,10
sparkxy = -10,-60
sparkno = 2
hitsound   = S220,0
guardsound = S150,1
ground.type = High
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = 0
ground.cornerpush.veloff = -7
air.velocity = -2,-3
air.cornerpush = 1
air.animtype = Back
air.fall = 1
fall.recover = 0 



[State 270, 4]
type = ChangeState
trigger1 = var(50) = 1 ; AI focus use only
trigger1 = Random <= 450
trigger1 = p2statetype = S && (movehit) && power >= 1000 && (p2bodydist X = [0,1]) ;&& (hitcount < 2)
value = 1006 - (random > 450)*705

[State 270, 4]
type = ChangeState
triggerall = var(59) >= 1
triggerall = p2statetype = C
triggerall = movehit
trigger1 = random <= 300
;trigger1 = p2bodydist X > 0
trigger2 = power = 3000
trigger2 = random <= 999
value = 301


[State 270, 4]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = random = 990
trigger1 = hitcount >= 2
trigger1 = movehit
trigger1 = power < 1000 || power = [2000,3000)
trigger1 = p2bodydist X > 0
value = 1006

[State 270, 4]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = random <= 800
trigger1 = hitcount >= 2
trigger1 = movehit
trigger1 = power = [1000,2000)
trigger1 = p2bodydist X > 0
value = 310

[State 270, 4]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = random > 500
trigger1 = moveguarded
value = 301

[State 270, 4]
type = ChangeState
triggerall = var(59) >= 1
trigger1 = hitcount >= 2 ; && power >= 1000
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 3000 - (power < 1000 || random >= 200)*2699

[State 270, 4]
type = ChangeState
triggerall = var(59) >= 1
trigger1 = p2statetype != C
trigger1 = (power < 1000)
trigger1 = movehit
value = 313; 1300

[State 270 , 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------
; stand D close

[Statedef 280]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0,0
anim = 280
juggle  = 9

;ai forbidden
[State 280, 1]
type = ChangeState
triggerall = var(59) = 1
trigger1 = time = 0
value = 270; 1300

[State 280, 1]
type = PlaySnd
trigger1 = (Time = 0) && (random < 800)
value = 400,1

[State 280, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1

[State 280 , 2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Medium
damage    = 87
getpower  = 125
givepower = 50
hitflag = MA
guardflag = M
pausetime = 12,12
sparkxy = -5,-40
sparkno = 2
hitsound   = S1500,0
guardsound = S150,1
ground.type = Low
ground.slidetime = 17
ground.hittime  = 15
ground.velocity = -7
ground.cornerpush.veloff = -13
air.velocity = -2,-3
air.cornerpush = 1
air.animtype = Back
air.fall = 1
fall.recover = 0 

;[State 280, 4]
;type = ChangeState
;trigger1 = var(59) >= 1
;trigger1 = movecontact
;trigger1 = p2bodydist X <= 18
;value = 1006
;ctrl = 0

;[State 280, 3]
;type = ChangeState
;trigger1 = var(59) >= 1
;trigger1 = movecontact
;trigger1 = p2bodydist X > 18
;value = 301

[State 280, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;====================================
; Special attacks
;====================================
; 300 one inch
[Statedef 31111]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 300
velset = 0,0
juggle  = 9 + var(13)

[State 300, 0]
type = playsnd
trigger1 = time = 0
value = 221,27

[State 300 , 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Medium
damage    = 127
getpower  = 146
givepower = 25
guardflag = M
pausetime = 12,12
sparkxy = -10,-70
sparkno = 2
hitsound = S1500,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -1.5, -10    ; -1.3,-10
air.velocity = -1.5, -10           ; -1.3,-9
air.juggle = 1 + var(13)
air.animtype = Back
fall = 1
air.fall = 1
fall.recover = 0
palfx.time = 38
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
envshake.time = 43 
envshake.ampl = 2

[State 300 , 111]
type = Explod
trigger1 = time = 48
anim = 11112
pos = 0,0
postype = p1
sprpriority = 3
supermove = 1
bindtime = -1

[State 300 , 112]
type = PlaySnd
trigger1 = Time = 48
value = 1000,0

[State 1503, 1]
type = HitBy
trigger1 = movehit
value = SCA, SA,HA,AP
time = 10

;[State 300 , 9]
;type = LifeAdd
;trigger1 = time = 0
;trigger2 = time = 12
;trigger3 = time = 24
;trigger4 = time = 36
;trigger5 = time = 48
;value = 15


[State 300 , 9]
type = PowerAdd
trigger1 = time = 0
trigger2 = time = 12
trigger3 = time = 24
trigger4 = time = 36
trigger5 = time = 48
value = 115

[State 300, burn]
type = varset
trigger1 = movehit
var(3) = 1

[State 300, 2]
type = EnvShake
trigger1 = AnimElem = 6
ampl = -4
time = 10

[State 300 , 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------Type 2 (cancelled version)
; 1 inch cancelled
[Statedef 301]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 301
velset = 0,0
juggle  = 9 + var(13)

[State 301, 0]
type = playsnd
trigger1 = time = 0
value = 221,13

[State 301]
type = velset
trigger1 = time > 10
x = 3

[State 301]
type = velset
trigger1 = time > 21
x = 0



[State 301 , 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
animtype  = Medium
damage    = 70 ;77
getpower  = 146
givepower = 25
guardflag = M
pausetime = 12,12
sparkxy = -10,-70
sparkno = 2
hitsound   = S240,0
guardsound = S150,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 15
ground.velocity = -6
ground.cornerpush.veloff = -15
air.velocity = -5,-2
air.juggle = 9 + var(13)
air.animtype = Back
air.fall = 1
fall.recover = 0 

[State 301, 3]
type = EnvShake
trigger1 = AnimElem = 6
ampl = -5
time = 10

[State 301, 4]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = Power < 1000
trigger1 = PrevStateNo = 420
trigger1 = movehit
trigger1 = 27
value = 1300

[State 301, 5]
type = ChangeState
triggerall = var(59) >= 1
triggerall = time = 24
trigger1 = (movecontact) && (frontedgebodydist <= 22)
trigger2 = (p2bodydist X >= 23) && (P2statetype = C)
trigger2 = moveguarded
trigger3 = moveguarded
value = 1000 + (random <= 400 && moveguarded && FrontEdgeDist > 110)*700
ctrl = 0

[State 301, 6]
type = ChangeState
triggerall = time = 24
trigger1 = var(59) >= 1
trigger1 = power = (999,2000)
trigger1 = p2life > 120
trigger1 = movehit
value = 3100
ctrl = 0

[State 301, 7]
type = ChangeState
triggerall = time = 24
trigger1 = var(59) >= 1
trigger1 = power < 1000 || p2life <= 120
trigger1 = movehit
value = 1300 - (p2statetype = C)*300
ctrl = 0

[State 301, 8]
type = ChangeState
triggerall = time = 24
trigger1 = var(59) = 1
trigger1 = power = 3000
trigger1 = p2life >= 420
trigger1 = movehit
value = 975
ctrl = 0


[State 301 , 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-------------------------------
; 305 been hit by normal one inch
[statedef 305]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 305, 0]
type = changeanim2
trigger1 = time = 0
value = 305

[State 305, 0]
type = ForceFeedBack
trigger1 = hitshakeover = 0
time = 1
waveform = square

[State 305, 0]
type = ChangeState
trigger1 = hitshakeover = 1
value = 306

;part2
[Statedef 306]
type = A
movetype= H
physics = N
ctrl = 0

[State 306, 1]
type = VelAdd
trigger1 = 1
y = ifelse( GetHitVar(yaccel)!=0 , GetHitVar(yaccel) , 0.45)

[State 306, 0]
type = changeanim2
trigger1 = time = 0
value = 305

[State 305, 2]
type = ChangeAnim
trigger1 = anim = 305
trigger1 = animtime = 0
trigger1 = AnimExist(5035)
value = 5030

[State 305, 2]
type = ChangeAnim
trigger1 = anim = 5030
trigger1 = animtime = 0
trigger1 = AnimExist(5035)
value = 5035

[State 305, 2]
type = ChangeAnim
triggerall = Anim = 5030 || Anim = 5035
trigger1 = AnimTime = 0
trigger1 = AnimExist(5050)
value = 5050

[State 305, 2]
type = ChangeAnim
triggerall = Anim = 5050
trigger1 = AnimTime = 0
trigger1 = AnimExist(5060)
value = 5060

[State 1042, 0]
type = HitVelSet
trigger1 = time = 0
x = 1
y = 1

[State 1042, 10]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y > 15
value = 307

;slide in ground
[Statedef 307]
type = S
movetype = H
physics = N
velset = -5,0
ctrl = 0

[State 307, 1]
type = changeanim2
trigger1 = time = 0
value = 307

[State 307, 0]
type = posset
trigger1 = time = 0
y = 0

[State 307, veladd]
type = veladd
trigger1 = time >= 0
trigger1 = time <= 14
x = 0.32

[State 307, veladd]
type = velset
trigger1 = animelem = 2
x = 0

[State 307, self]
type = selfstate
trigger1 = alive
trigger1 = animtime = 0
value = 5120

[State 307, self]
type = selfstate
trigger1 = !alive
trigger1 = animtime = 0
value = 5150

;------------------
; 310 FWD+B on ground
[Statedef 310]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 310
velset = 0,0,0

[State 310, 1]
type = playsnd
trigger1 = time = 0
value = 221,13

[State 310, 3]
type = posadd
trigger1 = AnimElem = 2, = 0
trigger2 = animelem = 3, = 0
x = 16

[State 310, 3]
type = posadd
trigger1 = AnimElem = 4, = 0
x = 8

[State 310 , 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 311
ctrl = 1

; 311 knees kick in air
[Statedef 311]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 311
juggle  = 9 + var(13)

[State 310, 1]
type = playsnd
trigger1 = time = 0
value = 40,0

[State 311, 1]
type = posadd
trigger1 = AnimElem = 1, = 0
x = 3
y = -3

[State 311, 1]
type = posadd
trigger1 = AnimElem = 1, = 1
x = 4
y = -2

[State 311, 1]
type = posadd
trigger1 = AnimElem = 2, = 0
x = 12
y = -2

[State 311, 1]
type = posadd
trigger1 = AnimElem = 1, = 2
trigger2 = AnimElem = 2, = 1
x = 3
y = -2

[State 311, 1]
type = posadd
trigger1 = AnimElem = 2, = 2
trigger2 = AnimElem = 2, = 3
x = 3
y = -1

[State 311, 1]
type = posadd
trigger1 = AnimElem = 3, = 0
x = 2

[State 311, 1]
type = posadd
trigger1 = AnimElem = 3, = 1
x = 3

[State 311, 1]
type = posadd
trigger1 = AnimElem = 3, = 2
trigger2 = AnimElem = 3, = 3
y = 1

[State 311, 1]
type = posadd
trigger1 = AnimElem = 4, = 0
trigger2 = AnimElem = 4, = 1
y = 2

[State 311, 1]
type = posadd
trigger1 = AnimElem = 4, = 2
y = 3

[State 311, 1]
type = posadd
trigger1 = AnimElem = 5, = 0
y = 4

[State 311 , 1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, SA
animtype  = Medium
damage    = 77
getpower  = 146
givepower = 25
guardflag = H ; overhead attack
pausetime = 12,12
sparkxy = -16,-84
sparkno = 2
hitsound   = S230,0
guardsound = S150,1
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -6
air.velocity = -2.2,-3.2
air.animtype = Back
envshake.time = 10 
envshake.ampl = 2

[State 311, 8]
type = ChangeState
trigger1 = animelemtime(5) = 1
value = 312

; 312 knees kick landing
[Statedef 312]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 312
velset = 0,0,0

[State 312 , 3]
type = posset
trigger1 = time = 0
y = 0

[State 312, 3]
type = VarSet
trigger1 = AnimTime = 0
var(2) = 0

[State 312 , 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------
; type 2
;------------------
; 313 knees kick in ground cancelled
[Statedef 313]
type    = S
movetype= A
physics = S
juggle  = 9
ctrl = 0
anim = 310
velset = 0,0,0

[State 313, 0]
type = playsnd
trigger1 = time = 0
value = 221,13

[State 310, 3]
type = posadd
trigger1 = AnimElem = 2, = 0
trigger2 = animelem = 3, = 0
x = 16

[State 310, 3]
type = posadd
trigger1 = AnimElem = 4, = 0
x = 8

[State 313 , 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 314
ctrl = 1

; 311 knees kick in air
[Statedef 314]
type    = A
movetype= A
physics = N
juggle  = 9
poweradd= 30
ctrl = 0
anim = 311

[State 311, 1]
type = posadd
trigger1 = AnimElem = 1, = 0
x = 3
y = -3

[State 311, 1]
type = posadd
trigger1 = AnimElem = 1, = 1
x = 4
y = -2

[State 311, 1]
type = posadd
trigger1 = AnimElem = 2, = 0
x = 12
y = -2

[State 311, 1]
type = posadd
trigger1 = AnimElem = 1, = 2
trigger2 = AnimElem = 2, = 1
x = 3
y = -2

[State 311, 1]
type = posadd
trigger1 = AnimElem = 2, = 2
trigger2 = AnimElem = 2, = 3
x = 3
y = -1

[State 311, 1]
type = posadd
trigger1 = AnimElem = 3, = 0
x = 2

[State 311, 1]
type = posadd
trigger1 = AnimElem = 3, = 1
x = 3

[State 311, 1]
type = posadd
trigger1 = AnimElem = 3, = 2
trigger2 = AnimElem = 3, = 3
y = 1

[State 311, 1]
type = posadd
trigger1 = AnimElem = 4, = 0
trigger2 = AnimElem = 4, = 1
y = 2

[State 311, 1]
type = posadd
trigger1 = AnimElem = 4, = 2
y = 3

[State 311, 1]
type = posadd
trigger1 = AnimElem = 5, = 0
y = 4

[State 314 , 1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, SA
animtype  = Medium
damage    = 50
getpower  = 146
givepower = 25
guardflag = M ; cancelled type is NOT overhead
pausetime = 12,12
sparkxy = -16,-84
sparkno = 2
hitsound   = S230,0
guardsound = S150,1
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -6
air.velocity = -2.2,-3.2
air.animtype = Back
envshake.time = 10 
envshake.ampl = 2

[State 314, 4]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = movecontact
value = 1302

[State 314, 8]
type = ChangeState
trigger1 = animelemtime(5) = 1
value = 315

; 312 knees kick landing
[Statedef 315]
type    = S
movetype= I
physics = S
juggle  = 9
ctrl = 0
anim = 312
velset = 0,0,0

[State 315 , 3]
type = posset
trigger1 = time = 0
y = 0

[State 315 , 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------
; 321 CD during guard
[Statedef 321]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 320
velset = 0,0
poweradd = -1000
juggle  = 1 ; guard cancel

[State 321,1]
type = PlaySnd
trigger1 = animelemtime(2) = 0
value = 600,1
persistent = 0

[State 321, 0]
type = playsnd
trigger1 = time = 0  && random < 800
value = 700,0

[State 321, 4]
type = Explod
trigger1 = time = 0
anim = F800
pos = 30,-90
sprpriority = 2
bindtime = 1
ownpal = 1

[State 321, 2]
type = HitBy
trigger1 = Time >= 0
value = SCA, AT

[State 321, 3] ;Flash
type = EnvColor
Trigger1 = Time = 0
value = 240,240,240
under = 1
time = 2

[State 330 , 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Hard
damage    = 1
getpower  = 0
givepower = 30
pausetime = 16,16
sparkxy = -10,-74
sparkno = 3
hitflag = MA
guardflag = MA
hitsound   = S240,0
guardsound = S150,1
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -5,-4
air.velocity = -5,-4
air.animtype = Back
fall = 1
fall.recover = 0

[State 331 , 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------
; 240 CD regular
[Statedef 240]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 320
velset = 0,0,0
juggle  = 9 + var(13)

[State 240,1]
type = PlaySnd
trigger1 = animelemtime(2) = 0
value = 600,1
persistent = 0

[State 240, 0]
type = playsnd
trigger1 = time = 0  && random < 700
value = 700,0

[State 240 , 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Hard
damage    = 141
getpower  = 167
givepower = 30
priority = 6
pausetime = 16,16
sparkxy = -10,-74
sparkno = 3
hitflag = MA
guardflag = MA
hitsound   = S240,0
guardsound = S150,1
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -5,-4
air.velocity = -5,-4
air.animtype = Back
fall = 1
fall.recover = 0
envshake.time =  15 
envshake.freq = 45    
envshake.ampl = 6 
envshake.phase = 6

[State 240 , 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------
; 650 CD hit high in air
; jump CD
[Statedef 650]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 650
juggle  = 9 + var(13)

[State 650, 2]
type = PlaySnd
trigger1 = animelemtime(2) = 0
value = 600,1
persistent = 0

[State 650, 0]
type = playsnd
trigger1 = time = 0  && random < 700
value = 700,0

[State 650 , 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Hard
damage    = 120
getpower  = 167
givepower = 30
priority = 6
pausetime = 10,12
sparkxy = -10,-74
sparkno = 3
guardflag = HA
yaccel = 0.4
hitsound   = S240,0
guardsound = S150,1
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -5,-6
air.velocity = -5,-6
air.animtype = Back
fall = 1
fall.recover = 0

[State 650 , 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;=======================================================
; Throws
;=======================================================
; 370 throw
[Statedef 370]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 370

[State 370, 1]
type = HitDef
Trigger1 = AnimElem = 1
attr = S, NT
givepower = 40
hitflag = M-
priority = 2, Miss
snap = 24, 0, 0, 1
sparkno = 1
sparkxy = 10,-70
p2facing = 1
p1stateno = 371
p2stateno = 372

[State 370, end1]
type = changestate
trigger1 = var(59) >= 1
trigger1 = animtime = 0
value = 105
ctrl = 1

[State 370, end2]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;------------
[Statedef 371] ;§E?
type = S
movetype = I
physics = N
ctrl = 0
anim = 371

[State 371, 0]
type = Sprpriority
trigger1 = Animelem >= 3
value = -1

[State 371, 1]
type = Width
trigger1 = AnimElem = 1
edge = 40, 0

[State 371, 2]
type = PlaySnd
trigger1 = time = 0
value = 370,0

[State 371, 2]
type = PlaySnd
trigger1 = animelem = 5
value = 400,1

[State 371, 2]
type = PlaySnd
trigger1 = animelem = 7
value = 220,0

[State 371, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 371, 4]
type = gamemakeanim
trigger1 = animelem = 7
value = 7
pos = 28, -46

;¼Ä¤â°Ê§@(³Q§EX)
[Statedef 372]
type = S
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 372, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 372

[State 372, 2] 
type = Width
trigger1 = AnimElem = 1, >= 0
edge = 0, 0

[State 372, 3]
type = LifeAdd
Trigger1 = AnimElem = 4
value = -120

[State 372, 4]
type = SelfState
trigger1 = animtime = 0
value = 5100
ctrl = 0


;--------------
; 380 throw D
[Statedef 380]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 380

[State 380, 1]
type = HitDef
Trigger1 = AnimElem = 1
attr = S, NT
givepower = 40
hitflag = M-
priority = 2, Miss
snap = 27, 0, 0, 1
sparkno = 1
sparkxy = 10,-70
p2facing = 1
p1stateno = 381
p2stateno = 382

[State 380, end2]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------
[Statedef 381] ;D“Š‚°
type = S
movetype = I
physics = N
ctrl = 0
anim = 381

[State 381, 2]
type = PlaySnd
trigger1 = time = 0
value = 370,0

[State 381, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 400,1

[State 371, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 220,0

[State 381, 1]
type = Width
trigger1 = AnimElem = 1
edge = 40, 0

[State 381, 2]
type = turn
trigger1 = animelem = 11
value = 1

[State 381, 3]
type = targetbind
trigger1 = animelem = 4
pos = -20, -70

[State 381, 4]
type = gamemakeanim
trigger1 = animelem = 4
value = 2
pos = -20, -72

[State 381, 5]
type = posadd
trigger1 = animelem = 7
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
x = 8

[State 381, 5]
type = posadd
trigger1 = AnimElem = 10
x = 4

[State 381, 5]
type = posadd
trigger1 = AnimElem = 11
x = -8

[State 381, 6]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------
;¼Ä¤â°Ê§@(³Q§EX)
[Statedef 382]
type = S
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 382, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 382

[State 382, 2]
type = posadd
trigger1 = animelem = 2
x = 14

[State 382, 3]
type = posadd
trigger1 = animtime = 0
y = 60

[State 382, 4]
type = Width
trigger1 = AnimElem = 1, >= 0
edge = 0, 30

[State 382, 5]
type = LifeAdd
Trigger1 = AnimElem = 4
value = -120

[State 382, 6]
type = VelAdd
Trigger1 = AnimElem = 5
x = 4
y = -1

[State 382, 7]
type = SelfState
trigger1 = animtime = 0
value = 5050
ctrl = 0

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
; KOF safe landing
[Statedef 5201]
type    = S
movetype= I
physics = N
anim = 5200

[State 5201, 4]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 5201, 0]
type = PlaySnd
trigger1 = time = 0
value = 5210,0

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = (Time = 0) && (p2dist X < -5)

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = -18

[State 5201, 2]
type = Veladd
trigger1 = Time >= 0
x = 2.5

[State 5201, 2]
type = VelSet
trigger1 = Vel X >= 0
x = 0

[State 5201, 3]
type = PosSet
trigger1 = Time >= 0
y = 0

[State 5201, 7]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;==========================================================
; Heat Drive A -------- ¤jµ´©Û
;==========================================================
; heat drive A, AI use
[Statedef 2999]
anim = 0
ctrl = 0

[State 2999, AIuse1]
type = changestate
triggerall = var(59) = 1
triggerall = P2dist Y <= -28
trigger1 = power >= 1000
trigger1 = p2life > 120
trigger1 = time > 12
value = 3000 

[State 2999, AIuse1]
type = changestate
triggerall = var(59) = 1
triggerall = P2dist Y <= -28
triggerall = (p2life <= 120) || (power < 1000)
trigger1 = time > 9
value = 1305

[Statedef 3000]
type    = S
movetype= I
physics = S
anim = 3005
poweradd = -1000
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S99,33

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S99,34




[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 0
y = -3
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
trigger4 = animelem = 6
x = 0
y = -5
















[state a]
type = changestate
trigger1 = Animtime = 0
value = 3001

[Statedef 3001]
type = A
movetype = A
physics = N
anim = 3006
juggle  = 4
ctrl = 0

[State 840,0]
type = envcolor
trigger1 = Time = [0,120]
time = 180
value = 0,0,0
under = -1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 3004
ID = 3004
pos = 170,240
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 180
pausemovetime = 0
scale = 0.5,0.6
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S99,35

[State 1000, 1]
type = Projectile
trigger1 = AnimElem = 1
ProjAnim = 3008
ProjID = 3008
ProjHitAnim = -1
ProjRemoveTime = 180
projhits = 60
postype = p1
offset = 0,0
projscale = 0.8,0.8
accel = 0, 0
hitflag = MA
guardflag = MA
attr = S, SP
projshadow = 68,68,68
damage = 500,10
animtype = Hard
getpower = 104
givepower = 50
pausetime = 4,3
sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -5.9
guard.velocity = -10.9
airguard.velocity = -4.0,-3.0
air.velocity = -4,-5
;air.juggle = 1 + var(12)
air.fall = 1
projhits = 20
air.recover = 0
fall.recover = 0
air.animtype = Back
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 3
velocity = 2,2
fall = 1

[State 1051, 4]
type = HitDef
trigger1 = AnimElem = 1
attr = A, SA
damage = 65,10
getpower = 29,10
animtype  = hard
hitflag = MAF
guardflag = MA
priority = 4,Hit
pausetime = 12,12
sparkno = 2
guard.sparkno = 40
sparkxy = -5,-40
hitsound   = s99,36
guardsound = s150,1
ground.type = high
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = -4,-6
air.velocity = -5,5
guard.velocity = -10
air.juggle  = 4
fall =1
fall.recover = 0
yaccel = .5


[State 1051,3]
type = velset
trigger1 = AnimElem = 1
x = 2
y = 1



[State 1051, 5]
type = ChangeState
trigger1 = Pos Y >= 0
value = 3007



[Statedef 3007]
type = S
movetype = I
physics = S
anim = 3007
juggle  = 4
velset = 6,0

[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 2
time =  180
anim =3007
sound = S99,37
pos = 0,0
move = 0
movetime = 0
darken = 1
p2defmul = 0
poweradd = 0
unhittable = 1
;ignorehitpause =
;persistent =




[State 1052, 1]
type = PlaySnd
trigger1 = Time = 0
value = S3, 6
channel = 5

[State 1052, Width]
type = Width
trigger1 = (AnimElemTime (1) >= 0) && (AnimElemTime (3) < 0)
value = 20,0

[State 1052, 1]
type = PosSet
trigger1 = Time = 0
Y = 0

[State 1052, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



[Statedef 1610]
type = S
movetype = H
physics = S
anim = 5300
ctrl = 0
juggle = 10
velset = 0,0

[State 1101]
type = PosSet
trigger1 = 1
y = 0

[State 110123]
type = VelSet
trigger1 = 1
y = 0
X = 0

[state 2, invisibility]
type = AssertSpecial
;trigger1 = 1
trigger1 = stateno = 1610
trigger2 = NumExplod(19191) = 1
trigger2 = time >= 2
flag = invisible

[State 2, hit]
type = VarSet
triggerall = var(17) = 1
;trigger1 = movetype = H
trigger1 = stateno = [5000,5200]
trigger2 = stateno != 1610
trigger3 = stateno = [0,1500]
trigger4 = stateno = [1700,9999]
var(17) = 0

[State 232, Ggfho]
type = RemoveExplod
;trigger1 = movetype = H
trigger1 = stateno = [5000,5200]
;trigger4 = p2stateno = 0
trigger4 = stateno = 713
;trigger3 = movecontact
;triggerall = time >= 0
trigger3 = stateno = 1620
ID = 19191

[State 3010, CS]
type = ChangeState
trigger1 = Time = 150
trigger1 = NumExplod(19191) != 1
trigger2 = NumExplod(19191) >= 1
trigger2 = Time <= 20
value = 1620
ctrl = 1

[Statedef 1620]
type    = S
movetype= I
physics = S
;velset = 0,0,0
juggle = 10
ctrl = 1
Anim = 5300

[State 2, Go]
type = RemoveExplod
trigger1 = 1
ID = 19191

[State 2, hit]
type = VarSet
triggerall = var(17) = 1
trigger1 = 1
var(17) = 0

[State 9010, 034.1]
type = PosSet
;trigger1 = p2stateno =[0,9999]
trigger1 = 1
Y = 0

[State 9010, 4.1]
type = VelSet
;trigger1 = p2stateno =[0,9999]
trigger1 = 1
Y = 0

[State 3010, 35S]
type = selfState
trigger1 = 1
trigger1 = command = "holddown"
value = 131
ctrl = 1

[State 10210, 3]
type = Selfstate
trigger1 = time = 30
value = 0
ctrl = 1

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = roundstate = 3
trigger1 = time = 80
value = 5300
ctrl = 1

;-------------
; Torpedo
[StateDef 20005]
type    = S
movetype= A
physics = S
juggle  = 3
ctrl = 0
anim = 3012

[State 3011, Boom]
type = PlaySnd
trigger1 = time = 1
value = 2424, 0
volume = 60
channel = 2

[State 1000, g]
type = PlayerPush
trigger1 = Time >= 1
value = 0

[State 1100, aAccell]
type = VelAdd
trigger1 = Time < 25
x = 18

[State 1000, BounceOff]
type = ChangeState
trigger1 = AnimTime = 0
ctrl = 1
value = 0
;--------------------------------------------
; Torpedo Bounce away
[StateDef 1001]
type    = S
movetype= I
physics = S
ctrl = 0

[State 1000, Accellw]
type = VelSet
trigger1 = time = 0
x = 0

[State 1001, 10]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
; I hitum now fly.
[StateDef 1011]
type    = A
movetype= A
physics = N
juggle  = 2
ctrl = 0
velset = 0,0
anim = 1010

[State 1010, HimHitWall]
type = TargetState
trigger1 = Time = 5
value = 1031
ctrl = 0

[State 1010, YouBounce]
type = ChangeState
trigger1 = Time = 5
value = 1001
ctrl = 0

;----------------------------------------------
; I hitum now he fly.
[StateDef 1030]
type    = A
movetype= H
physics = N
juggle  = 2
ctrl = 0

[State 1030, OW]
type = ChangeAnim2
trigger1 = time = 0
value = 1030

[State 1030, StopEarly]
Type = ScreenBound
trigger1 = Time >= 40
value = 0
;movecamera = 0, 0

[State 1031, HitGround]
type = SelfState
trigger1 = (Pos Y = 0) || (Vel Y != 0)
value = 5100 ;Hit ground


;----------------------------------------------
; Player Two hit the dirt.
[StateDef 1031]
type    = A
movetype= H
physics = N
juggle  = 2
velset = 0,0,0
ctrl = 0

[State 1031, Gravity]
type = VelAdd
Trigger1 = 1
y = .5

[State 1031, Falling]
type = ChangeAnim2
trigger1 = time = 0
value = 1031

[State 1031, HitGround]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110 ;Hit ground

;==========================================================
;-------------
[Statedef 5245]
type    = L
movetype= H
physics = N
anim = 2455

[State 5120, 3sda]
type = sprpriority
trigger1 = 1
value = 5

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 5120, 334]
type = posset
trigger1 = 1
Y = 0

[State 5120, 3]
type = Velset
trigger1 = 1
X = 0


[State 5120, 345]
type = NotHitBy
trigger1 = animtime = 0
value2 = SCA
time = 2

[State 5110, EnvShake]
type = EnvShake
trigger1 = Time = 20
time = 20
freq = 70
ampl = 4

[State 5120, 3]
type = playsnd
trigger1 = time = 18
value = F7,0

[State 5110, 1]
type = SelfState
trigger1 = animtime = 0
trigger1 = roundstate = 2
value = 0
ctrl = 1

[State 5000, 74]
type = SelfState
trigger1 = roundstate = 3
trigger2 = roundstate = 4
value = 5050


;==========================================================


;----------------------------------------------------------
; 3200 chain drive launch
[Statedef 3200]
type    = S
movetype= A
physics = S
anim = 3209
ctrl = 0
poweradd = -1000
velset = 0,0,0
juggle = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
value = S99,9


[State 1000, 1]
type = Projectile
trigger1 = AnimElem = 9
ProjAnim = 2020
ProjID = 2020
ProjHitAnim = -1
ProjRemoveTime = 160
velocity = 5,0
projhits = 20
offset = 0,0
projscale = 0.30,0.40
accel = 0, 0
hitflag = MA
guardflag = MA
attr = S, SP
projshadow = 68,68,68
damage = 8,2
animtype = Hard
getpower = 104
givepower = 50
pausetime = 4,3
sparkno = 0
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 2
ground.hittime = 2
ground.velocity = -5.9
guard.velocity = -10.9
airguard.velocity = -4.0,-3.0
air.velocity = -4,-5
;air.juggle = 1 + var(12)
air.fall = 1
air.recover = 0
fall.recover = 0
air.animtype = Back
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 3


[State 3000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 99,7

[State 3000, 1]; DM sound
type = PlaySnd
trigger1 = time = 2
value = F1,0

[State 3200, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 3200, 2]
type = SuperPause
trigger1 = time = 2
anim = -1
movetime = 23

[State 3200, 4]
type = Explod
trigger1 = AnimElem = 1
anim = F7505
postype = p1
pos = 0,-90
sprpriority = 1
supermove = 1
bindtime = 1
ownpal = 1

[State 3200, 4]
type = Explod
trigger1 = AnimElem = 1
anim = F7500
postype = p1
pos = 0,-90
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 3200, 3]
type = envcolor
trigger1 = time = 1
time = 30
under = 1
value = 0, 0, 0

  ;sun glasses


[State 3200, end1]
type = changestate
trigger1 = projcontact2020 = 1
trigger2 = NumProjID(2020) = 0
trigger2 = AnimElemTime (9) > 1
trigger2 = time <= 110
value = 3201
ctrl = 0

[State 3200, end2]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------
; 3201 chain drive attack success
[Statedef 3201]
type    = S
movetype= A
physics = N
anim = 3202
ctrl = 0
velset = 0,0,0

[State 3202, 0]
type = playerpush
trigger1 = time >= 0
value = 1

[State 3201, shadow]
type = explod
trigger1 = projcontact2020 = 1
trigger2 = NumProjID(2020) = 0
anim = 3201
persistent = 0
sprpriority = 2
pos = 0,0
scale = 0.40,0.40
postype = P1
velset = 0,0
ownpal = 1
bindtime = 1
shadow = 80,80,80

[State 3201, 1]
type = posadd
trigger1 = time = 12
x = 20

[State 3201, 2]
type = playsnd
trigger1 = time = 16
value = 99,42

[State 3201, 2]
type = velset
trigger1 = time = 16
x = (P2dist X+40)/16

[State 3201, 3]
type = veladd
trigger1 = time >= 22
x = -0.5

[State 3201, 4]
type = VelSet
trigger1 = Vel X <= 0
x = 1

[State 3201, 5]
type = HitDef
trigger1 = AnimElem = 1;4
trigger2 = (AnimElem = 5) && (!movecontact)
p2facing = 1
attr = S, HA
animtype = hard
damage = 0,0
sparkno = 2
sparkxy = 0,-60
pausetime = 6,6
hitflag = MAF
guardflag = MA
forcestand = 1
hitsound = 5,2
fall.recover = 0
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3, 0

[State 3201, sunglass]
type = envcolor
trigger1 = movehit
time = 1
under = 1
value = 240,240,240

[State 3201, end1]
type = changestate
trigger1 = movehit
value = 3202
ctrl = 1

[State 3201, end1]
type = changestate
trigger1 = animtime = 0
trigger2 = moveguarded
value = 3210
ctrl = 0

;------------------------
; 3210 guarded
[Statedef 3210]
type    = S
movetype= I
physics = S
anim = 3210
ctrl = 0

[State 3210, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------
;=========================================
;-----------------------------------------
; 3205 chain drive attacking
[Statedef 3202]
type    = S
movetype= A
physics = N
anim = 3205
ctrl = 0
velset = 2.2,0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S99,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 22
value = S99,9

[State 0, Explod]
type = Explod
trigger1 = animelem = 22
anim = 2021
ID =  2021
pos = 0,0
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 6,0
accel = 0,0
random = 0,0
removetime = 60
pausemovetime = 0
scale = 0.30,0.40
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;trans =
;persistent =
;supermove = 0
;pausemove = 0


[state 13502]
type = playsnd
trigger1 = animelem = 1
value = 221,5

[state 13502]
type = playsnd
trigger1 = animelem = 30
value = 221,11

[State 3202, muteki]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 3202, targetbind]
type = targetbind
trigger1 = 1
pos = 60,0

[State 3202, 0]
type = playerpush
trigger1 = time >= 0
value = 1

[State 3202, 1]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 17
trigger4 = animelem = 19
trigger5 = animelem = 27
trigger6 = animelem = 31
trigger7 = animelem = 38
attr = S, HA
forcestand = 1
animtype  = hard
damage    = 18 ; 15
givepower = 15
;guardflag = MA
pausetime = 2,0
sparkno = 2
sparkxy = -15,-70
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3
fall.recover = 0
kill = 0
p2stateno = 3207

[State 3202, 2]
type = HitDef
trigger1 = animelem = 9
trigger2 = animelem = 13
trigger3 = animelem = 22
trigger4 = animelem = 36
attr = S, HA
animtype  = hard
damage    = 18 ; 15
givepower = 15
;guardflag = MA
pausetime = 2,0
forcestand = 1
sparkno = 2
sparkxy = -20,-40
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3
fall.recover = 0
kill = 0
p2stateno = 3208

[State 3202, envcolor]
type = envcolor
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 9
trigger4 = animelem = 13
trigger5 = animelem = 17
trigger6 = animelem = 19
trigger7 = animelem = 22
trigger8 = animelem = 27
trigger9 = animelem = 31
trigger10 = animelem = 36
trigger11 = animelem = 38
time = 1
under = 1
value = 240,240,240

[State 3202, width]
type = Width
trigger1 = time >= 0
edge = 60, 0

[State 3202, end1]
type = changestate
trigger1 = animtime = 0
value = 3205
ctrl = 0





;ƒ`ƒF[ƒ“@‘ŠŽè@ã’i
[Statedef 3207]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -2

[State 2205, 2]
type = posset
trigger1 = 1
y = 0

[State 2006]
type= Changeanim2
trigger1 =Time=0
value= 3207

[State 2006]
type = SelfState
trigger1 = animtime = 0
value = 5100

;ƒ`ƒF[ƒ“@‘ŠŽè@‰º’i
[Statedef 3208]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -2

[State 2205, 2]
type = posset
trigger1 = 1
y = 0

[State 2006]
type= Changeanim2
trigger1 =Time=0
value= 3208

[State 2006]
type = SelfState
trigger1 = animtime = 0
value = 5100



;------------------------
; 3205 finish Chain drive
[Statedef 3205]
type    = S
movetype= A
physics = S
anim = 3206
ctrl = 0
velset = 0,0,0

[State 3205, 1]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
animtype  = up
damage    = 50 ; 98
givepower = 15
;guardflag = 
pausetime = 30,30
sparkno = 3
sparkxy = -15,-60
hitsound   = S240,0
guardsound = S150,1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
fall = 1
fall.recover = 0
ground.velocity = -5,-6

[State 3205, envcolor]
type = envcolor
trigger1 = animelem = 6
time = 1
under = 1
value = 240,240,240

[State 3205, 2]
type = EnvShake
trigger1 = AnimElem = 6
ampl = -4
time = 30

[State 3205, Muteki]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 3205, end1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;==========================================================
; Heatdrive C <--- inherited from SDM heatdrive 99
;==========================================================
[Statedef 3100]
type    = S
movetype= I
physics = S
anim = 3000
ctrl = 0
poweradd = -1000
velset = 0,0,0

[State 3100, 1]
type = PlaySnd
trigger1 = time = 0
value = 99,32

[State 3100, 1] ; flash sound
type = PlaySnd
trigger1 = time = 2
value = F1,0

[State 3100, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 3100, 2]
type = SuperPause
trigger1 = time = 2
anim = -1
movetime = 30

[State 3100, 4]
type = Explod
trigger1 = AnimElem = 2
anim = F7505
postype = p1
pos = 19,-90
sprpriority = 7
supermove = 1
bindtime = 1
ownpal = 1

[State 3100, 4]
type = Explod
trigger1 = AnimElem = 2
anim = F7500
postype = p1
pos = 17,-97
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 3100, 3]
type = envcolor
trigger1 = time = 1
time = 30
under = 1
value = 0, 0, 0

[State 3100, 4]
type = Explod
trigger1 = animelem = 4
anim = 2000
pos = 10,30
supermove = 1
supermovetime = 2
sprpriority = 2
bindtime = 1
removetime = 2
shadow = 64,64,64
ownpal = 1

[State 3005, 4]
type = Explod
trigger1 = animelem = 5
anim = 2001
supermove = 1
supermovetime = 3
sprpriority = 2
bindtime = 1
pos = 8, 19
removetime = 3
shadow = 64,64,64
ownpal = 1

[State 3005, 4]
type = Explod
trigger1 = animelem = 6
anim = 2001
supermove = 1
pos = 6, 16
supermovetime = 3
sprpriority = 2
bindtime = 1
removetime = 3
shadow = 64,64,64
ownpal = 1

[State 3100, 4]
type = Explod
trigger1 = animelem = 7
anim = 2001
supermove = 1
pos = 0, -1
supermovetime = 20
sprpriority = 2
bindtime = 1
removetime = 20
shadow = 64,64,64
ownpal = 1

[State 3100, 4]
type = Explod
trigger1 = time = 30
anim = 1530
pos = -10,-80
sprpriority = -2
bindtime = 1
ownpal = 1

; hold
[State 3100, end1]
type = changestate
trigger1 = !var(59)
trigger1 = (command = "hold_A" || command = "hold_C") && (time >= 20)
trigger2 = var(59) = 1 && time >= 34
trigger2 = p2stateno = [130,160]
;trigger2 = random <= 100
value = 3101

; release
[State 3100, end2]
type = changestate
triggerall = AnimTime = 0
trigger1 = (command != "hold_A") && (command != "hold_C")
trigger2 = var(59) = 1 
trigger2 = p2stateno != [130,160]
value = 3102

;-------------------------------
[Statedef 3101]
type    = S
movetype= I
physics = S
anim = 3001
ctrl = 0
velset = 0,0,0

[State 3001, handflame]
type = Explod
triggerall = command = "hold_C"
trigger1 = Time = 0
anim = 2010
ID = 2010
pos = -3,0
postype = p1
shadow = 64,64,64
sprpriority = 2
bindtime = 240
removetime = 240
ownpal = 1


[State 3001, end1]
type = changestate
trigger1 = command != "hold_A" && command != "hold_C"
trigger1 = time >= 0
trigger2 = time = 240
value = 3102

;-----------------------------dash out
[Statedef 3102]
type = S
movetype = A
physics = N
ctrl = 0
anim = 3102
velset = 0,0,0
juggle = 9

[State 3000, 1]
type = PlaySnd
trigger1 = time = 0
value = 3000,1

[State 1500, burn]
type = varset
trigger1 = movehit
var(3) = 1

[State 3102, explod]
type = Explod
trigger1 = time = 0
anim = 2002
sprpriority = 3
bindtime = 1
shadow = 64,64,64
ownpal = 1

[State 3102, explodflame]
type = Explod
trigger1 = time = 4
anim = 2040
pos = -20, -60
sprpriority = 3
bindtime = 2
ownpal = 1

[State 3102, 1]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 8

[State 3102, 2]
type = velset
trigger1 = animelem = 2, = 2
x = 10 ; 11

[State 3102, 3]
type = veladd
trigger1 = time >= 9
x = -0.3

[State 3102, 5]
type = VelSet
trigger1 = (Time >= 9) && (Vel X <= 0)
x = 2

[State 3102, 6]
type = HitDef
trigger1 = time = 0
persistent = 0
attr = S, HA
animtype = up
damage = 200,100
priority = 6
sparkno = s1610
sparkxy = 0,0
pausetime = 2,0
guardflag = -1
hitsound = -1
guardsound = S150,1
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -2,-11
air.velocity = -2,-11
air.juggle = 9
fall = 1
fall.recover = 0
palfx.time = 60
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
p2stateno = 1610
p1stateno =  20005

[State 3002, 1.5]
type = PlaySnd
trigger1 = movehit
value = 2200,1
ignorehitpause = 1
persistent = 0
volume = -50

[State 3002, 1.5]
type = PlaySnd
trigger1 = movehit
value = 99,31
ignorehitpause = 1
persistent = 0

[State 3102, 7]
type = TargetLifeAdd
trigger1 = movehit
;value = -440 ; -476 KOF99   <--- from SDM
value = -322 + (p2movetype =H)*32 ; -333 KOF99
absolute = 1

[State 3102, 8]
type = PlayerPush
trigger1 = Time >= 8
value = 0

[State 3102, afterimage]
type = AfterImage
trigger1 = AnimElem = 2, = 1
time = 20
FrameGap = 3
length = 8

[State 3102, end1]
type = changestate
trigger1 = animtime = 0
value = 3103
ctrl = 1

[State 3102, end1]
type = changestate
trigger1 = movehit
value = 3004
;value = 3104
ctrl = 1


;-----------------------------Miss
[Statedef 3103]
type = S
movetype = I
physics = N
ctrl = 0
anim = 3103
velset = 0,0,0

[State 3103, 1]
type = posadd
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
x = 8

[State 3103, afterimage]
type = AfterImage
trigger1 = time = 0
time = 20
Trans = Add1
length = 14

[State 3103, 2]
type = velset
trigger1 = animelem = 1
x = 11 ;12

[State 3103, 2]
type = veladd
trigger1 = time >= 0
x = -0.4

[State 3103, 3]
type = VelSet
trigger1 = Vel X <= 0
x = 0

[State 3103, end1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------
; 3104 movehit
[Statedef 3104]
type = S
movetype = I
physics = N
ctrl = 0
anim = 3104
velset = 0,0,0

[State 3104, GroundSpark]
type = explod
trigger1 = time = 0
anim = 2050
sprpriority = -2
pos = 10, -1
bindtime = 7
ownpal = 1

[State 3102, afterimage]
type = AfterImage
trigger1 = time = 0
time = 16
trans = add1
FrameGap = 4
length = 12

[State 3104, 1]
type = posadd
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
x = 8

[State 3104, 2]
type = velset
trigger1 = animelem = 1
x = 12

[State 3104, 2]
type = veladd
trigger1 = time >= 0
x = -0.4

[State 3104, 3]
type = VelSet
trigger1 = (time >= 1) && (Vel X <= 0)
x = 0

[State 3104, end1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------
[Statedef 3105]
type    = S
movetype= I
physics = S
anim = 3000
ctrl = 0
poweradd = -1000
velset = 0,0,0

[State 3105, 1]
type = PlaySnd
trigger1 = time = 0
value = 3000,0

[State 3105, 1]; flash sound
type = PlaySnd
trigger1 = time = 2
value = F1,0

[State 3105, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 3105, 2]
type = SuperPause
trigger1 = time = 2
anim = -1
movetime = 30

[State 3105, 3]
type = envcolor
trigger1 = time = 1
time = 30
under = 1
value = 0, 0, 0

[State 3105, 4]
type = Explod
trigger1 = animelem = 4
anim = 2000
pos = 10,30
supermove = 1
supermovetime = 2
sprpriority = 2
bindtime = 1
removetime = 2
shadow = 64,64,64
ownpal = 1

[State 3005, 4]
type = Explod
trigger1 = animelem = 5
anim = 2001
supermove = 1
supermovetime = 3
sprpriority = 2
bindtime = 1
pos = 8, 19
removetime = 3
shadow = 64,64,64
ownpal = 1

[State 3005, 4]
type = Explod
trigger1 = animelem = 6
anim = 2001
supermove = 1
pos = 6, 16
supermovetime = 3
sprpriority = 2
bindtime = 1
removetime = 3
shadow = 64,64,64
ownpal = 1

[State 3105, 4]
type = Explod
trigger1 = animelem = 7
anim = 2001
supermove = 1
pos = 0, -1
supermovetime = 20
sprpriority = 2
bindtime = 1
removetime = 20
shadow = 64,64,64
ownpal = 1

[State 3105, 4]
type = Explod
trigger1 = time = 30
anim = 1530
pos = -10,-80
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3105, end1]
type = changestate
trigger1 = (command = "hold_C") && (Time >= 34)
value = 3106

[State 3105, end2]
type = changestate
trigger1 = (animtime = 0) && (command != "hold_C")
value = 3102

;-------------------------------
[Statedef 3106]
type    = S
movetype= I
physics = S
anim = 3001
ctrl = 0
velset = 0,0,0

[State 2200, 13]
type = Explod
triggerall = command = "hold_C"
trigger1 = Time = 0
trigger2 = Time = 1
trigger3 = Time = 10
trigger4 = Time = 11
trigger5 = Time = 20
trigger6 = Time = 21
trigger7 = Time = 30
trigger8 = Time = 31
trigger9 = Time = 40
trigger10 = Time = 41
trigger11 = Time = 50
trigger12 = Time = 51
trigger13 = Time = 60
trigger14 = Time = 61
trigger15 = Time = 70
trigger16 = Time = 71
trigger17 = Time = 80
trigger18 = Time = 81
trigger19 = Time = 90
trigger20 = Time = 91
trigger21 = Time = 100
trigger22 = Time = 101
trigger23 = Time = 110
trigger24 = Time = 111
trigger25 = Time = 120
trigger26 = Time = 121
trigger27 = Time = 130
trigger28 = Time = 131
trigger29 = Time = 140
trigger30 = Time = 141
trigger31 = Time = 150
trigger32 = Time = 151
trigger33 = Time = 160
trigger34 = Time = 161
trigger35 = Time = 170
trigger36 = Time = 171
trigger37 = Time = 180
trigger38 = Time = 181
trigger39 = Time = 190
trigger40 = Time = 191
trigger41 = Time = 200
trigger42 = Time = 201
trigger43 = Time = 210
trigger44 = Time = 211
trigger45 = Time = 220
trigger46 = Time = 221
trigger47 = Time = 230
trigger48 = Time = 231
trigger49 = Time = 240
anim = 2010
postype = p1
shadow = 64,64,64
sprpriority = 2
ownpal = 1
bindtime = 1

[State 2200, 14]
type = Explod
triggerall = command = "hold_C"
trigger1 = Time = 2
trigger2 = Time = 3
trigger3 = Time = 12
trigger4 = Time = 13
trigger5 = Time = 22
trigger6 = Time = 23
trigger7 = Time = 32
trigger8 = Time = 33
trigger9 = Time = 42
trigger10 = Time = 43
trigger11 = Time = 52
trigger12 = Time = 53
trigger13 = Time = 62
trigger14 = Time = 63
trigger15 = Time = 72
trigger16 = Time = 73
trigger17 = Time = 82
trigger18 = Time = 83
trigger19 = Time = 92
trigger20 = Time = 93
trigger21 = Time = 102
trigger22 = Time = 103
trigger23 = Time = 112
trigger24 = Time = 113
trigger25 = Time = 122
trigger26 = Time = 123
trigger27 = Time = 132
trigger28 = Time = 133
trigger29 = Time = 142
trigger30 = Time = 143
trigger31 = Time = 152
trigger32 = Time = 153
trigger33 = Time = 162
trigger34 = Time = 163
trigger35 = Time = 172
trigger36 = Time = 173
trigger37 = Time = 182
trigger38 = Time = 183
trigger39 = Time = 192
trigger40 = Time = 193
trigger41 = Time = 202
trigger42 = Time = 203
trigger43 = Time = 212
trigger44 = Time = 213
trigger45 = Time = 222
trigger46 = Time = 223
trigger47 = Time = 232
trigger48 = Time = 233
anim = 2011
shadow = 64,64,64
ownpal = 1
postype = p1
sprpriority = 2
bindtime = 1

[State 2200, 15]
type = Explod
triggerall = command = "hold_C"
trigger1 = Time = 4
trigger2 = Time = 5
trigger3 = Time = 14
trigger4 = Time = 15
trigger5 = Time = 24
trigger6 = Time = 25
trigger7 = Time = 34
trigger8 = Time = 35
trigger9 = Time = 44
trigger10 = Time = 45
trigger11 = Time = 54
trigger12 = Time = 55
trigger13 = Time = 64
trigger14 = Time = 65
trigger15 = Time = 74
trigger16 = Time = 75
trigger17 = Time = 84
trigger18 = Time = 85
trigger19 = Time = 94
trigger20 = Time = 95
trigger21 = Time = 104
trigger22 = Time = 105
trigger23 = Time = 114
trigger24 = Time = 115
trigger25 = Time = 124
trigger26 = Time = 125
trigger27 = Time = 134
trigger28 = Time = 135
trigger29 = Time = 144
trigger30 = Time = 145
trigger31 = Time = 154
trigger32 = Time = 155
trigger33 = Time = 164
trigger34 = Time = 165
trigger35 = Time = 174
trigger36 = Time = 175
trigger37 = Time = 184
trigger38 = Time = 185
trigger39 = Time = 194
trigger40 = Time = 195
trigger41 = Time = 204
trigger42 = Time = 205
trigger43 = Time = 214
trigger44 = Time = 215
trigger45 = Time = 224
trigger46 = Time = 225
trigger47 = Time = 234
trigger48 = Time = 235
anim = 2012
shadow = 64,64,64
postype = p1
ownpal = 1
sprpriority = 2
bindtime = 1

[State 2200, 16]
type = Explod
triggerall = command = "hold_C"
trigger1 = Time = 6
trigger2 = Time = 7
trigger3 = Time = 16
trigger4 = Time = 17
trigger5 = Time = 26
trigger6 = Time = 27
trigger7 = Time = 36
trigger8 = Time = 37
trigger9 = Time = 46
trigger10 = Time = 47
trigger11 = Time = 56
trigger12 = Time = 57
trigger13 = Time = 66
trigger14 = Time = 67
trigger15 = Time = 76
trigger16 = Time = 77
trigger17 = Time = 86
trigger18 = Time = 87
trigger19 = Time = 96
trigger20 = Time = 97
trigger21 = Time = 106
trigger22 = Time = 107
trigger23 = Time = 116
trigger24 = Time = 117
trigger25 = Time = 126
trigger26 = Time = 127
trigger27 = Time = 136
trigger28 = Time = 137
trigger29 = Time = 146
trigger30 = Time = 147
trigger31 = Time = 156
trigger32 = Time = 157
trigger33 = Time = 166
trigger34 = Time = 167
trigger35 = Time = 176
trigger36 = Time = 177
trigger37 = Time = 186
trigger38 = Time = 187
trigger39 = Time = 196
trigger40 = Time = 197
trigger41 = Time = 206
trigger42 = Time = 207
trigger43 = Time = 216
trigger44 = Time = 217
trigger45 = Time = 226
trigger46 = Time = 227
trigger47 = Time = 236
trigger48 = Time = 237
anim = 2013
shadow = 64,64,64
postype = p1
ownpal = 1
sprpriority = 2
bindtime = 1

[State 2200, 13]
type = Explod
triggerall = command = "hold_C"
trigger1 = Time = 8
trigger2 = Time = 9
trigger3 = Time = 18
trigger4 = Time = 19
trigger5 = Time = 28
trigger6 = Time = 29
trigger7 = Time = 38
trigger8 = Time = 39
trigger9 = Time = 48
trigger10 = Time = 49
trigger11 = Time = 58
trigger12 = Time = 59
trigger13 = Time = 68
trigger14 = Time = 69
trigger15 = Time = 78
trigger16 = Time = 79
trigger17 = Time = 88
trigger18 = Time = 89
trigger19 = Time = 98
trigger20 = Time = 99
trigger21 = Time = 108
trigger22 = Time = 109
trigger23 = Time = 118
trigger24 = Time = 119
trigger25 = Time = 128
trigger26 = Time = 129
trigger27 = Time = 138
trigger28 = Time = 139
trigger29 = Time = 148
trigger30 = Time = 149
trigger31 = Time = 158
trigger32 = Time = 159
trigger33 = Time = 168
trigger34 = Time = 169
trigger35 = Time = 178
trigger36 = Time = 179
trigger37 = Time = 188
trigger38 = Time = 189
trigger39 = Time = 198
trigger40 = Time = 199
trigger41 = Time = 208
trigger42 = Time = 209
trigger43 = Time = 218
trigger44 = Time = 219
trigger45 = Time = 228
trigger46 = Time = 229
trigger47 = Time = 238
trigger48 = Time = 239
anim = 2014
shadow = 64,64,64
postype = p1
ownpal = 1
sprpriority = 2
bindtime = 1

[State 3001, end1]
type = changestate
trigger1 = (command != "hold_C") && (Time >= 0)
trigger2 = time = 240
value = 3102

;================================
; Chain driver
;================================
[Statedef 3280]
type = S
movetype = A
physics = N
anim = 3280
velset = 2.3,0,0
ctrl = 0

[State 3201, 2]
type = playsnd
trigger1 = animelem = 1
trigger2 = animelem = 31
value = 221,5

[State 3280, push]
type = playerpush
trigger1 = time >= 0
value = 1

[State 3280, muteki]
type = nothitby
trigger1 = time >= 0
value = SCA
time = 1

[State 3280, width]
type = Width
trigger1 = time >= 0
edge = 60,0

[State 3280, 0]
type = targetbind
trigger1 = time >= 0
pos = 60,0

[State 3280, 1]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 17
trigger4 = animelem = 19
trigger5 = animelem = 31
trigger6 = animelem = 38
attr = S, HA
forcestand = 1
animtype  = hard
damage    = 13 ; 5
givepower = 15
;guardflag = MA
pausetime = 3,2
sparkno = 2
sparkxy = -15,-70
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -2.3
kill = 0
p2stateno = 3207

[State 3280, 2]
type = HitDef
trigger1 = animelem = 9
trigger2 = animelem = 13
trigger3 = animelem = 22
attr = S, HA
animtype  = hard
damage    = 13 ; 5
givepower = 15
;guardflag = MA
pausetime = 3,2
forcestand = 1
sparkno = 2
sparkxy = -20,-40
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -2.3
kill = 0
p2stateno = 3208

[State 3280, 3]
type = HitDef
trigger1 = animelem = 27
trigger2 = animelem = 41
trigger3 = animelem = 43
trigger4 = animelem = 56
trigger5 = animelem = 58
trigger6 = animelem = 66
trigger7 = animelem = 70
trigger8 = animelem = 77
attr = S, HA
animtype  = hard
damage    = 13 ; 5
givepower = 15
;guardflag = MA
pausetime = 1,1
forcestand = 1
sparkno = 2
sparkxy = -15,-70
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -2.3
kill = 0
palfx.time = 3
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
p2stateno = 3207
envshake.time = 15 
envshake.ampl = 2

[State 3280, 4]
type = HitDef
trigger1 = animelem = 36
trigger2 = animelem = 48
trigger3 = animelem = 52
trigger4 = animelem = 61
trigger5 = animelem = 75
attr = S, HA
animtype  = hard
damage    = 13 ; 5
givepower = 15
;guardflag = MA
pausetime = 1,1
forcestand = 1
sparkno = 2
sparkxy = -20,-40
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -2.3
kill = 0
palfx.time = 3
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
p2stateno = 3208
envshake.time = 15 
envshake.ampl = 2

[State 3280, envcolor]
type = envcolor
triggerall = movehit
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 9
trigger4 = animelem = 13
trigger5 = animelem = 17
trigger6 = animelem = 19
trigger7 = animelem = 22
trigger8 = animelem = 27
trigger9 = animelem = 31
trigger10 = animelem = 36
trigger11 = animelem = 38
trigger12 = animelem = 41
trigger13 = animelem = 43
trigger14 = animelem = 48
trigger15 = animelem = 52
trigger16 = animelem = 56
trigger17 = animelem = 58
trigger18 = animelem = 61
trigger19 = animelem = 66
trigger20 = animelem = 70
trigger21 = animelem = 75
trigger22 = animelem = 77
time = 1
under = 1
value = 240,240,240

[State 3280 , 5]
type = Explod
triggerall = NumExplod(2200) < 3
triggerall = Random < 899
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2200
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 120,120
bindtime = 1
ignorehitpause = 1

[State 3280 , 6]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 699
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2201
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 100,100
bindtime = 1
ignorehitpause = 1

[State 3280 , 7]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 549
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2202
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 100,100
bindtime = 1
ignorehitpause = 1

[State 3280, 8]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 599
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2203
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 120,120
bindtime = 1
ignorehitpause = 1

[State 3280 , 9]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 599
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2204
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 150,150
bindtime = 1
ignorehitpause = 1

[State 3280 , 10]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 599
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2205
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 100,100
bindtime = 1
ignorehitpause = 1

[State 3280, end1]
type = ChangeState
trigger1 = AnimTime = 0
value = 3290
ctrl = 0
;------------------
[Statedef 3281]
type = S
movetype = A
physics = N
anim = 3280
velset = 2.3,0,0
ctrl = 0



[State 3201, 2]
type = playsnd
trigger1 = animelem = 1
trigger2 = animelem = 31
value = 221,5

[State 3280, push]
type = playerpush
trigger1 = time >= 0
value = 1

[State 3280, muteki]
type = nothitby
trigger1 = time >= 0
value = SCA
time = 1

[State 3280, width]
type = Width
trigger1 = time >= 0
edge = 60,0

[State 3280, 0]
type = targetbind
trigger1 = time >= 0
pos = 60,0

[State 3280, 1]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 17
trigger4 = animelem = 19
trigger5 = animelem = 31
trigger6 = animelem = 38
attr = S, HA
forcestand = 1
animtype  = hard
damage    = 13 ; 5
givepower = 15
;guardflag = MA
pausetime = 3,2
sparkno = 2
sparkxy = -15,-70
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -2.3
kill = 0
p2stateno = 3207

[State 3280, 2]
type = HitDef
trigger1 = animelem = 9
trigger2 = animelem = 13
trigger3 = animelem = 22
attr = S, HA
animtype  = hard
damage    = 13 ; 5
givepower = 15
;guardflag = MA
pausetime = 3,2
forcestand = 1
sparkno = 2
sparkxy = -20,-40
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -2.3
kill = 0
p2stateno = 3208

[State 3280, 3]
type = HitDef
trigger1 = animelem = 27
trigger2 = animelem = 41
trigger3 = animelem = 43
trigger4 = animelem = 56
trigger5 = animelem = 58
trigger6 = animelem = 66
trigger7 = animelem = 70
trigger8 = animelem = 77
attr = S, HA
animtype  = hard
damage    = 13 ; 5
givepower = 15
;guardflag = MA
pausetime = 1,1
forcestand = 1
sparkno = 2
sparkxy = -15,-70
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -2.3
kill = 0
palfx.time = 3
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
p2stateno = 3207
envshake.time = 15
envshake.ampl = 2

[State 3280, 4]
type = HitDef
trigger1 = animelem = 36
trigger2 = animelem = 48
trigger3 = animelem = 52
trigger4 = animelem = 61
trigger5 = animelem = 75
attr = S, HA
animtype  = hard
damage    = 13 ; 5
givepower = 15
;guardflag = MA
pausetime = 1,1
forcestand = 1
sparkno = 2
sparkxy = -20,-40
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -2.3
kill = 0
palfx.time = 3
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
p2stateno = 3208
envshake.time = 15
envshake.ampl = 2

[State 3280, envcolor]
type = envcolor
triggerall = movehit
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 9
trigger4 = animelem = 13
trigger5 = animelem = 17
trigger6 = animelem = 19
trigger7 = animelem = 22
trigger8 = animelem = 27
trigger9 = animelem = 31
trigger10 = animelem = 36
trigger11 = animelem = 38
trigger12 = animelem = 41
trigger13 = animelem = 43
trigger14 = animelem = 48
trigger15 = animelem = 52
trigger16 = animelem = 56
trigger17 = animelem = 58
trigger18 = animelem = 61
trigger19 = animelem = 66
trigger20 = animelem = 70
trigger21 = animelem = 75
trigger22 = animelem = 77
time = 1
under = 1
value = 240,240,240

[State 3280 , 5]
type = Explod
triggerall = NumExplod(2200) < 3
triggerall = Random < 899
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2200
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 120,120
bindtime = 1
ignorehitpause = 1

[State 3280 , 6]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 699
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2201
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 100,100
bindtime = 1
ignorehitpause = 1

[State 3280 , 7]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 549
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2202
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 100,100
bindtime = 1
ignorehitpause = 1

[State 3280, 8]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 599
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2203
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 120,120
bindtime = 1
ignorehitpause = 1

[State 3280 , 9]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 599
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2204
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 150,150
bindtime = 1
ignorehitpause = 1

[State 3280 , 10]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 599
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2205
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 100,100
bindtime = 1
ignorehitpause = 1

[State 3280, end1]
type = ChangeState
trigger1 = AnimTime = 0
value = 3290
ctrl = 0
;-------------------------
[Statedef 3290]
type = S
movetype = A
physics = S
anim = 3290
velset = 0
ctrl = 0

[State 1000, yudo]
type = Helper
trigger1 = time = 70
name = "yudo0"
ID = 7320
pos = 0,0
postype = back
stateno = 7320
helpertype = normal
keyctrl = 0
ownpal = 0
persistent = 0
sprpriority = 2
size.xscale = 0.32
size.yscale = 0.40



[State 1000, yudo]
type = Helper
trigger1 = time = 70
name = "yudo1"
ID = 7321
pos = 0,0
postype = back
stateno = 7321
helpertype = normal
keyctrl = 0
ownpal = 0
persistent = 0
sprpriority = 2
pausemovetime = 0
size.xscale = 0.32
size.yscale = 0.40

[State 1000, yudo]
type = Helper
trigger1 = time = 90
name = "yudo1"
ID = 7321
pos = 0,0
postype = back
stateno = 7321
helpertype = normal
keyctrl = 0
ownpal = 0
persistent = 0
sprpriority = 2
pausemovetime = 0
size.xscale = 0.32
size.yscale = 0.40

[State 1000, yudo]
type = Helper
trigger1 = time = 90
name = "yudo0"
ID = 7320
pos = 0,0
postype = back
stateno = 7320
helpertype = normal
keyctrl = 0
ownpal = 0
persistent = 0
sprpriority = 2
size.xscale = 0.40
size.yscale = 0.40

[State 1000, yudo]
type = Helper
trigger1 = time = 120
name = "yudo1"
ID = 7321
pos = 0,0
postype = back
stateno = 7321
helpertype = normal
keyctrl = 0
ownpal = 0
persistent = 0
sprpriority = 2
pausemovetime = 0
size.xscale = 0.32
size.yscale = 0.40

[State 1000, yudo]
type = Helper
trigger1 = time = 120
name = "yudo0"
ID = 7320
pos = 0,0
postype = back
stateno = 7320
helpertype = normal
keyctrl = 0
ownpal = 0
persistent = 0
sprpriority = 2
size.xscale = 0.32
size.yscale = 0.40


[State 3290, muteki]
type = nothitby
trigger1 = time >= 0
value = SCA
time = 1

[State 3290, 0]
type = posadd
trigger1 = animelem = 8
x = -10

[State 3290, 1]
type = velset
trigger1 = animelem = 11
x = 6

[State 3290, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, HA
animtype  = Hard
damage    = 75 ; 65
givepower = 15
;guardflag = MA
pausetime = 30,30
sparkno = 3
sparkxy = -15,-60
hitsound   = S3300,0
guardsound = S150,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
fall = 0
ground.velocity = -6
palfx.time = 60
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
;p2stateno = 3207
envshake.time = 30 
envshake.ampl = 3

[State 3290, 3]
type = explod
trigger1 = animelem = 5
Anim = 2206
pos = 60,-110
shadow = 64,64,64
sprpriority = 7
postype = p1
bindtime = 1
ownpal = 1

[State 3290, 4]
type = explod
trigger1 = animelem = 5
Anim = 2206
pos = 60,-70
shadow = 64,64,64
sprpriority = 7
postype = p1
bindtime = 1
ownpal = 1

[State 3290, 5]
type = explod
trigger1 = animelem = 5
Anim = 2206
pos = 20,-60
shadow = 64,64,64
sprpriority = 7
postype = p1
bindtime = 1
ownpal = 1

[State 3290, 6]
type = explod
trigger1 = animelem = 5
Anim = 2207
pos = 16,-120
shadow = 64,64,64
sprpriority = 7
postype = p1
bindtime = 1
ownpal = 1

[State 3290, 7]
type = explod
trigger1 = animelem = 5
Anim = 2207
pos = 40,-60
shadow = 64,64,64
sprpriority = 8
postype = p1
bindtime = 1
ownpal = 1

[State 3201, 2]
type = playsnd
trigger1 = animelem = 5
value = 221,11

[State 200, ƒqƒbƒg’è‹`]
type = HitDef
trigger1 = animelem = 26
attr = S, NP
damage = 40,10
getpower = 300,100
animtype = up
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 10,15
sparkno = 2
guard.sparkno = 2
sparkxy = -25, -80
hitsound = s3300,0
guardsound = s150,1
ground.type = High
ground.slidetime = 5
ground.hittime  = 18
ground.velocity = -2,-12
airguard.velocity = -2.3,-7.8
air.type = High
air.velocity = -2,-12
air.hittime = 20
envshake.time = 15
envshake.ampl = 5
envshake.freq = 120
envshake.phase = 120
fall.recover = 0
fall = 1
p2stateno = 43000

[State 3290, 9]
type = varset
trigger1 = movehit
var(3) = 1

[State 3290, 10]
type = envcolor
trigger1 = animelem = 5
trigger2 = animelem = 26
time = 3
under = 1
value = 240,240,240

[State 3290, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;==========================================================
; 3250 SDM chain drive launch
[Statedef 3250]
type    = S
movetype= I
physics = S
anim = 3209
ctrl = 0
poweradd = -2000
velset = 0,0,0





[State 3250, 2]
type = Explod
trigger1 = AnimElem = 1
anim = F7515
postype = p1
pos = 0,-90
sprpriority = 7
supermove = 1
bindtime = 1
ownpal = 1

[State 3250, 2]
type = Explod
trigger1 = AnimElem = 1
anim = F7510
postype = p1
pos = 0,-90
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
value = S99,9

[State 1000, 1]
type = Projectile
trigger1 = AnimElem = 9
ProjAnim = 2020
ProjID = 2020
ProjHitAnim = -1
ProjRemoveTime = 160
velocity = 5,0
projhits = 20
offset = 0,0
projscale = 0.32,0.40
accel = 0, 0
hitflag = MA
guardflag = MA
attr = S, SP
projshadow = 68,68,68
damage = 8,2
animtype = Hard
getpower = 104
givepower = 50
pausetime = 4,3
sparkno = 0
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 2
ground.hittime = 2
ground.velocity = -5.9
guard.velocity = -10.9
airguard.velocity = -4.0,-3.0
air.velocity = -4,-5
;air.juggle = 1 + var(12)
air.fall = 1
air.recover = 0
fall.recover = 0
air.animtype = Back
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 3

[State 3000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 99,7



[State 3250, end1]
type = changestate
trigger1 = (projcontact2020 = 1) && (p2bodydist X < 30)
value = 3253
ctrl = 0

[State 3250, end1]
type = changestate
trigger1 = projcontact2020 = 1
trigger2 = NumProjID(2020) = 0
trigger2 = AnimElemTime (9) > 1
trigger2 = time <= 110
value = 3251
ctrl = 0

[State 3250, end2]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------
; 3251 SDM chain drive attack success
[Statedef 3251]
type    = S
movetype= A
physics = N
anim = 3202
ctrl = 0
velset = 0,0,0

[State 3252, 0]
type = playerpush
trigger1 = time >= 0
value = 1



[State 3251, 1]
type = posadd
trigger1 = time = 12
x = 20

[State 3251, 1]
type = PlaySnd
trigger1 = time = 16
value = 99,42

[State 3251, 2]
type = velset
trigger1 = time = 16
x = 17 ; 16

[State 3201, 3]
type = veladd
trigger1 = time >= 18 ;20
x = -0.4

[State 3201, 4]
type = VelSet
trigger1 = Vel X <= 0
x = 0.5 ;1

[State 3251, 5]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = (AnimElem = 5) && (!movecontact)
p2facing = 1
attr = S, HA
animtype = hard
damage = 0,0
sparkno = 2
sparkxy = 0,-60
pausetime = 6,6
hitflag = MAF
guardflag = MA
forcestand = 1
hitsound = 5,2
fall.recover = 0
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3, 0
guard.slidetime = 17
guard.velocity = -10

[State 3251, sunglass]
type = envcolor
trigger1 = movehit
time = 1
under = 1
value = 240,240,240

[State 3251, end1]
type = changestate
trigger1 = movehit
value = 3281
ctrl = 1

[State 3201, end1]
type = changestate
trigger1 = animtime = 0
trigger2 = moveguarded
value = 3260
ctrl = 0

;----------------------
; 3253 SDM chain drive attack success when body dist <= 30
[Statedef 3253]
type    = S
movetype= A
physics = N
anim = 3204
ctrl = 0
velset = 0,0,0

[State 3252, 0]
type = playerpush
trigger1 = time >= 0
value = 1

[State 3251, 1]
type = PlaySnd
trigger1 = time = 16
value = 3200,0

[State 3253, shadow]
type = explod
trigger1 = projcontact2020 = 1
anim = 3203
sprpriority = 2
ownpal = 1
shadow = 80,80,80

[State 3253, 2]
type = velset
trigger1 = time = 28
x = 16

[State 3253, 3]
type = veladd
trigger1 = time >= 28
x = -0.4

[State 3203, 4]
type = VelSet
trigger1 = Vel X <= 0
x = 1

[State 3253, 5]
type = HitDef
trigger1 = AnimElem = 1;4
trigger2 = (AnimElem = 5) && (!movecontact)
attr = S, HA
animtype = hard
p2facing = 1
damage = 0,0
sparkno = 2
sparkxy = 0,-60
pausetime = 6,6
hitflag = MAF
forcestand = 1
guardflag = MA
hitsound = 5,2
fall.recover = 0
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3, 0

[State 3253, sunglass]
type = envcolor
trigger1 = movehit
time = 1
under = 1
value = 240,240,240

[State 3253, end1]
type = changestate
trigger1 = movehit
value = 3281
ctrl = 1

[State 3253, end1]
type = changestate
trigger1 = animtime = 0
trigger2 = moveguarded
value = 3260
ctrl = 0

;------------------------
; 3260 guarded
[Statedef 3260]
type    = S
movetype= I
physics = S
anim = 3210
ctrl = 0

[State 3210, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1












;=========================================
[Statedef 3400]
type    = S
movetype= I
physics = S
anim = 3000
ctrl = 0
poweradd = -1000
velset = 0,0,0

[State 3400, 1] ; voice
type = PlaySnd
trigger1 = time = 0
value = 3000,0

[State 3400, 1] ;flash sound
type = PlaySnd
trigger1 = time = 1
value = F1,0

[State 3400, 4]
type = Explod
trigger1 = animelem = 4
anim = 2000
pos = 10,30
supermove = 1
supermovetime = 2
sprpriority = 2
bindtime = 1
removetime = 2
shadow = 64,64,64
ownpal = 1

[State 3400, 4]
type = Explod
trigger1 = animelem = 5
anim = 2001
supermove = 1
supermovetime = 3
sprpriority = 2
bindtime = 1
pos = 8, 20
removetime = 3
shadow = 64,64,64
ownpal = 1

[State 3400, 4]
type = Explod
trigger1 = animelem = 6
anim = 2001
supermove = 1
pos = 3, 15
supermovetime = 3
sprpriority = 2
bindtime = 1
removetime = 3
shadow = 64,64,64
ownpal = 1

[State 3400, 4]
type = Explod
trigger1 = animelem = 7
anim = 2001
supermove = 1
pos = -4, 0
supermovetime = 20
sprpriority = 2
bindtime = 1
removetime = 20
shadow = 64,64,64
ownpal = 1

[State 3400, 4]
type = Explod
trigger1 = time = 30
anim = 1530
pos = -14,-80
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3400, end1]
type = changestate
trigger1 = (command = "hold_A") && (Time >= 34)
value = 3001

[State 3400, end2]
type = changestate
trigger1 = (animtime = 0) && (command != "hold_A")
trigger2 = var(59) = 1
trigger2 = animtime = 0
value = 3002






;----------------------------------------------------------
; 3199 CM chain drive launch
[Statedef 3199]
type    = S
movetype= A
physics = S
anim = 3199
ctrl = 0
poweradd = -1000
velset = 0,0,0
juggle = 10

[State 3199, 1]
type = PlaySnd
trigger1 = time = 0
value = 3200,1

[State 3199, 1]; DM sound
type = PlaySnd
trigger1 = time = 1
value = F1,0

[State 3199 , 2]  ;sun glasses
type = Projectile
trigger1 = AnimElem = 6, =1
Projpriority = 7
ProjAnim = 2020
ProjID = 2020
ProjHitAnim = 2021
projheightbound = -300,0
projedgebound = 320
projstagebound = 320
offset = 26,-90
hitflag = MAP
guardflag = MA
accel = 0, 0.3
velocity = 7,-3
attr = S, HP
projshadow = 68,68,68
damage = 30,2
animtype = hard
air.animtype = up
givepower = 50
pausetime = 0,4
sparkno = 3
hitsound = S220,0
guardsound = S150,1
ground.type = High
ground.slidetime = 36
ground.hittime = 36
ground.velocity = -5
guard.hittime = 24
guard.slidetime = 24
guard.pausetime = 8,10
guard.velocity = -1
air.velocity = -4,-4
air.fall = 1
air.juggle = 10
fall.recover = 0
air.animtype = Back

[State 3199, end1]
type = changestate
trigger1 = projcontact2020 = 1
trigger2 = NumProjID(2020) = 0
trigger2 = AnimElemTime (6) > 1
trigger2 = time <= 56
value = 3201
ctrl = 0

[State 3199, end2]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------
; 6100 Counter Mode start
[Statedef 6100]
type    = S
movetype= I
physics = S
anim = 6100
velset = 0,0
poweradd = -3000
ctrl = 0

[State 6100, 0]
type = playsnd
trigger1 = animelemtime(5) = 0
value = F3,0

[State 6100, 2]
type = SuperPause
trigger1 = animelemtime(5) = 0
time = 18
movetime = 18
anim = -1

[State 6100, BarP1]
type = explod
trigger1 = var(0) = 1
trigger1 = time = 27
anim = 4000
ID = 4000
pos = 8,212
postype = left
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1

[State 6100, blackbarP1]
type = explod
trigger1 = var(0) = 1
trigger1 = animtime = 0
anim = 4400
ID = 4400
pos = 100,224
postype = left
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 9
ownpal = 1
scale = 0,1

[State 6100, BarP2]
type = explod
trigger1 = var(0) = 2
trigger1 = time = 27
anim = 4200
ID = 4000
pos = -103,212
postype = right
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1

[State 6100, blackbarP2]
type = explod
trigger1 = var(0) = 2
trigger1 = animtime = 0
anim = 4410
ID = 4400
pos = -100,224
postype = right
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 9
ownpal = 1
scale = 0,1

[State 6100, 0]
type = varset
trigger1 = animtime = 0
var(6) = 1128
ignorehitpause = 1

[State 6100, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1









;------------------------------------------
; 6200 Armor Mode start
[Statedef 6200]
type    = S
movetype= I
physics = S
anim = 6200
velset = 0,0
poweradd = -3000
ctrl = 0

[State 6200, 0]
type = playsnd
trigger1 = animelemtime(4) = 0
value = F3,0

[State 6200, 1]
type = EnvShake
trigger1 = AnimElemtime(3) = 0
ampl = -4
time = 10

[State 6200, 2]
type = SuperPause
trigger1 = animelemtime(4) = 0
time = 26
movetime = 26
anim = -1

[State 6200, BarP1]
type = explod
trigger1 = var(0) = 1
trigger1 = time = 27
anim = 4100
ID = 4001
pos = 8,212
postype = left
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1

[State 6200, blackbarP1]
type = explod
trigger1 = var(0) = 1
trigger1 = animtime = 0
anim = 4400
ID = 4401
pos = 100,224
postype = left
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 9
ownpal = 1
scale = 0,1

[State 6200, BarP2]
type = explod
trigger1 = var(0) = 2
trigger1 = time = 27
anim = 4300
ID = 4001
pos = -103,212
postype = right
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1

[State 6200, blackbarP2]
type = explod
trigger1 = var(0) = 2
trigger1 = animtime = 0
anim = 4410
ID = 4401
pos = -100,224
postype = right
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 9
ownpal = 1
scale = 0,1

[State 6200, 0]
type = varset
trigger1 = animtime = 0
var(7) = 470
ignorehitpause = 1

[State 6200, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------
; 9995 guard crush helper (left)
[Statedef 9995]
type    = A
movetype= I
anim = 9999 ;invisible
velset = 0,0
sprpriority = 9

[State 9995, 0]
type = explod
trigger1 = NumExplod(9995) = 0
trigger1 = time = 0
trigger1 = facing = facing
anim = 9995
id = 9995
pos = 16, 180
postype = Left
bindtime = 62
removetime = 62
sprpriority = 9

[State 9995, 2]
type = envcolor
trigger1 = time = 0
value = 240,240,240
under = 1
time = 1;2
ignorehitpause = 1
persistent = 0

[State 9995, 3]
type = destroyself
trigger1 = time >= 15

;------------------------
; 9996 guard crush helper (right)
[Statedef 9996]
type    = A
movetype= I
anim = 9999 ;invisible
velset = 0,0
sprpriority = 9

[State 9996, 0]
type = explod
trigger1 = NumExplod(9996) = 0
trigger1 = time = 0
trigger1 = facing = facing
anim = 9996
id = 9996
pos = -100, 180
postype = right
bindtime = 62
removetime = 62
sprpriority = 9

[State 9996, 2]
type = envcolor
trigger1 = time = 0
value = 240,240,240
under = 1
time = 1;2
ignorehitpause = 1
persistent = 0

[State 9996, 3]
type = destroyself
trigger1 = time >= 15


;------------------------
; 9997 counter helper (left)
[Statedef 9997]
type    = A
movetype= I
anim = 9999
velset = 0,0
sprpriority = 9

[State 9997, 0]
type = explod
trigger1 = time = 0
trigger1 = facing = facing
anim = 9997
pos = 16, 195
postype = Left
bindtime = 62
removetime = 62
sprpriority = 9

[State 9997, 2]
type = envcolor
trigger1 = time = 0
value = 240,240,240
under = 1
time = 1;2
ignorehitpause = 1
persistent = 0

[State 9997, 4] ;reset
type = parentvarset
;trigger1 = animtime = 0
trigger1 = p2statetype = L
trigger2 = win
trigger3 = hitcount != 1
var(35)) = 0

[State 9997, 3]
type = destroyself
trigger1 = animtime = 0 ;one tick
;trigger1 = NumExplod(9997) = 0

;------------------------
; 9998 counter helper (right)
[Statedef 9998]
type    = A
movetype= I
anim = 9999
velset = 0,0
sprpriority = 9

[State 9998, 0]
type = explod
trigger1 = time = 0
trigger1 = facing = facing
anim = 9998
pos = -80, 195 ;60
postype = right
bindtime = 62
removetime = 62
sprpriority = 9

[State 9998, 2]
type = envcolor
trigger1 = time = 0
value = 240,240,240
under = 1
time = 1;2
ignorehitpause = 1
persistent = 0

[State 9998, 4] ;reset
type = parentvarset
;trigger1 = animtime = 0
trigger1 = p2statetype = L
trigger2 = win
trigger3 = hitcount != 1
var(35)) = 0

[State 9998, 3]
type = destroyself
trigger1 = animtime = 0 ;one tick
;trigger1 = NumExplod(9997) = 0

;-------------------------------



;------------------------
; 9999 AI switch
[Statedef 9999]
anim = 9999
ctrl = 0

[State 9999, 0]
type = Turn
trigger1 = facing != parent, facing

[State 9999, ¦Û°Ê¨M©wA.I.¬O§_¶}±Ò]
type = ParentVarSet
triggerall = !var(10)
triggerall = parent, RoundState = 2
trigger1 = parent, command = "A"
trigger2 = parent, command = "B"
trigger3 = parent, command = "C"
trigger4 = parent, command = "D"
trigger5 = parent, command = "z"
trigger6 = parent, command = "c"
trigger7 = parent, command = "justfwd"
trigger8 = parent, command = "justback"
trigger9 = parent, command = "justup"
trigger10 = parent, command = "justdown"
var(59) = 0

[State 9999, ¦Û°Ê¨M©wA.I.¬O§_Ãö³¬]
type = ParentVarSet
triggerall = !var(10)
triggerall = parent, RoundState = 2
trigger1 = (command = "A" && parent, command = "A")
trigger2 = (command = "B" && parent, command = "B")
trigger3 = (command = "C" && parent, command = "C")
trigger4 = (command = "D" && parent, command = "D")
trigger5 = (command = "z" && parent, command = "z")
trigger6 = (command = "c" && parent, command = "c")
trigger7 = (command = "justfwd" && parent, command = "justfwd")
trigger8 = (command = "justback" && parent, command = "justback")
trigger9 = (command = "justup" && parent, command = "justup")
trigger10 = (command = "justdown" && parent, command = "justdown")
var(59) = 0

[State 9999, 1]
type = VarSet
triggerall = !var(10)
trigger1 = parent, command = "A"
trigger2 = parent, command = "B"
trigger3 = parent, command = "C"
trigger4 = parent, command = "D"
trigger5 = parent, command = "z"
trigger6 = parent, command = "c"
trigger7 = parent, command = "justfwd"
trigger8 = parent, command = "justback"
trigger9 = parent, command = "justup"
trigger10 = parent, command = "justdown"
var(10) = 1


;==========================================================
[Statedef -2]

[State a]
type = AssertSpecial
trigger1 = RoundState != 2
flag = nobardisplay

[State -2, burn-over]
type = varset
trigger1 = (Var(3) = 1) && (P2movetype != H)
var(3) = 0

[State 35000, StopSnd]
type = StopSnd
trigger1 = Stateno != [35000,35001]
channel = 4

[State -2 , 1]
type = Explod
triggerall = (NumExplod(2200) < 2) && (Random < 899)
trigger1 = ProjHit1001 = 1, < 20
trigger2 = ProjHit1020 = 1, < 20
anim = 2200
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
triggerall = (NumExplod(2200) < 3) && (Random < 349)
trigger1 = ProjHit1001 = 1, < 20
trigger2 = ProjHit1020 = 1, < 20
anim = 2201
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
triggerall = (NumExplod(2200) < 3) && (Random < 299)
trigger1 = ProjHit1001 = 1, < 20
trigger2 = ProjHit1020 = 1, < 20
anim = 2202
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
triggerall = (NumExplod(2200) < 3) && (Random < 249)
trigger1 = ProjHit1001 = 1, < 40
trigger2 = ProjHit1020 = 1, < 40
anim = 2203
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
triggerall = (NumExplod(2200) < 3) && (Random < 149)
trigger1 = ProjHit1001 = 1, < 50
trigger2 = ProjHit1020 = 1, < 50
anim = 2204
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 150,150
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
triggerall = (NumExplod(2200) < 2) && (Random < 99)
trigger1 = ProjHit1001 = 1, < 70
trigger2 = ProjHit1020 = 1, < 70
anim = 2205
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

;==========================For Second shell
[State -2 , 1]
type = Explod
trigger1 = (NumExplod(2200) < 3) && (Random < 899) && (ProjHit1030 = 1, < 40)
anim = 2200
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
trigger1 = (NumExplod(2200) < 3) && (Random < 399) && (ProjHit1030 = 1, < 40)
anim = 2201
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
trigger1 = (NumExplod(2200) < 3) && (Random < 349) && (ProjHit1030 = 1, < 40)
anim = 2202
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
trigger1 = (NumExplod(2200) < 3) && (Random < 299) && (ProjHit1030 = 1, < 60)
anim = 2203
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
trigger1 = (NumExplod(2200) < 3) && (Random < 99) && (ProjHit1030 = 1, < 100)
anim = 2204
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 150,150
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
trigger1 = (NumExplod(2200) < 2) && (Random < 49) && (ProjHit1030 = 1, < 120)
anim = 2205
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

;==================================== For var3
[State -2 , 1]
type = Explod
trigger1 = (NumExplod(2200) < 2) && (Random < 899) && (P2statetype = A) && (var(3) = 1)
anim = 2200
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
trigger1 = (NumExplod(2200) < 3) && (Random < 549) && (P2statetype = A) && (var(3) = 1)
anim = 2201
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
trigger1 = (NumExplod(2200) < 3) && (Random < 449) && (P2statetype = A) && (var(3) = 1)
anim = 2202
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
trigger1 = (NumExplod(2200) < 3) && (Random < 99) && (var(3) = 1)
anim = 2203
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
trigger1 = (NumExplod(2200) < 3) && (Random < 99) && (var(3) = 1)
anim = 2204
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 150,150
bindtime = 1
ignorehitpause = 1

[State -2 , 1]
type = Explod
trigger1 = (NumExplod(2200) < 2) && (Random < 99) && (var(3) = 1)
anim = 2205
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-50
random = 100,100
bindtime = 1
ignorehitpause = 1

[State -2, sunglass]
type = envcolor
trigger1 = projhit2020 = 1
time = 1
under = 1
value = 240,240,240

; stop sounds
; run
[state -2, stopsound]
type = stopsnd
trigger1 = stateno != 100 && prevstateno = 100
trigger2 = var(59)
trigger2 = stateno != 10044 && prevstateno = 10044
channel = 4

[state -2, stopsound]
type = stopsnd
trigger1 = stateno != 100 && stateno != 10044
trigger2 = command = "holddown"
channel = 4

[state -2, stopsound]
type = stopsnd
trigger1 = stateno != 195 && prevstateno = 195
trigger2 = movetype = H
channel = 3

; sliding sound
[State -2, slidesound]
type = PlaySnd
trigger1 = P2stateno = 306
trigger1 = P2movetype = H
trigger1 = P2statetype = A
trigger1 = enemy, Vel Y > 0
trigger1 = enemy, Pos Y > 15
value = 300,0
persistent = 0

[State -2, Left or Right] ; ¤Hª«¦b¥ª¤E
type = VarSet
trigger1 = Var(0) = 0
trigger1 = facing = 1
var(0) = 1

[State -2, Left or Right] ; ¤Hª«¦b¥k¤E
type = VarSet
trigger1 = Var(0) = 0
trigger1 = facing = -1
var(0) = 2


;==================================================================
[Statedef -3]
;----------------------------------
[state -3, nolifebar]
type = assertspecial
trigger1 = roundno = 1; only first round
trigger1 = roundstate < 2
flag = NoBarDisplay

[state -3, 2nd shell juggle]
type = AssertSpecial
trigger1 = p2stateno = 1041 ;hit by 2nd shell
trigger1 = var(11) = 5
trigger1 = stateno != 1040 ; not shell again
flag = NoJuggleCheck

[State -3, juggle eine] ;only eine trigger stuff use
type = varset
trigger1 = stateno = [1000,1040] ; eine trigger, shot and shell
trigger1 = p2statetype = A && p2movetype = H
trigger2 = p2stateno = 1041 ;hit by shell
var(12) = 20

[State -3, juggle eine]
type = varset
trigger1 = stateno = [1000,1040]
trigger1 = p2statetype = A && p2movetype != H
trigger2 = p2statetype = L
var(12) = 0

[State -3, juggle stop] ; juggle limit
type = varset
trigger1 = stateno = [1300,1307] ; minute spike
trigger1 = movehit
trigger2 = p2stateno = 3010 ; hit by heatdrive custom state
trigger3 = stateno = 1505 ; crawbite C kick
trigger3 = movehit
var(13) = 20

[State -3, juggle stop] ; juggle reset
type = varset
trigger1 = p2statetype = L
var(13) = 0

;------------------------------------------------------------------------
; SLOW MOTION
[State -3, varset-projhit]
type = varset
trigger1 = projhit1001 = 1 || projhit1030 = 1 || projhit1020 = 1
var(4) = 28 ; 21

[State -3, var4-minus1]
type = varadd
trigger1 = var(4) > 0
var(4) = -1

[State -3, 6];pausing effect!
type = Pause
trigger1 = stateno != 5900
trigger1 = stateno != [190,195]
trigger1 = (gametime%(var(5))) = 0
trigger1 = var(4) > 0
time = 1

[State -3, var(5)]
type = varset
trigger1 = var(4) = 0
var(5) = 3

[State -3, var(5)add]
type = varadd
trigger1 = var(4) > 0
trigger1 = timemod = 7,0
var(5) = 1

;----------------------------------------------------
; jump sounds

[State -3, jumpsound]
type = PlaySnd
trigger1 = stateno = 40 && animtime = 0
value = 40,0
volume = -80

[state -3, stopsound]
type = stopsnd
trigger1 = stateno != 100 && prevstateno = 100
channel = 4

;-------------------------
; hit sounds

; hit sound in light
[State -3, light sound]
type = PlaySnd
triggerall = random < 249
triggerall = time = 1
triggerall = Alive
triggerall = stateno = 5000
trigger1 = anim = 5000
trigger2 = anim = 5010
trigger3 = anim = 5020
value = 5000,1
volume = 40
ignorehitpause = 1

; hit sound in medium
[State -3, medium sound]
type = PlaySnd
triggerall = random < 249
triggerall = time = 1
triggerall = Alive
triggerall = stateno = 5000
trigger1 = anim = 5001
trigger2 = anim = 5011
trigger3 = anim = 5021
value = 5000,0
volume = 30
ignorehitpause = 1

; hit sound in medium
[State -3, hard sound]
type = PlaySnd
triggerall = random < 249
triggerall = time = 1
triggerall = Alive
triggerall = stateno = 5000
trigger1 = anim = 5002
trigger2 = anim = 5012
trigger3 = anim = 5022
value = 5000,3
volume = 20
ignorehitpause = 1

[State -3, hard sound in air]
type = PlaySnd
triggerall = random < 249
triggerall = Alive
triggerall = stateno = 5020
trigger1 = movetype = H
trigger1 = time = 1
value = 5000,3
volume = 20
persistent = 0
ignorehitpause = 1

; ouch in bounce
[State -3, bounce sound]
type = PlaySnd
;trigger1 = random < 249
trigger1 = stateno = 5100
trigger1 = Alive
trigger1 = time = 1
value = 5000,2
volume = 30

[State -3, removehandflame]
type = RemoveExplod
trigger1 = (prevstateno = 3001 || prevstateno = 3006) && stateno != 3001
trigger2 = movetype = H
trigger3 = prevstateno = 3101 && stateno != 3101
ID = 2010

[State -3, removecrowflame]
type = RemoveExplod
trigger1 = movetype = H
trigger2 = stateno = 3400 || stateno = 3199
ID = 1500

;--------------------------------------------------
; KOF txt messages

; GUARD CRUSH txt display
; uses helper 9995(left) and 9996(right)

; P1
[State -3, guard crush]
type = helper
trigger1 = NumHelper(9995) = 0
trigger1 = p2stateno = 5305
trigger1 = facing = facing
trigger1 = var(0) = 1
helpertype = normal
name = "guardcrush"
id = 9995
stateno = 9995
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1 ;in case flame effect
ignorehitpause = 1

; P2
[State -3, guardcrush]
type = helper
trigger1 = NumHelper(9996) = 0
trigger1 = p2stateno = 5305
trigger1 = facing = facing
trigger1 = var(0) = 2
helpertype = normal
name = "guardcrush"
id = 9996
stateno = 9996
pos = 0,0
postype = right
keyctrl = 0
ownpal = 1
ignorehitpause = 1

;----------------------------------------------------
; COUNTER hit set up
; uses helper 9997(left) and 9998(right)

; Notes: 
; in KOF, only SPECIAL ATTACKS trigger counter hit. This includes:
;    - all special attacks (SA type)
;    - all direction + button attacks (also SA type)
;    - all DM/SDM attacks(HA type)
;    - all jump attacks (NA,SA,HA types) -> this applies to KOF98, KOF99 removed.
;  EXCEPTIONS: throws are not considered as "attacks". And will NOT
;  register as COUNTER HIT.  (NT,ST,HT are all ignored.)
;trigger1 = Enemy, hitdefattr != SCA, NA,NT,ST,HT ;mugen 414 only


[State -3, counter]
type = Varset
trigger1 = p2movetype = A
trigger1 = (p2stateno != [400,440]) && (p2stateno >= 300) 
; stateno >= 300 should include most or all of the common direction+button attacks.
; while p2stateno! = [400,440] takes out the crouching normal attacks for consideration.
trigger2 = p2movetype = I
var(35) = 1 - (p2movetype = I)

[State -3, counter]
type = Varset
trigger1 = var(35) = 1
trigger1 = hitcount <= 1
trigger1 = (p2movetype = H) || (p2stateno = 1041)
trigger1 = (movetype = A) || (ProjHit = 1)
trigger1 = hitdefattr = SCA, NA,SA,HA ; make sure it's not a throw attack
var(35) = 2
ignorehitpause = 1

[State -3, counter]
type = AssertSpecial
trigger1 = var(35) = 2
flag = nojugglecheck

[State -3, counter] ;reest
type = Varset
trigger1 = p2statetype = L
trigger2 = win
trigger3 = hitcount > 1
var(35) = 0

; COUNTER hit txt display
[State -3, counter]
type = helper
trigger1 = NumHelper(9997) = 0
trigger1 = facing = facing
trigger1 = hitcount <= 1
trigger1 = P2statetype != L
trigger1 = var(0) = 1
trigger1 = var(35) = 2
helpertype = normal
name = "counter"
id = 9997
stateno = 9997 ; (left)
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
ignorehitpause = 1

; COUNTER hit txt display
[State -3, counter]
type = helper
trigger1 = NumHelper(9998) = 0
trigger1 = facing = facing
trigger1 = hitcount <= 1
trigger1 = P2statetype != L
trigger1 = var(0) = 2
trigger1 = var(35) = 2
helpertype = normal
name = "counter"
id = 9998
stateno = 9998 ;(right)
pos = 0,0
postype = right
keyctrl = 0
ownpal = 1
ignorehitpause = 1


;---------------------------------------------------------------------------------
; AI stuff

[State -3, AI-switch]
type = Helper
trigger1 = NumHelper(9999) = 0
trigger1 = anim = 0
trigger1 = movetype != H
trigger1 = ctrl = 0
trigger1 = RoundState = 2
Name = "AI switch - Thanks to 'ANMC' && 'Bagalaio'"
id = 9999
pos = 0, 150
stateno = 9999
helpertype = normal
keyctrl = 1

[State -3, AIswitch2]
type = Varset
triggerall = var(59) != 1
triggerall = RoundState != 3
trigger1 = command = "AI_1"
trigger2 = command = "AI_2"
trigger3 = command = "AI_3"
trigger4 = command = "AI_4"
trigger5 = command = "AI_5"
trigger6 = command = "AI_6"
trigger7 = command = "AI_7"
trigger8 = command = "AI_8"
trigger9 = command = "AI_9"
trigger10 = command = "AI_10"
trigger11 = command = "AI_11"
trigger12 = command = "AI_12"
trigger13 = command = "AI_13"
trigger14 = command = "AI_14"
trigger15 = command = "AI_15"
trigger16 = (movetype != A) && (time = 1500) ; if idle for a long time.
var(59) = 0

;---------------------------------------------------------------------------
; AI defense control
;luan
;[State -3, dodge SP]
;type = changestate
;triggerall = var(59) = 1 && ctrl && (statetype != A)
;trigger1 = p2name = "K'"
;trigger1 = p2stateno = 3002 || p2stateno = 3102
;trigger2 = p2name = "Kyo-G"
;trigger2 = p2stateno = 2210 || p2stateno = 2260
;trigger2 = p2bodydist X <= 72
;value = 110

[State -3, jump over projectile]
type = ChangeState
value = 40
triggerall = var(59) = 1 && ctrl
triggerall = Random <= 700
triggerall = p2bodydist X = [70,169]
triggerall = (stateno != (40,52)) && (Anim != (40,52)) 
triggerall = (stateno != 2041) && (stateno != 4044)
triggerall = statetype != A && p2statetype != A && p2movetype != H
trigger1 = p2name = "Kyo-G" || p2name = "Iori-G"
trigger1 = p2stateno = 1000 || p2stateno = 1020

;[State -3, universal AI guard]
;type = ChangeState
;value = 120 + (p2statetype = C)*11
;triggerall = Var(59) = 1 && ctrl
;triggerall = statetype != A
;triggerall = p2movetype = A
;trigger1 = p2bodydist x = (0,65)
;trigger2 = p2stateno > 1999

[State -3, air guard]
type = ChangeState
value = 132
triggerall = var(59) >= 1 && ctrl
trigger1 = p2movetype = A
trigger1 = P2bodydist X <= 40
trigger1 = statetype = A

;-----------------------------------------------------------------
;[State -3, dodge]
;type = changestate
;value = 110
;trigger1 = var(59) = 1 && ctrl
;trigger1 = p2movetype = A && (p2stateno < 2000)
;trigger1 = statetype != A
;trigger1 = FrontEdgeDist > 109
;trigger1 = random <= 899
;trigger1 = P2bodydist X = [20,100]
;trigger1 = Enemy,Ctrl = 0 ; mugen 414 2001 only

;[State -3, dodge]
;type = changestate
;value = 110
;triggerall = var(59) = 1 && ctrl && (statetype != A)
;trigger1 = p2stateno = 5120 && (FrontEdgeDist > 119)
;trigger1 = P2bodydist X = [0,30]

[State -3, AIfightboss]
type = VarSet
Triggerall = var(59) >= 1
Triggerall = var(58) != 1
Trigger1 = p2name = "Goenitz" || p4name = "Goenitz"
var(58) = 1

; trigger all memory strings
[State -3, AI focus]
type = VarSet
Triggerall = var(59) >= 1
Triggerall = var(50) != 1
trigger1 = (p2name = "Kyo-G") || (p2name = "Iori-G")
trigger1 = life <= 750
trigger2 = life <= 450
var(50) = 1 - (RoundState = 3) ; resets every new round

; CM var(6) varadd
[State -3, var6]
type = varadd
trigger1 = var(6) != 0
trigger1 = time >= 0
v = 6
value = -1
ignorehitpause = 1
ignorepausetime = 1

; AM var(7) varadd
[State -3, var7]
type = varadd
trigger1 = var(7) != 0
trigger1 = time >= 0
v = 7
value = -1
ignorehitpause = 1
ignorepausetime = 1

[State -3, 0]
type = modifyexplod
trigger1 = var(6) > 0
ID = 4400
scale = (1128 - Var(6)) / 1128.0,1
ignorehitpause = 1
ignorepausetime = 1

[State -3, 0]
type = modifyexplod
trigger1 = var(7) > 0
ID = 4401
scale = (470 - Var(7)) / 470.0,1
ignorehitpause = 1
ignorepausetime = 1

[State -3, BarRemove]
type = RemoveExplod
trigger1 = var(6) <= 0
trigger1 = stateno != 6100
ID = 4000

[State -3, BarRemove]
type = RemoveExplod
trigger1 = var(6) <= 0
trigger1 = stateno != 6100
ID = 4400

[State -3, BarRemove]
type = RemoveExplod
trigger1 = var(7) <= 0
trigger1 = stateno != 6200
ID = 4001

[State -3, BarRemove]
type = RemoveExplod
trigger1 = var(7) <= 0
trigger1 = stateno != 6200
ID = 4401

[State -3, CM-palfx]
type = palfx
triggerall = (gametime%2) = 0
triggerall = name = "K'"
trigger1 = var(6) > 0
trigger2 = stateno = 6100
time = 1
add = 108,8,8
ignorepausetime = 1
ignorehitpause = 1

[State -3, AM-palfx]
type = palfx
triggerall = (gametime%2) = 0
triggerall = name = "K'"
trigger1 = var(7) > 0
trigger2 = stateno = 6200
time = 1
add = 96,96,16
ignorepausetime = 1
ignorehitpause = 1

[State -3, CM bar end]
type = Explod
trigger1 = var(0) = 1
trigger1 = var(6) = 1
anim = 4001
pos = 8,212
postype = left
bindtime = 1
vel = -7,0
removetime = 16
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 7
ownpal = 1
supermove = 1

[State -3, CM BarP2 remove]
type = explod
trigger1 = var(0) = 2
trigger1 = var(6) = 1
anim = 4201
pos = -103,212
postype = right
bindtime = 1
vel = 7,0
removetime = 16
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 7
ownpal = 1
supermove = 1

[State -3, AM bar end]
type = Explod
trigger1 = var(0) = 1
trigger1 = var(7) = 1
anim = 4101
pos = 8,212
postype = left
bindtime = 1
vel = -7,0
removetime = 16
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 7
ownpal = 1
supermove = 1

[State -3, AM BarP2 remove]
type = explod
trigger1 = var(0) = 2
trigger1 = var(7) = 1
anim = 4301
pos = -103,212
postype = right
bindtime = 1
vel = 7,0
removetime = 16
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 7
ownpal = 1
supermove = 1

[State -3, CM-AM poweroff]
type = powerset
trigger1 = 1
trigger1 = var(6) != 0 || var(7) != 0
value = 0

;[state -3, debug output]
;type = DisplayToClipboard
;trigger1 = 1
;text="- AI :%d, juggle13=:%d, counter35=:%d, p2bodydistX=:%d"
;params = var(59), var(13), var(35), floor(p2bodydist X)

;[state -3, debug output]
;type = AppendToClipboard
;trigger1 = 1
;text="\n- CM :%d, AM :%d"
;params = var(6), var(7)


;–³Ž®
[Statedef 975]
type    = S
movetype= I
physics = S
poweradd = -3000
ctrl = 0
velset = 0,0,0
anim = 975

;----------------------------------------
[State -2, Helper]
type = Helper
triggerall = !numhelper(40001)
trigger1 = time = 15
helpertype = normal
name = "HSDM"
ID = 40001
stateno = 40001
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
---------------------------------------

[State AssertSpecial] 
type = AssertSpecial 
trigger1 = stateno = 975
flag = noFG
ignorehitpause = 1

[State 975]
type = PlaySnd
trigger1 = time = 0
value = F3,0

[State 975]
type = PlaySnd
trigger1 = time = 0
value = 221,24

[State 975]
type = Explod
trigger1 = time = 0
anim = F7120
postype = p1
pos = 0,-90
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 975]
type = Explod
trigger1 = time = 0
anim = F7125
postype = p1
pos = 0,-90
sprpriority = 1
supermove = 1
bindtime = 1
ownpal = 1

[State 975]
type = envcolor
trigger1 = time = 0
time = 60
under = 1
value = 0, 0, 0

[state 975]
type = superpause
trigger1 = time = 0
anim = -1
movetime = 41
time = 41

[state 975]
type = changestate
trigger1 = animtime = 0
value = 976

;---------------------
[statedef 976]
type = S
movetype = A
physics = S
anim = 976
ctrl = 0
velset = 0, 0, 0

[State AssertSpecial] 
type = AssertSpecial 
trigger1 = stateno = 976
flag = noFG
ignorehitpause = 1

;[state 13502]
;type = afterimage
;trigger1 = time = 0
;time = 100
;palbright = 68,68,68

[State 13504, 1]
type = PosAdd
trigger1 = AnimElem = 2
x = 10

[State 3800, 1]
type = explod
;trigger1 = facing = 1
trigger1 = time = 1
ID = 13200
pos = 0,0
postype = LEFT
anim = 13201
bindtime = 235
removetime = 29
sprpriority = -3
ownpal = 1
removeongethit = 1
supermove = 1
supermovetime = 999
scale = 1.09,1.09

[state 13501]
type = changestate
trigger1 = animtime = 0
value = 0
velset = 0, 0, 0
ctrl = 1


[state 13502]
type = HitDef
trigger1 = animelem = 2
persistent = 0
attr = S, HA
animtype  = hard
damage    = 50
givepower = 12,6
;hitflag = HMAL
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = 2
sparkxy = -10,-90
hitsound   = S230,0
guardsound  = S150,1
ground.type = Low
ground.velocity = 0,0
ground.hittime = 80
velset = 0, 0, 0
kill = 0
p2stateno = 5000

[state 13503]
type = envcolor
trigger1 = movehit
value = 240,240,240
time = 1
under = 0

[state 13503]
type = envshake
trigger1 = movehit
ampl = -4
time = 20

[State 3800, 1]
type = explod
;trigger1 = facing = 1
trigger1 = time = 1
ID = 1003
pos = 0,0
postype = p2
anim = 1003
bindtime = 24
removetime = 24
sprpriority = -3
ownpal = 1
removeongethit = 1
supermove = 1
supermovetime = 999
scale = 1.09,1.09


[state 976]
type = changestate
trigger1 = movehit
value = 977

;---------------------
[statedef 977]
type = S
movetype = A
physics = S
anim = 977
ctrl = 0
velset = 0, 0, 0

[State 3000, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 83

[State AssertSpecial] 
type = AssertSpecial 
trigger1 = stateno = 977
flag = noFG
ignorehitpause = 1

[State 3215]
type = pause
trigger1 = Enemy,Alive = 1
trigger1 = Animelem = 1 >= 0
trigger1 = Timemod = 2,0
time = 3


[state 13501]
type = changestate
trigger1 = animtime = 0
value = 0
velset = 0, 0, 0
ctrl = 1

[state 13502]
type = HitDef
trigger1 = animelem = 3
persistent = 0
attr = S, HA
animtype  = hard
damage    = 25
givepower = 12,6
;hitflag = HML
hitflag = MAF
;guardflag = MA
pausetime = 12,12
sparkno = 2
sparkxy = -10,-90
hitsound   = S240,0
ground.type = High
ground.velocity = -4,0
ground.hittime = 80
velset = 0, 0, 0
kill = 0
p2stateno = 5000

[state 13503]
type = envcolor
trigger1 = animelem = 2
trigger2 = animelem = 9
trigger3 = animelem = 11
trigger4 = animelem = 12
trigger5 = animelem = 14
trigger6 = animelem = 16
trigger7 = animelem = 19
trigger8 = animelem = 20
value = 240,240,240
time = 2
under = 0

[state 13503]
type = envshake
trigger1 = animelem = 2
trigger2 = animelem = 20
ampl = -6
time = 100

[State 3800, 1]
type = explod
;trigger1 = facing = 1
trigger1 = time = 1
ID = 13200
pos = 0,0
postype = LEFT
anim = 13201
bindtime = 235
removetime = 100
sprpriority = -3
ownpal = 1
removeongethit = 1
supermove = 1
supermovetime = 999
scale = 1.09,1.09

[state 4100 , playsnd]
type = PlaySnd
trigger1 = animelem = 4
value = 221,26
persistent = 2

[state 3901 ,shake]
type = envshake
trigger1 = animelem = 5
trigger2 = AnimElem = 6
trigger3 = AnimElem = 7
trigger4 = AnimElem = 9
trigger5 = AnimElem = 11
trigger6 = AnimElem = 12
trigger7 = animelem = 13
ampl = -2
time = 50

[state 3901 ,shake]
type = envshake
trigger1 = animelem = 14
trigger2 = AnimElem = 15
trigger3 = AnimElem = 16
ampl = -3
time = 50

[state 3901 ,shake]
type = envshake
trigger1 = animelem = 17
trigger2 = AnimElem = 18
trigger3 = AnimElem = 19
ampl = -4
time = 50

[State 100, 3]
type = PlaySnd
trigger1 = animelem = 8
value = 221,27

[state 977]
type = changestate
trigger1 = animelem = 56
value = 978


[Statedef 978]
type = S
movetype = A
physics = N
anim = 978

[State 100, 3]
type = PlaySnd
trigger1 = animelem = 1
value = 99,48
channel = 0

[State 3000, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 215

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6
trigger3 = AnimElem = 8
trigger4 = AnimElem = 10
trigger5 = AnimElem = 12
trigger6 = AnimElem = 14
trigger7 = AnimElem = 16
trigger8 = AnimElem = 18
trigger9 = AnimElem = 20
trigger10 = AnimElem = 22
trigger11 = AnimElem = 24
trigger12 = AnimElem = 26
trigger13 = AnimElem = 28
trigger14 = AnimElem = 30
trigger15 = AnimElem = 32
trigger16 = AnimElem = 34
trigger17 = AnimElem = 36
trigger18 = AnimElem = 38
trigger19 = AnimElem = 40
trigger20 = AnimElem = 42
trigger21 = AnimElem = 44
trigger22 = AnimElem = 46
x = 2.5
y = 0
;ignorehitpause =
;persistent =


[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6
trigger3 = AnimElem = 8
trigger4 = AnimElem = 10
trigger5 = AnimElem = 12
trigger6 = AnimElem = 14
trigger7 = AnimElem = 16
trigger8 = AnimElem = 18
trigger9 = AnimElem = 20
trigger10 = AnimElem = 22
trigger11 = AnimElem = 24
trigger12 = AnimElem = 26
trigger13 = AnimElem = 28
trigger14 = AnimElem = 30
trigger15 = AnimElem = 32
trigger16 = AnimElem = 34
trigger17 = AnimElem = 36
trigger18 = AnimElem = 38
trigger19 = AnimElem = 40
trigger20 = AnimElem = 42
trigger21 = AnimElem = 44
trigger22 = AnimElem = 46
attr = S, NA
animtype = Med
getpower = 125
givepower = 80
damage = 40,10
guardflag = M
hitflag = MAF
pausetime = 8,12
sparkno = 2
sparkxy = -10,-80
hitsound = S230,0
guardsound = S150,1
ground.type = High
ground.slidetime = 8
ground.hittime = 15
ground.velocity = -7
guard.velocity = -5
air.velocity = -2,-2
airguard.velocity = -2,-1
air.cornerpush = 1
air.animtype = Back
air.fall = 1
fall.recover = 0

[State 330 , 1]
type = HitDef
trigger1 = AnimElem = 50
attr = S, NA
animtype  = Hard
damage    = 40
getpower  = 0
givepower = 30
pausetime = 16,16
sparkxy = -10,-74
sparkno = 3
hitflag = MA
guardflag = -1
hitsound   = S240,0
guardsound = S150,1
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -5,-4
air.velocity = -5,-4
air.animtype = Back
fall = 1
fall.recover = 0


[State 1270, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;–³Ž®@‘ŠŽè@‚k‚‚—
[Statedef 979]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -2

[State 2205, 2]
type = posset
trigger1 = 1
y = 0

[State 2006]
type= Changeanim2
trigger1 =Time=0
value= 979

[State 2006]
type = SelfState
trigger1 = animtime = 0
value = 5100

;–³Ž®@‘ŠŽè@‚g‚‰‚‡‚ˆ
[Statedef 980]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -2

[State 2205, 2]
type = posset
trigger1 = 1
y = 0

[State 2006]
type= Changeanim2
trigger1 =Time=0
value= 980

[State 2006]
type = SelfState
trigger1 = animtime = 0
value = 5100






;ƒNƒŠƒ€ƒ]ƒ“
[Statedef 13501]
type    = S
movetype= I
physics = S
poweradd = -2000
ctrl = 0
velset = 0,0,0
anim = 13501

[State AssertSpecial] 
type = AssertSpecial 
trigger1 = stateno = 13501
flag = noFG
ignorehitpause = 1

[State 13501]
type = PlaySnd
trigger1 = time = 0
value = F2,0

[State 13501]
type = PlaySnd
trigger1 = time = 0
value = 221,12
channel = 0

[State 9989, flash1]
type = Explod
trigger1 = time = 0
anim = 13506
postype = p1
pos = 0,0
removetime = 68
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1



[State 9989, flash2]
type = Explod
trigger1 = time = 0
anim = F7515
postype = p1
pos = 0,-90
sprpriority = 1
supermove = 1
bindtime = 1
ownpal = 1

[State 9899, BGcolor]
type = envcolor
trigger1 = time = 0
time = 60
under = 1
value = 0, 0, 0

[state 13501]
type = superpause
trigger1 = time = 0
anim = -1
movetime = 55
time = 55


[state 13501]
type = changestate
trigger1 = animtime = 0
value = 13502


;------------
[statedef 13502]
type = S
movetype = A
physics = S
anim = 13502
ctrl = 0
velset = 0, 0, 0

[State AssertSpecial] 
type = AssertSpecial 
trigger1 = stateno = 13502
flag = noFG
ignorehitpause = 1

[state 13502]
type = afterimage
trigger1 = time = 0
time = 22
palbright = 68,68,68

[State 3800, 1]
type = explod
;trigger1 = facing = 1
trigger1 = time = 1
ID = 13200
pos = 0,0
postype = LEFT
anim = 13202
bindtime = 235
removetime = 28
sprpriority = -3
ownpal = 1
removeongethit = 1
supermove = 1
supermovetime = 999
scale = 1.09,1.09

[State 110, Vel Y]
type = VelSet
trigger1 = Time >= 0
x = 5

[State 110, 3]
type = VelSet
trigger1 = Time >= 24
x = 0


[state 13501]
type = changestate
trigger1 = animtime = 0
value = 0
velset = 0, 0, 0
ctrl = 1

[state 13502]
type = HitDef
trigger1 = time = 0
persistent = 0
attr = S, HA
animtype  = hard
damage    = 50
givepower = 12,6
hitflag = HMAL
guardflag = MA
pausetime = 4,6
sparkno = 2
sparkxy = -10,-90
hitsound   = S2000,0
guardsound  = S150,1
ground.type = Low
ground.velocity = 0,0
ground.hittime = 160
velset = 0, 0, 0
kill = 0
p1stateno = 13504
p2stateno = 13510
envshake.time = 15 
envshake.ampl = 2

[state 13502]
type = playsnd
trigger1 = movehit
value = 221,3

[state 13503]
type = envcolor
trigger1 = movehit
value = 240,240,240
time = 1
under = 0

[state 13503]
type = envshake
trigger1 = movehit
ampl = -15
time = 1

[state 13502]
type = changestate
trigger1 = movehit
value = 13503

;-----------
[statedef 13503]
type = S
movetype= I
physics = S
ctrl = 0
anim = 13503
;velset = 15, 0, 0

[State AssertSpecial] 
type = AssertSpecial 
trigger1 = stateno = 13503
flag = noFG
ignorehitpause = 1

[State 110, Vel Y]
type = VelSet
trigger1 = Time >= 0
x = 5

[State 110, 3]
type = VelSet
trigger1 = Time >= 24
x = 0

[State 3800, 1]
type = explod
;trigger1 = facing = 1
trigger1 = time = 0
ID = 13200
pos = 0,0
postype = LEFT
anim = 13202
bindtime = 300
removetime = 180
sprpriority = -3
ownpal = 1
removeongethit = 1
supermove = 1
supermovetime = 999
scale = 1.09,1.09

[state 13503]
type = changestate
trigger1 = animtime = 0
value = 13504

[statedef 13504]
type = S
movetype = A
physics = S
ctrl = 0
anim = 13504
velset = 0, 0, 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 992
ID = 992
pos = 0,-70
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 37
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;trans =
;persistent =
;supermove = 0
;pausemove = 0


[state 13502]
type = playsnd
trigger1 = animelem = 1
value = 221,3

[State AssertSpecial] 
type = AssertSpecial 
trigger1 = stateno = 13504
flag = noFG
ignorehitpause = 1

[State 3800, 1]
type = explod
;trigger1 = facing = 1
trigger1 = time = 1
ID = 13200
pos = 0,0
postype = LEFT
anim = 13202
bindtime = 235
removetime = 170
sprpriority = -3
ownpal = 1
removeongethit = 1
supermove = 1
supermovetime = 999
scale = 1.09,1.09

[State 3000, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 195

[State 13504, 1]
type = PosAdd
trigger1 = AnimElem = 1
x = P2bodydist X + 100

[State 3700,Turn]
type = Turn
trigger1 = animelem = 6

[state 13504]
type = playsnd
trigger1 = animelem = 23
value = 99,42

[state 13504]
type = HitDef
trigger1 = animelem = 23,0
trigger2 = animelem = 23,3
;persistent = 0
attr = S, HP
animtype  = up
damage    = 60
givepower = 12,6
guardflag = M
pausetime = 2,2
sparkno = S2200
sparkxy = -10,-60
hitsound   = S221,0
ground.velocity = 0,-2
ground.hittime = 20
velset = 0, 0, 0
envshake.time = 15 
envshake.ampl = 4
fall = 1
fall.recover = 0
palfx.time = 70
palfx.mul = 30,20,20
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
p2facing = 1      

;[state 13504]
;type = explod
;trigger1 = movehit
;anim = 2204
;postype = p2
;pos = 10,-20
;removetime = 1

[state 13504]
type = envcolor
trigger1 = animelem = 13,0
value = 240,240,240
time = 1
under = 0


[state 13504]
type = HitDef
;trigger1 = time >= 0
trigger1 = animelem = 24,1
trigger2 = animelem = 24,2
;persistent = 0
attr = S, HP
animtype  = up
damage    = 80
givepower = 12,6
guardflag = MA
pausetime = 1,1
sparkno = S2200
sparkxy = -10,-80
hitsound   = S221,0
air.velocity = 0,-5
ground.hittime = 20
velset = 0, 0, 0
envshake.time = 15 
envshake.ampl = 4
fall = 1
fall.recover = 0

[state 13504]
type = envcolor
trigger1 = animelem = 24,0
value = 240,240,240
time = 1
under = 0

[state 13504]
type = HitDef
;trigger1 = time >= 0
trigger1 = animelem = 25,3
trigger2 = animelem = 25,5
;persistent = 0
attr = S, HP
animtype  = up
damage    = 80
givepower = 0,0
guardflag = MA
pausetime = 0,0
sparkno = S2200
sparkxy = -10,-120
hitsound   = S221,0
air.velocity = 0,-6
ground.hittime = 20
velset = 0, 0, 0
envshake.time = 15 
envshake.ampl = 4
fall = 1
fall.recover = 0

[state 13504]
type = envcolor
trigger1 = animelem = 25,2
value = 240,240,240
time = 1
under = 0

[state 13504]
type = HitDef
;trigger1 = time >= 0
trigger1 = animelem = 25,8
;persistent = 0
attr = S, HA
animtype  = up
damage    = 70
givepower = 0,0
guardflag = MA
pausetime = 0,0
sparkno = S2200
sparkxy = -10,-160
hitsound   = S221,0
air.velocity = 0,-7
ground.hittime = 20
velset = 0, 0, 0
envshake.time = 15 
envshake.ampl = 4
fall = 1
fall.recover = 0

[state 13504]
type = envcolor
trigger1 = animelem = 25,8
value = 240,240,240
time = 1
under = 0

[state 13504]
type = HitDef
;trigger1 = time >= 0
trigger1 = animelem = 25,10
;persistent = 0
attr = S, HP
animtype  = up
damage    = 120
givepower = 0,0
guardflag = MA
pausetime = 0,0
sparkno = S2200
sparkxy = -10,-200
hitsound   = S221,0
air.velocity = -1,-25
ground.hittime = 20
velset = 0, 0, 0
fall = 1
fall.recover = 0
envshake.time = 25 
envshake.ampl = 7
envshake.freq = 160
fall.envshake.ampl = 6 
fall.envshake.freq = 180
fall.envshake.time = 15
mindist = 50,-100 
maxdist = 100,-10
yaccel = 1

[State 2004]
type = pause
trigger1 = Enemy,Alive = 1
trigger1 = time > 120
trigger1 = time < 145
trigger1 = Timemod = 1,0
time = 1

[state 13504]
type = envcolor
trigger1 = animelem = 25,10
value = 240,240,240
time = 1
under = 0

[State 3901 , 9]
type = Explod
trigger1 = animelem = 23
trigger1 = movehit
trigger2 = animelem = 23,2
trigger2 = movehit
anim = 3301
ID = 3301
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,0
bindtime = 1
random = 10,10
ignorehitpause = 2
scale = 1.4,1.4

[state 13504]
type = playsnd
trigger1 = animelem = 23
value = 3300,0
channel = 3

;[state 13504]
;type = explod
;trigger1 = movehit
;anim = 2204
;postype = p2
;pos = 10,-20
;removetime = 1

[state 13501]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;ƒNƒŠƒ€ƒ]ƒ“@‘ŠŽè
[Statedef 13510]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -2

[State 2205, 2]
type = posset
trigger1 = 1
y = 0

[State 2006]
type= Changeanim2
trigger1 =Time=0
value= 13510

[State 2006]
type = SelfState
trigger1 = animtime = 0
value = 5100

;ƒNƒŠƒ€ƒ]ƒ“@‚d‚m‚c



; narow spike
[Statedef 13505]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0,0
anim = 13505

;14

;[state 13505]
;type = velset
;trigger1 = time = 0
;Y = 10

[state 13505]
type = posset
trigger1 = time = 0
Y = 0

[state 13505]
type = velset
trigger1 = pos Y >= 0
Y = 0

[State 1301, 5]
type = ChangeState
trigger1 = var(59) = 1
trigger1 = !p2statetype = a
trigger1 =  movehit
trigger1 = time = 23
value = 990
ctrl = 0


[state 13505]
type = HitDef
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = diagup
damage    = 100
givepower = 12,6
hitflag = HML
guardflag = L
pausetime = 8,10
sparkno = 2
sparkxy = -10,-40
hitsound   = S240,0
ground.velocity = -5,-6
ground.hittime = 180
velset = 0, 0, 0
fall = 1
fall.recover = 0

[State 13505]
type = PlaySnd
trigger1 = Time = 0
value = 1300,1

[State 13505]
type = PlaySnd
trigger1 = Time = 2
value = 400,0

[state 13505, vel x]
type = velset
trigger1 = time = 0
x = 12

;[State 13505]
;type = VelSet
;trigger1 = Time >= 6
;x = 13

[state 13505]
type = veladd
trigger1 = animelem >= 3
x = 10

[state 13505]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;ŒhˆÓ
[Statedef 970]
type = S
movetype = I
physics = S
anim = 970
velset = 0
ctrl = 0

[State 970]
type = PlaySnd
trigger1 = Time = 5
value = 5210,0
channel = 3

[State 970]
type = CtrlSet
trigger1 = time >= 30
value = 1

[State 970]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;ƒo[ƒjƒ“ƒOƒRƒƒi
[Statedef 990]
type    = S
movetype= I
physics = S
poweradd = -1000
ctrl = 0
velset = 0,0,0
anim = 990

[State 850, Slash hit(T)]
type = Helper
trigger1 = time = 350
ID = 6850
stateNo = 6850
name = "Slash(T)"
postype = P2
pos = 0,-20
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 350
value = S99,43

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 53
value = S99,42



[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 344
anim = 990
sound = S99,41
pos = 0,0
move = 0
movetime = 344
darken = 1
p2defmul = 0
poweradd = 0
unhittable = 1
;ignorehitpause =
;persistent =

[State 1000, 1]
type = Projectile
trigger1 = AnimElem = 53
ProjAnim = 992
ProjID = 992
ProjHitAnim = -1
ProjRemoveTime = 37
projhits = 1
offset = 0,-70
projscale = 1,1
accel = 0, 0
hitflag = MA
guardflag = MA
attr = S, SP
projshadow = 68,68,68
damage = 500,50
animtype = Hard
getpower = 104
givepower = 50
pausetime = 4,3
fall = 1
sparkno = 0
hitsound = s99,44
guardsound = 99,42
ground.type = High
ground.slidetime = 20
ground.hittime = 30
ground.velocity = -5.9
guard.velocity = -10.9
airguard.velocity = -4.0,-3.0
air.velocity = -4,-5
;air.juggle = 1 + var(12)
air.fall = 1
air.recover = 0
fall.recover = 0
air.animtype = Back
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 3





[State 9989, flash1]
type = Explod
trigger1 = time = 0
anim = F7500
postype = p1
pos = -45,-75
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 9989, flash2]
type = Explod
trigger1 = time = 0
anim = F7505
postype = p1
pos = -45,-75
sprpriority = 1
supermove = 1
bindtime = 1
ownpal = 1

[State 9899, BGcolor]
type = envcolor
trigger1 = time = 0
time = 200
under = 1
value = 0, 0, 0



[state 13501]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;’Í‚Ý“Š‚°—pŽa‚èƒGƒtƒFƒNƒg
[Statedef 6850]
type     = A
movetype = I
physics  = N
anim     = 993
velset   = 0,0
ctrl     = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S99,45


[State 3000, Slash1]
type = Explod
trigger1 = time = 0
anim = 6008
ID = 6851
pos = 0,-30
posyype = P1
sprpriority = 5
supermove = 1
removetime = 60
bindtime = -1
ownpal = 1

[State 3000, Slash2]
type = Explod
trigger1 = time = 2
anim = 6008
ID = 6852
pos = 0,-50
posyype = P1
sprpriority = 5
supermove = 1
removetime = 60
bindtime = -1
ownpal = 1

[State 3000, Slash3]
type = Explod
trigger1 = time = 4
anim = 6008
ID = 6853
pos = 0,-70
posyype = P1
sprpriority = 5
supermove = 1
removetime = 60
bindtime = -1
ownpal = 1

[State 3000, Slash4]
type = Explod
trigger1 = time = 6
anim = 6008
ID = 6854
pos = 0,-90
posyype = P1
sprpriority = 5
supermove = 1
removetime = 60
bindtime = -1
ownpal = 1

[State 3000, Slash5]
type = Explod
trigger1 = time = 8
anim = 6008
ID = 6855
pos = 0,-110
posyype = P1
sprpriority = 5
supermove = 1
removetime = 60
bindtime = -1
ownpal = 1

[State -2]
type = ModifyExplod
trigger1 = time < 12
ID = 6851
scale = (2+time*.5)*.3,ifelse(time>10,.2,(.5+time*.05)*.2)
ignorehitpause = 1
ignorepausetime = 1
[State -2]
type = ModifyExplod
trigger1 = time < 14
ID = 6852
scale = (2+(time-2)*.5)*.3,ifelse(time>12,.2,(.5+(time-2)*.05)*.2)
ignorehitpause = 1
ignorepausetime = 1
[State -2]
type = ModifyExplod
trigger1 = time < 16
ID = 6853
scale = (2+(time-4)*.5)*.3,ifelse(time>14,.2,(.5+(time-4)*.05)*.2)
ignorehitpause = 1
ignorepausetime = 1
[State -2]
type = ModifyExplod
trigger1 = time < 18
ID = 6854
scale = (2+(time-6)*.5)*.3,ifelse(time>16,.2,(.5+(time-6)*.05)*.2)
ignorehitpause = 1
ignorepausetime = 1
[State -2]
type = ModifyExplod
trigger1 = time < 20
ID = 6855
scale = (2+(time-8)*.5)*.3,ifelse(time>18,.2,(.5+(time-8)*.05)*.2)
ignorehitpause = 1
ignorepausetime = 1

[State -2]
type = ModifyExplod
trigger1 = time > 32
ID = 6851
scale = 2.4, 0.5-(time-32)*.02
ignorehitpause = 1
ignorepausetime = 1
[State -2]
type = ModifyExplod
trigger1 = time > 32
ID = 6852
scale = 2.4, 0.5-(time-32)*.02
ignorehitpause = 1
ignorepausetime = 1
[State -2]
type = ModifyExplod
trigger1 = time > 32
ID = 6853
scale = 2.4, 0.5-(time-32)*.02
ignorehitpause = 1
ignorepausetime = 1
[State -2]
type = ModifyExplod
trigger1 = time > 32
ID = 6854
scale = 2.4, 0.5-(time-32)*.02
ignorehitpause = 1
ignorepausetime = 1
[State -2]
type = ModifyExplod
trigger1 = time > 32
ID = 6855
scale = 2.4, 0.5-(time-32)*.02
ignorehitpause = 1
ignorepausetime = 1

[state 6008]
type = destroyself
trigger1 = time = 57

[Statedef 991]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 991
velset = 0,0,0

[State 1006, var-reset]
type = varset
trigger1 = time = 0
var(2) = 0

[State 1006, 0]
type = PlaySnd
trigger1 = Time = 0
value = 1000,1

[State 1006, 0] ;flame burst
type = PlaySnd
trigger1 = AnimElem = 3, = 1
value = 1000,0
volume = 40

[State 1270, 7]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
animtype = Hard
damage = 70,5
getpower  = 40
givepower = 20
pausetime = 10,12
guard.pausetime = 0,4
sparkno = -1
sparkxy = 0,-60
hitsound = S221,25
hitflag = MAF
guardflag = M
guardsound = S150,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -4
guard.hittime = 30
air.type = Low
air.slidetime = 30
air.hittime = 17
air.velocity = -2,-4
air.hittime = 30
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
palfx.time = 60
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84

[State 1270, 7]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype = Hard
damage = 80,15
getpower  = 40
givepower = 20
pausetime = 10,12
guard.pausetime = 0,4
sparkno = -1
sparkxy = 0,-60
hitsound = S221,25
hitflag = MAF
guardflag = M
guardsound = S150,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0,-0
guard.hittime = 30
air.type = Low
air.slidetime = 30
air.hittime = 17
air.velocity = -2,-6
air.hittime = 30
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
palfx.time = 60
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84

[State 1270, 7]
type = HitDef
trigger1 = AnimElem = 4;3,5
attr = S, HA
animtype = diagup
damage = 140,20
getpower  = 40
givepower = 20
pausetime = 10,12
guard.pausetime = 0,4
sparkno = S936
sparkxy = 0,-50
hitsound = S2200,0
hitflag = MAF
guardflag = M
guardsound = S150,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -3,-8
guard.hittime = 30
air.type = Low
air.slidetime = 30
air.hittime = 17
air.velocity = -2,-6
air.hittime = 30
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
palfx.time = 60
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84

[State 1010, 5]
type = Projectile
trigger1 = AnimElem = 11
ProjAnim = 13205
projhitanim = 13205
;projcancelanim = 13205
;projremanim = 13205
projremovetime = 1
ProjID = 1020
projhits = 2
offset = -10,-65
velocity = 0,0
accel = 0, 0
attr = S, SP
projshadow = 68,68,68
damage = 180,10
animtype = Hard
getpower = 42
givepower = 50
hitflag = MAFD
guardflag = MA,L
pausetime = 0,16
guard.pausetime = 0,7
sparkno = 2
sparkxy = 40,0
hitsound = S2000,0
guardsound = S150,1
ground.type = High
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -2,0
guard.velocity = -4 ; -4
airguard.velocity = -4.0,-3.0
air.velocity = -2,-5.5
;air.juggle = 1 ;+ var(12)
air.animtype = Back
air.recover = 0
fall.recover = 0 
palfx.time = 19
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
projscale = 1.5,1.5

[State 1010, 5]
type = Projectile
trigger1 = AnimElem = 14
ProjAnim = 13206
projcancelanim = 13206
;projremanim = 13205
projremovetime = 5
ProjID = 1021
projhits = 1
offset = -10,-65
velocity = 0,0
accel = 0, 0
attr = S, SP
projshadow = 68,68,68
damage = 180,10
animtype = diagup
getpower = 42
givepower = 50
hitflag = MAFD
guardflag = MA,L
pausetime = 8,10
guard.pausetime = 0,7
sparkno = S936
sparkxy = 40,0
hitsound = S2000,0
guardsound = S150,1
ground.type = High
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -3,-8
guard.velocity = -3 ; -4
airguard.velocity = -3.0,-3.0
air.velocity = -2.5,-5.5
;air.juggle = 1 ;+ var(12)
air.animtype = Back
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
palfx.time = 19
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
projscale = 1.5,1.5


[State 9989, flash2]
type = Explod
trigger1 = animelem = 1
trigger1 = anim = 991
anim = 13205
postype = p1
pos = -2,-65
sprpriority = 1
supermove = 1
bindtime = 1
ownpal = 1
scale = 1.5,1.5

[State 1006, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = Animtime = 0
trigger1 = P2statetype = C
trigger2 = p2bodydist X >= 60
value = 1011
ctrl = 0

[State 1006, 0]
type = PlaySnd
trigger1 = Time = 0
value = 1040,0
channel = 1

[State 1006, 0]
type = PlaySnd
trigger1 = time = 0
value = 3300,0
channel = 2

[State 1006, 0]
type = PlaySnd
trigger1 = time = 0
value = 221,8
channel = 3

[state 13101]
type = envcolor
trigger1 = animelem = 1
trigger1 = movehit
trigger2 = AnimElem = 2
trigger2 = movehit
trigger3 = AnimElem = 3,2
trigger3 = movehit
trigger4 = AnimElem = 3,4
trigger4 = movehit
trigger5 = AnimElem = 3,6
trigger5 = movehit
value = 240,240,240
time = 2
under = 0

[state 3901 ,shake]
type = envshake
trigger1 = animelem = 4
ampl = -3
time = 15

[state 3901 ,shake]
type = envshake
trigger1 = animelem = 5
ampl = -2
time = 10

[state 3901 ,shake]
type = envshake
trigger1 = animelem = 2
trigger1 = movehit
ampl = -4
time = 30

[state 3901 ,shake]
type = envshake
trigger1 = animelem = 4
trigger1 = movehit
ampl = -5
time = 40

[State 3215]
type = pause
trigger1 = Enemy,Alive = 1
trigger1 = movehit
trigger1 = Timemod = 2,0
time = 2

[State 3215]
type = pause
trigger1 = Enemy,Alive = 1
trigger1 = movehit
trigger1 = Timemod = 2,0
time = 1


[State 3280 , 7]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 549
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2202
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 100,100
bindtime = 1
ignorehitpause = 1

[State 3280, 8]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 599
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2203
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 120,120
bindtime = 1
ignorehitpause = 1

[State 3280 , 9]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 599
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2204
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 150,150
bindtime = 1
ignorehitpause = 1

[State 3280 , 10]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 599
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2200
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 80,80
bindtime = 1
ignorehitpause = 1

[State 3901 , 9]
type = Explod
trigger1 = animelem = 1
trigger1 = movehit
trigger2 = animelem = 2
trigger2 = movehit
trigger3 = animelem = 3
trigger3 = movehit
anim = 2200
ID = 930
ownpal = 1
sprpriority = 5
postype = p2
pos = -60,-50
bindtime = 1
random = 10,10
ignorehitpause = 2
scale = 1.2,1.2

;[State 3901 , 9]
;type = Explod
;trigger1 = animelem = 4
;trigger1 = movehit
;anim = 936
;ID = 930
;ownpal = 1
;sprpriority = 5
;postype = p1
;pos = 55,-50
;bindtime = 1
;ignorehitpause = 3


[State 1270, 6]
type = VelSet
trigger1 = animelem = 4
x = -5


[State 970]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;ƒ`ƒF[ƒ“ƒhƒ‰ƒCƒu2003
[Statedef 3300]
type    = S
movetype= I
physics = S
anim = 3200
ctrl = 0
poweradd = -2000
velset = 0,0,0

[State 40, 5]
type = Afterimage
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
time = 15
length = 6
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1
FrameGap = 4
Trans = Add1

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1003
ID = 1003
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 24
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;trans =
;persistent =
;supermove = 0
;pausemove = 0
[State 1000, 0]
type = PlaySnd
trigger1 = animelem = 1
value = 99,47

[State 1000, 0]
type = PlaySnd
trigger1 = animelem = 12
value = 99,22

[State 1000, 0]
type = PlaySnd
trigger1 = AnimElem = 11
value = 99,23

[State 1010, 1]
type = varset
trigger1 = time = 0
var(2) = 0

[State 1010, 2]
type = posadd
trigger1 = animelem = 3
trigger2 = animelem = 4
x = 8

[State 1010, 3]
type = posadd
trigger1 = animelem = 7
trigger2 = animelem = 8
x = -8



[State 1010, 5]
type = Projectile
trigger1 = AnimElem= 11
ProjAnim = 3301
ProjID = 3301
offset = 80,0
velocity = 4,0
accel = 0, 0
projhits = 10
projscale = 1,1
attr = S, SP
projshadow = 68,68,68
damage = 50,10
animtype = Hard
getpower = 42
givepower = 50
guardflag = MA,L
pausetime = 0,8
guard.pausetime = 0,7
sparkno = -1
sparkxy = -1
hitsound = S99,24
guardsound = -1
ground.type = High
ground.slidetime = 36
ground.hittime = 36
ground.velocity = -5
guard.hittime = 24
guard.slidetime = 24
guard.pausetime = 8,10
guard.velocity = -1
air.velocity = -4,-4
fall = 0
air.fall = 0
fall.recover = 0
air.juggle = 2 ; gogo
air.animtype = Back



[State 3250, end1]
type = changestate
trigger1 = (projcontact2020 = 1) && (p2bodydist X < 30)
value = 3302
ctrl = 0

[State 3250, end1]
type = changestate
trigger1 = projcontact2020 = 1
trigger2 = NumProjID(2020) = 0
trigger2 = AnimElemTime (11) > 1
trigger2 = time <= 77
value = 3301
ctrl = 0

[State 3250, end2]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------
; 3251 SDM chain drive attack success
[Statedef 3301]
type    = S
movetype= A
physics = N
anim = 3202
ctrl = 0
velset = 0,0,0

[State 3252, 0]
type = playerpush
trigger1 = time >= 0
value = 1

[State 3251, shadow]
type = explod
trigger1 = projcontact2020 = 1
trigger2 = NumProjID(2020) = 0
anim = 3201
pos = 0,0
scale = 0.40,0.40
postype = P1
velset = 0,0
sprpriority = 2
ownpal = 1
bindtime = 1
persistent = 0
shadow = 80,80,80

[State 3251, 1]
type = posadd
trigger1 = time = 12
x = 20

[State 3251, 1]
type = PlaySnd
trigger1 = time = 16
value = 3200,0

[State 3251, 2]
type = velset
trigger1 = time = 16
x = 17 ; 16

[State 3201, 4]
type = VelSet
trigger1 = Vel X <= 0
x = 0.5 ;1

[State 3201, 3]
type = veladd
trigger1 = time >= 18 ;20
x = -0.4

[State 3251, 5]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = (AnimElem = 5) && (!movecontact)
p2facing = 1
attr = S, HA
animtype = hard
damage = 0,0
sparkno = 2
sparkxy = 0,-60
pausetime = 6,6
hitflag = MAF
guardflag = MA
forcestand = 1
hitsound = 5,2
fall.recover = 0
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3, 0
guard.slidetime = 17
guard.velocity = -10

[State 3253, sunglass]
type = envcolor
trigger1 = movehit
time = 1
under = 1
value = 240,240,240

[State 3251, end1]
type = changestate
trigger1 = movehit
value = 3310
ctrl = 1

[State 3201, end1]
type = changestate
trigger1 = animtime = 0
trigger2 = moveguarded
value = 3260
ctrl = 0

;----------------------
; 3253 SDM chain drive attack success when body dist <= 30
[Statedef 3302]
type    = S
movetype= A
physics = N
anim = 3204
ctrl = 0
velset = 0,0,0

[State 3252, 0]
type = playerpush
trigger1 = time >= 0
value = 1

[State 3251, 1]
type = PlaySnd
trigger1 = time = 16
value = 3200,0

[State 3253, shadow]
type = explod
trigger1 = projcontact2020 = 1
anim = 3203
sprpriority = 2
ownpal = 1
shadow = 80,80,80

[State 3253, 2]
type = velset
trigger1 = time = 28
x = 16

[State 3253, 3]
type = veladd
trigger1 = time >= 28
x = -0.4

[State 3203, 4]
type = VelSet
trigger1 = Vel X <= 0
x = 1

[State 3253, 5]
type = HitDef
trigger1 = AnimElem = 1;4
trigger2 = (AnimElem = 5) && (!movecontact)
attr = S, HA
animtype = hard
p2facing = 1
damage = 0,0
sparkno = 2
sparkxy = 0,-60
pausetime = 6,6
hitflag = MAF
forcestand = 1
guardflag = MA
hitsound = 5,2
fall.recover = 0
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3, 0

[State 3253, sunglass]
type = envcolor
trigger1 = movehit
time = 1
under = 1
value = 240,240,240

[State 3253, end1]
type = changestate
trigger1 = movehit
value = 3310
ctrl = 1

[State 3253, end1]
type = changestate
trigger1 = animtime = 0
trigger2 = moveguarded
value = 3260
ctrl = 0

;------------------------
; 3260 guarded
[Statedef 3260]
type    = S
movetype= I
physics = S
anim = 3210
ctrl = 0

[State 3210, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


[Statedef 3310]
type = S
movetype = A
physics = N
anim = 3280
velset = 1,0,0
ctrl = 0

[State AssertSpecial] 
type = AssertSpecial 
trigger1 = stateno = 3310
flag = noFG
ignorehitpause = 1

[State 9899, BGcolor]
type = envcolor
trigger1 = time = 0
time = 240
under = 1
value = 0, 0, 0

[State 3800, 1]
type = explod
;trigger1 = facing = 1
trigger1 = time = 1
ID = 13200
pos = 0,0
postype = LEFT
anim = 13201
bindtime = 220
removetime = 210
sprpriority = -3
ownpal = 1
removeongethit = 1
supermove = 1
supermovetime = 999
scale = 1.09,1.09

[State 3201, 2]
type = playsnd
trigger1 = animelem = 1
trigger2 = animelem = 31
value = 221,5

[State 3280, push]
type = playerpush
trigger1 = time >= 0
value = 1

[State 3280, muteki]
type = nothitby
trigger1 = time >= 0
value = SCA
time = 1

[State 3280, width]
type = Width
trigger1 = time >= 0
edge = 60,0

[State 3280, 0]
type = targetbind
trigger1 = time >= 0
pos = 60,0

[State 3280, 1]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 17
trigger4 = animelem = 19
trigger5 = animelem = 31
trigger6 = animelem = 38
attr = S, HA
forcestand = 1
animtype  = hard
damage    = 10 ; 6
givepower = 15
;guardflag = MA
pausetime = 3,2
sparkno = 2
sparkxy = -15,-70
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -2.3
kill = 0
p2stateno = 3207

[State 3280, 2]
type = HitDef
trigger1 = animelem = 9
trigger2 = animelem = 13
trigger3 = animelem = 22
attr = S, HA
animtype  = hard
damage    = 10 ; 6
givepower = 15
;guardflag = MA
pausetime = 3,2
forcestand = 1
sparkno = 2
sparkxy = -20,-40
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -2.3
kill = 0
p2stateno = 3208

[State 3280, 3]
type = HitDef
trigger1 = animelem = 27
trigger2 = animelem = 41
trigger3 = animelem = 43
trigger4 = animelem = 56
trigger5 = animelem = 58
trigger6 = animelem = 66
trigger7 = animelem = 70
trigger8 = animelem = 77
attr = S, HA
animtype  = hard
damage    = 10 ; 6
givepower = 15
;guardflag = MA
pausetime = 1,1
forcestand = 1
sparkno = 2
sparkxy = -15,-70
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -2.3
kill = 0
palfx.time = 3
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
p2stateno = 3207

[State 3280, 4]
type = HitDef
trigger1 = animelem = 36
trigger2 = animelem = 48
trigger3 = animelem = 52
trigger4 = animelem = 61
trigger5 = animelem = 75
attr = S, HA
animtype  = hard
damage    = 10 ; 6
givepower = 15
;guardflag = MA
pausetime = 1,1
forcestand = 1
sparkno = 2
sparkxy = -20,-40
hitsound   = Sifelse(random < 249,200,ifelse(random < 333,210,ifelse(random < 499,220,230)))
guardsound = S150,1
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -2.3
kill = 0
palfx.time = 3
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
p2stateno = 3208

[State 3280, envcolor]
type = envcolor
triggerall = movehit
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 9
trigger4 = animelem = 13
trigger5 = animelem = 17
trigger6 = animelem = 19
trigger7 = animelem = 22
trigger8 = animelem = 27
trigger9 = animelem = 31
trigger10 = animelem = 36
trigger11 = animelem = 38
trigger12 = animelem = 41
trigger13 = animelem = 43
trigger14 = animelem = 48
trigger15 = animelem = 52
trigger16 = animelem = 56
trigger17 = animelem = 58
trigger18 = animelem = 61
trigger19 = animelem = 66
trigger20 = animelem = 70
trigger21 = animelem = 75
trigger22 = animelem = 77
time = 1
under = 0
value = 240,240,240

[State 3280 , 5]
type = Explod
triggerall = NumExplod(2200) < 3
triggerall = Random < 899
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2200
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 120,120
bindtime = 1
ignorehitpause = 1

[State 3280 , 6]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 699
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2201
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 100,100
bindtime = 1
ignorehitpause = 1

[State 3280 , 7]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 549
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2202
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 100,100
bindtime = 1
ignorehitpause = 1

[State 3280, 8]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 599
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2203
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 120,120
bindtime = 1
ignorehitpause = 1

[State 3280 , 9]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 599
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2204
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 150,150
bindtime = 1
ignorehitpause = 1

[State 3280 , 10]
type = Explod
triggerall = NumExplod(2200) < 4
triggerall = Random < 599
trigger1 = (AnimElemTime(27) >= 0) && (movehit)
anim = 2205
ID = 2200
ownpal = 1
sprpriority = 5
postype = p2
pos = 0,-60
random = 100,100
bindtime = 1
ignorehitpause = 1


[state 3901 ,shake]
type = envshake
triggerall = movehit
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 9
trigger4 = animelem = 13
trigger5 = animelem = 17
trigger6 = animelem = 19
trigger7 = animelem = 22
trigger8 = animelem = 27
trigger9 = animelem = 31
trigger10 = animelem = 36
ampl = -2
time = 10

[state 3901 ,shake]
type = envshake
trigger1 = animelem = 38
trigger2 = animelem = 41
trigger3 = animelem = 43
trigger4 = animelem = 48
trigger5 = animelem = 52
trigger6 = animelem = 56
trigger7 = animelem = 58
trigger8 = animelem = 61
trigger9 = animelem = 66
trigger10 = animelem = 70
trigger11 = animelem = 75
trigger12 = animelem = 77
ampl = -3
time = 15


[State 3280, end1]
type = ChangeState
trigger1 = AnimTime = 0
value = 3100
ctrl = 0


;-------------------------
[Statedef 3315]
type = S
movetype = A
physics = S
anim = 3315
velset = 0
ctrl = 0

[State AssertSpecial] 
type = AssertSpecial 
trigger1 = stateno = 3315
flag = noFG
ignorehitpause = 1

[State 3290, muteki]
type = nothitby
trigger1 = time >= 0
value = SCA
time = 1

[State 9899, BGcolor]
type = envcolor
trigger1 = time = 0
time = 104
under = 1
value = 0, 0, 0

[State 3250, 1]
type = PlaySnd
trigger1 = animelem = 5,2
value = 221,24

[State 3290, 0]
type = posadd
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
trigger5 = animelem = 12
x = -10

;[State 3290, 1]
;type = velset
;trigger1 = animelem = 11
;x = 6

[State 3290, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, HA
animtype  = Hard
damage    = 50
givepower = 15
;guardflag = MA
pausetime = 30,30
sparkno = 3
sparkxy = -15,-60
hitsound   = S3300,0
guardsound = S150,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
fall = 0
ground.velocity = 0
palfx.time = 60
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
kill = 0
p2stateno = 3207

[State 3290, 3]
type = explod
trigger1 = animelem = 5
Anim = 2206
pos = 60,-110
shadow = 64,64,64
sprpriority = 7
postype = p1
bindtime = 1
ownpal = 1

[State 3290, 4]
type = explod
trigger1 = animelem = 5
Anim = 2206
pos = 60,-70
shadow = 64,64,64
sprpriority = 7
postype = p1
bindtime = 1
ownpal = 1

[State 3290, 5]
type = explod
trigger1 = animelem = 5
Anim = 2206
pos = 20,-60
shadow = 64,64,64
sprpriority = 7
postype = p1
bindtime = 1
ownpal = 1

[State 3290, 6]
type = explod
trigger1 = animelem = 5
Anim = 2207
pos = 16,-120
shadow = 64,64,64
sprpriority = 7
postype = p1
bindtime = 1
ownpal = 1

[State 3290, 7]
type = explod
trigger1 = animelem = 5
Anim = 2207
pos = 40,-60
shadow = 64,64,64
sprpriority = 8
postype = p1
bindtime = 1
ownpal = 1

[State 3201, 2]
type = playsnd
trigger1 = animelem = 1
value = 221,8

[State 4100, 2]
type = SuperPause
trigger1 = animelem = 7
anim = -1
movetime = 56
time = 57
;darken = 0


[state 3901 ,shake]
type = envshake
trigger1 = animelem = 5
ampl = -4
time = 30

[State 3290, end1]
type = ChangeState
trigger1 = AnimTime = 0
value = 3320
ctrl = 0




[Statedef 3320]
type = S
movetype = A
physics = N
ctrl = 0
anim = 3320
velset = 0,0,0

[State AssertSpecial] 
type = AssertSpecial 
trigger1 = stateno = 3320
flag = noFG
ignorehitpause = 1

[State 3002, muteki]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 6

[state 3901 ,shake]
type = envshake
trigger1 = animelem = 2
ampl = -6
time = 80

[State 3215]
type = pause
trigger1 = Enemy,Alive = 1
trigger1 = Animelem = 2 >= 0
trigger1 = Timemod = 2,0
time = 2

[State 3002, burn]
type = varset
trigger1 = movehit
var(3) = 1

[State 3002, 1.5]
type = PlaySnd
trigger1 = time = 3
value = 3000,1

[State 3002, 6]
type = HitDef
trigger1 = time = 0
persistent = 0
attr = S, HA
animtype = up
damage = 350
sparkno = 2
sparkxy = 0,-60
priority = 6
pausetime = 2,0
;guardflag = MA
hitsound = -1
guardsound = S150,1
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -1,-15
air.velocity = -2,-11
air.juggle = 9
air.animtype = Back
fall = 1
fall.recover = 0
palfx.time = 60
palfx.mul = 240,220,128
palfx.sinadd = 32,128,220,16
palfx.add = 190,180,84
p2stateno = 3010
envshake.time = 25 
envshake.ampl = 7
envshake.freq = 160
fall.envshake.ampl = 6 
fall.envshake.freq = 180
fall.envshake.time = 15
mindist = 50,-100 
maxdist = 100,-10
yaccel = 1

[State 3002, 1.5]
type = PlaySnd
trigger1 = movehit
value = 2200,1
ignorehitpause = 1
persistent = 0
volume = -50

[State 3002, 1.5]
type = PlaySnd
trigger1 = movehit
value = 2200,0
ignorehitpause = 1
persistent = 0

[State 3002, 1.5]
type = PlaySnd
trigger1 = movehit
value = 221,33
ignorehitpause = 1
persistent = 0

[State 3002, 1.5]
type = PlaySnd
trigger1 = movehit
value = 3300,0
ignorehitpause = 1
persistent = 0
channel = 2

[State 3104, GroundSpark]
type = explod
trigger1 = time = 0
anim = 2050
sprpriority = -2
pos = 10, -1
bindtime = 7
ownpal = 1

;[State 3102, afterimage]
;type = AfterImage
;trigger1 = time = 0
;time = 16
;trans = add1
;FrameGap = 4
;length = 12

[State 3104, 1]
type = posadd
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
x = 10

[State 3104, 1]
type = posadd
trigger1 = animelem = 7
x = 8

[State 3104, 2]
type = velset
trigger1 = animelem = 1
x = 16

[State 3104, 2]
type = velset
trigger1 = animelem = 2
x = 14

[State 3104, 2]
type = velset
trigger1 = animelem = 3
x = 8

[State 3104, 2]
type = velset
trigger1 = animelem = 4
x = 4

[State 3104, 2]
type = veladd
trigger1 = time >= 0
x = -0.4

[State 3104, 3]
type = VelSet
trigger1 = (time >= 1) && (Vel X <= 0)
x = 0

;[State 3280, envcolor]
;type = envcolor
;trigger1 = Enemy,Alive = 1
;trigger1 = Animelem = 2 >= 0
;trigger1 = Timemod = 2,0
;time = 1
;under = 1
;value = 240,240,240

[State 3280, envcolor]
type = envcolor
trigger1 = animelem = 1
trigger2 = animelem = 1,2
trigger3 = animelem = 2
trigger4 = animelem = 2,2
trigger5 = animelem = 2,4
trigger6 = animelem = 2,6
trigger7 = animelem = 2,8
trigger8 = animelem = 3
trigger9 = animelem = 3,2
trigger10 = animelem = 3,4
trigger11 = animelem = 4
trigger12 = animelem = 4,2
trigger13 = animelem = 4,4
trigger14 = animelem = 5
trigger15 = animelem = 5,2
trigger16 = animelem = 5,4
trigger17 = animelem = 6
trigger18 = animelem = 6,2
time = 1
under = 1
value = 240,240,240

[State 3901 , 9]
type = Explod
trigger1 = animelem = 1,2
anim = 936
ID = 930
ownpal = 1
sprpriority = 5
postype = p2
pos = 5,-5
bindtime = 1
ignorehitpause = 2
scale = 1.2,1.2


[State 3104, end1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;ƒwƒ”ƒ“ƒYƒhƒ‰ƒCƒu
[Statedef 3340]
type	= S
movetype= A
physics = S
poweradd = -1000
ctrl = 0
velset = 0,0,0
anim = 3340
juggle = 4 + var(13)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S99,38



[State 1000, yudo]
type = Helper
trigger1 = time = 40
name = "yudo0"
ID = 7320
pos = 0,0
postype = p1
stateno = 7320
helpertype = normal
keyctrl = 0
ownpal = 0
persistent = 0
sprpriority = 2
size.xscale = 0.32
size.yscale = 0.40




[State 1000, yudo]
type = Helper
trigger1 = time = 40
name = "yudo1"
ID = 7321
pos = 0,0
postype = p1
stateno = 7321
helpertype = normal
keyctrl = 0
ownpal = 0
persistent = 0
sprpriority = 2
pausemovetime = 0
size.xscale = 0.32
size.yscale = 0.40

[State 1000, yudo]
type = Helper
trigger1 = time = 60
name = "yudo1"
ID = 7321
pos = 0,0
postype = p1
stateno = 7321
helpertype = normal
keyctrl = 0
ownpal = 0
persistent = 0
sprpriority = 2
pausemovetime = 0
size.xscale = 0.32
size.yscale = 0.40

[State 1000, yudo]
type = Helper
trigger1 = time = 60
name = "yudo0"
ID = 7320
pos = 0,0
postype = p1
stateno = 7320
helpertype = normal
keyctrl = 0
ownpal = 0
persistent = 0
sprpriority = 2
size.xscale = 0.32
size.yscale = 0.40

[State 1000, yudo]
type = Helper
trigger1 = time = 80
name = "yudo1"
ID = 7321
pos = 0,0
postype = p1
stateno = 7321
helpertype = normal
keyctrl = 0
ownpal = 0
persistent = 0
sprpriority = 2
pausemovetime = 0
size.xscale = 0.32
size.yscale = 0.40

[State 1000, yudo]
type = Helper
trigger1 = time = 80
name = "yudo0"
ID = 7320
pos = 0,0
postype = p1
stateno = 7320
helpertype = normal
keyctrl = 0
ownpal = 0
persistent = 0
sprpriority = 2
size.xscale = 0.32
size.yscale = 0.40





[State 1505 , 10]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 7320]
type = A
movetype = A
physics = N
anim = 3341
sprpriority = 2
juggle  = 3

[State 7320, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,1

[State 7320, 1]
type = VelSet
trigger1 = 1
x = 5.5

[State 1030, VelS-3]
type = VelSet
trigger1 = P2Statetype = L
y = 0



[State 7320, 5]
type = HitDef
trigger1 = AnimElem = 1
attr = A, SP
damage    = 100,20
getpower = 0,0
animtype = hard
hitflag = MAF
guardflag = M
priority = 1
numhits = 1
pausetime = 0,7
sparkno = -1
guard.sparkno = 40
sparkxy = 5,0
hitsound   = s1,4
guardsound = s2,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 14
ground.velocity = -5
air.velocity = -3,-3
guard.velocity = -10
palfx.time = 50
palfx.add = 0,0,0
palfx.mul = 100,100,100
palfx.sinadd = 80,80,80,4
palfx.invertall = 1
air.juggle  = 4
P2Stateno = 7322
P1Stateno = 7329

[State 7320, 1]
type = ParentVarSet
trigger1 = Time >= 0
var(6) = 0

[State 7320, 1]
type = ParentVarSet
trigger1 = MoveGuarded = 1
var(6) = 1

[State 7320, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA,AA,AT

[State 7320, 2]
type = destroyself
trigger1 = movecontact
trigger2 = FrontEdgeDist <= -40

;---------------------------------------------------------------------
; ‚¨‚Á‚©‚¯‚a
[Statedef 7321]
type = A
movetype = A
physics = N
anim = 3341
sprpriority = 2
juggle  = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S99,40


[State 7321, 1]
type = PosFreeze
trigger1 = parent,var(6) = 1
value = 1

[State -3, 1]
type = ParentVarSet
trigger1 = parent,var(6) = 1 && Time >= 12
v = 6
value = 0

[State 7321, 1]
type = VelSet
trigger1 = P2StateNo = 7322
x = 0

[State 7321, 1]
type = VelSet
trigger1 = P2StateNo != 7322
x = 5.5





[State 7321, 5]
type = HitDef
trigger1 = NumHelper(7320) = 0 && Time > 7
trigger2 = P2Stateno = 7323 || P2Movetype = H
attr = S, HP
damage    = 70,20
getpower = 0,0
hitflag = MAF
guardflag = MA
priority = 1
numhits = 1
pausetime = 0,10
sparkno = S7329
guard.sparkno = 40
sparkxy = 15,0
hitsound   = s1,4
guardsound = s2,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 14
ground.velocity = -5
air.velocity = -3,-3
guard.velocity = -10
palfx.time = 50
palfx.add = 0,0,0
palfx.mul = 100,100,100
palfx.sinadd = 80,80,80,4
palfx.invertall = 1
air.juggle  = 3
P2Stateno = 7324
P1Stateno = 7330

[State 7321, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA,AA,AT

[State 7321, 2]
type = ChangeState
trigger1 = movecontact
value = 7330

[State 7321, 2]
type = destroyself
trigger1 = FrontEdgeDist <= -40

;---------------------------------------------------------------------------
;‚«”ò‚Ô‘ŠŽè‚P
[Statedef 7322]
type = A
movetype = H
physics = N

[State 7322, CA2-1]
type = ChangeAnim2
trigger1 = Time = 0
value = 7322

[State 7322, NHB]
type = NotHitBy
triggerall = P2StateNo = 7321
trigger1 = time >= 0
value = SCA
time = 1

[State 7322, Turn]
type = Turn
trigger1 = time = 0 && P2dist X < 0

[State 7322, VelS]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 7322, CA-1]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = SelfAnimExist(5052) = 1
value = 5052

[State 7322, CA-2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5052
value = 5030

[State 7322, CS]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 7323

;---------------------------------------------------------------------------
;‚«”ò‚Ô‘ŠŽè‚Q
[Statedef 7323]
type = A
movetype = H
physics = N

[State 7323, VelS]
type = VelSet
trigger1 = HitShakeOver
persistent = 0
x = -3
y = -6

[State 7323, CA-1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052) = 1
value = 5052

[State 7323, CA-2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != 5052
value = 5030

[State 7323, CA-3]
type = ChangeAnim
trigger1 = Anim = 5052
trigger1 = AnimTime = 0
trigger1 = SelfAnimExist(5062) = 1
value = 5050
;value = 5062

[State 7323, CA-4]
type = ChangeAnim
trigger1 = Anim = 5030
trigger1 = AnimTime = 0
trigger1 = Anim != 5062
value = 5050

[State 7323, Pause]
type = Pause
triggerall = roundstate = 2
triggerall = time = [0,6]
trigger1 = (GameTime%2)=0
time = 2

[State 7323, VelA]
type = VelAdd
trigger1 = Time > 4
y = .66

[State 7323, ES]
type = EnvShake
trigger1 = Vel Y > 0 && Pos Y >= 0
Time = 12
ampl = 3
freq = 90

[State 7323,SelfS]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;‚«”ò‚Ô‘ŠŽè‚P
[Statedef 7324]
type = A
movetype = H
physics = N

[State 7324, CA2-1]
type = ChangeAnim2
trigger1 = Time = 0
value = 7322

[State 7324, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 7324, Turn]
type = Turn
trigger1 = time = 0 && P2dist X < 0

[State 7324, VelS]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 7324, CA-1]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = SelfAnimExist(5052) = 1
value = 5052

[State 7324, CA-2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5052
value = 5030

[State 7324, CS]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 7325

;---------------------------------------------------------------------------
;‚«”ò‚Ô‘ŠŽè‚Q
[Statedef 7325]
type = A
movetype = H
physics = N

[State 7325, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 7325, VelS]
type = VelSet
trigger1 = HitShakeOver
persistent = 0
x = -4
y = -7

[State 7325, CA-1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052) = 1
value = 5052

[State 7325, CA-2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != 5052
value = 5030

[State 7325, CA-3]
type = ChangeAnim
trigger1 = Anim = 5052
trigger1 = AnimTime = 0
trigger1 = SelfAnimExist(5062) = 1
value = 5050
;value = 5062

[State 7325, CA-4]
type = ChangeAnim
trigger1 = Anim = 5030
trigger1 = AnimTime = 0
trigger1 = Anim != 5062
value = 5050

[State 7325, Pause]
type = Pause
triggerall = roundstate = 2
triggerall = time = [0,6]
trigger1 = (GameTime%2)=0
time = 2

[State 7325, VelA]
type = VelAdd
trigger1 = Time > 4
y = .66

[State 7325, ES]
type = EnvShake
trigger1 = Vel Y > 0 && Pos Y >= 0
Time = 12
ampl = 3
freq = 90

[State 7325,SelfS]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------
; ‚¨‚Á‚©‚¯E‘ŠŽE
[Statedef 7329]
type = S
movetype = I
physics = N
anim = 7329
sprpriority = 2
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S99,39


[State 7329, EC]
type = EnvColor
trigger1 = Time = 0
mul = 100,100,100
time = 1
under = 1
ignorehitpause = 1

[State 7329,Explod]
type = Explod
trigger1 = Time =0
anim = 7323
id = 7323
pos = 0,0
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1
vel = 5.5
scale = 0.40,0.40

[State 7329, 2]
type = destroyself
trigger1 = Time = 0

;---------------------------------------------------------------------
; ‚¨‚Á‚©‚¯EÁ–Å
[Statedef 7330]
type = S
movetype = I
physics = N
anim = 7777
sprpriority = 2
velset = 0,0

[State 7329, EC]
type = EnvColor
trigger1 = Time = 0
mul = 100,100,100
time = 1
under = 1
ignorehitpause = 1

[State 7329,Explod]
type = Explod
trigger1 = Time =0
anim = 7329
id = 7329
pos = 0,0
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 7330, 2]
type = destroyself
trigger1 = Time = 0

;ƒGƒAƒgƒŠƒK[@Žã
[Statedef 963]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0,0
anim = 967
sprpriority = 2

[State 1504, 0]
type = PlaySnd
trigger1 = animelem = 9
value = 700,0

[State 1504, 0]
type = PlaySnd
trigger1 = animelem = 9
value = 99,42
channel = 2

[State 1504, 0]
type = PlaySnd
trigger1 = animelem = 10
value = 99,45
channel = 3

[STate 968]
type=VelSet
trigger1=Animelem=9
x=-4
y=-5

[STate 968]
type=Veladd
trigger1=Animelem=9,>=0
x=-.4

[STate 968]
type=Veladd
trigger1=Animelem=9,>=0
y=.2

[STate 968]
type=Veladd
trigger1=Animelem=10,>=0
y=.3

[STate 968]
type=statetypeset
trigger1=Animelem=9
value=A

[State 1505 , 5]
type = explod
trigger1 = animelem = 5
Anim = 1003
pos = 15,-70
sprpriority = 3
shadow = 64,64,64
postype = p1
bindtime = 15
ownpal = 1

[State 1010, 5]
type = Projectile
trigger1 = AnimElem= 9
ProjAnim = 1020
ProjID = 1020
offset = 48,-140
velocity = 3,4
accel = 0, 0
projhits = 10
projscale = 1,0.50
attr = S, SP
projshadow = 68,68,68
damage = 10,2
animtype = Hard
getpower = 42
givepower = 50
guardflag = MA,L
pausetime = 0,8
guard.pausetime = 0,7
sparkno = -1
sparkxy = -1
hitsound = S99,24
guardsound = -1
ground.type = High
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -9
guard.velocity = -8 ; -4
airguard.velocity = -4.0,-3.0
air.velocity = -2.5,-5.5
air.juggle = 1 ;+ var(12)
air.animtype = Back
air.recover = 0
fall.recover = 0
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 12
envshake.ampl = 3

[State 968]
type = ChangeState
trigger1 = pos Y>=0&&vel Y>0
value = 312


;ƒGƒAƒgƒŠƒK[@‹­
[Statedef 964]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0,0
anim = 967
sprpriority = 2

[State 1504, 0]
type = PlaySnd
trigger1 = animelem = 9
value = 700,0

[State 1504, 0]
type = PlaySnd
trigger1 = animelem = 9
value = 99,42
channel = 2

[State 1504, 0]
type = PlaySnd
trigger1 = animelem = 10
value = 99,45
channel = 3

[STate 968]
type=VelSet
trigger1=Animelem=9
x=-4
y=-5

[STate 968]
type=Veladd
trigger1=Animelem=9,>=0
x=-.4

[STate 968]
type=Veladd
trigger1=Animelem=9,>=0
y=.2

[STate 968]
type=Veladd
trigger1=Animelem=10,>=0
y=.3

[STate 968]
type=statetypeset
trigger1=Animelem=9
value=A

[State 1505 , 5]
type = explod
trigger1 = animelem = 5,1
Anim = 1003
pos = 15,-70
sprpriority = 3
shadow = 64,64,64
postype = p1
bindtime = 15
ownpal = 1

[State 1010, 5]
type = Projectile
trigger1 = AnimElem= 9
ProjAnim = 1020
ProjID = 1020
offset = 48,-140
velocity = 5,8
accel = 0, 0
projhits = 10
projscale = 1,0.50
attr = S, SP
projshadow = 68,68,68
damage = 10,2
animtype = Hard
getpower = 42
givepower = 50
guardflag = MA,L
pausetime = 0,8
guard.pausetime = 0,7
sparkno = -1
sparkxy = -1
hitsound = S99,24
guardsound = -1
ground.type = High
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -9
guard.velocity = -8 ; -4
airguard.velocity = -4.0,-3.0
air.velocity = -2.5,-5.5
air.juggle = 1 ;+ var(12)
air.animtype = Back
air.recover = 0
fall.recover = 0
palfx.time = 40
palfx.add = 25,25,55
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 12
envshake.ampl = 3

[State 968]
type = ChangeState
trigger1 = pos Y>=0&&vel Y>0
value = 312

[statedef 6661]
type = S
Movetype = A
physics = S
Anim = 6661
poweradd = 15
ctrl = 0

[state 6661, 2]
type = posadd
trigger1 = animelem = 4
x = 0

[state 6661 ,5]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;[State 6661]
;type = ChangeState
;triggerall = p2statetype = A && p2bodydist X = [30,240]
;triggerall = power >= 1000
;trigger1 = p2bodydist Y = (-70,-30)
;trigger1 = enemy,vel y > 0
;trigger1 = var(59) = 1
;value = 3100

[State 6661]
type = ChangeState
triggerall = p2statetype = A
triggerall = time = 16
;trigger1 = p2bodydist Y = (-70,-30)
;trigger1 = enemy,vel y > 0triggerall = time = 20
trigger1 = power = (999,2000)
trigger2 = p2life = (50,100)
trigger2 = power >= 1000
value = 3100

[State 6661]
type = ChangeState
triggerall = p2statetype = A
triggerall = var(59) = 1
triggerall = time = 11
trigger1 = power >= 2000
trigger1 = p2life >= 100
value = 13501


[State 6661]
type = ChangeState
triggerall = p2statetype = A
;trigger1 = p2bodydist Y = (-60,-30)
;trigger1 = enemy,vel y > 0
triggerall = var(59) = 1
triggerall = time = 10
trigger1 = power < 1000
trigger1 = p2bodydist X >= 65
trigger2 = p2life < 50
value = 1305

[State 6661]
type = ChangeState
triggerall = p2statetype = A
;trigger1 = p2bodydist Y = (-60,-30)
;trigger1 = enemy,vel y > 0
triggerall = var(59) = 1
triggerall = time = 1
trigger1 = power < 1000
trigger1 = p2bodydist X = (20,65)
value = 1503

===========================================================
;-------------------------------
; 305 been hit by normal one inch
[statedef 305]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 305, 0]
type = changeanim2
trigger1 = time = 0
value = 305

[State 305, 0]
type = ForceFeedBack
trigger1 = hitshakeover = 0
time = 1
waveform = square

[State 305, 0]
type = ChangeState
trigger1 = hitshakeover = 1
value = 306

;part2
[Statedef 306]
type = A
movetype= H
physics = N
ctrl = 0

[State 306, 1]
type = VelAdd
trigger1 = 1
y = ifelse( GetHitVar(yaccel)!=0 , GetHitVar(yaccel) , 0.45)

[State 306, 0]
type = changeanim2
trigger1 = time = 0
value = 305

[State 305, 2]
type = ChangeAnim
trigger1 = anim = 305
trigger1 = animtime = 0
trigger1 = AnimExist(5035)
value = 5030

[State 305, 2]
type = ChangeAnim
trigger1 = anim = 5030
trigger1 = animtime = 0
trigger1 = AnimExist(5035)
value = 5035

[State 305, 2]
type = ChangeAnim
triggerall = Anim = 5030 || Anim = 5035
trigger1 = AnimTime = 0
trigger1 = AnimExist(5050)
value = 5050

[State 305, 2]
type = ChangeAnim
triggerall = Anim = 5050
trigger1 = AnimTime = 0
trigger1 = AnimExist(5060)
value = 5060

[State 1042, 0]
type = HitVelSet
trigger1 = time = 0
x = 1
y = 1

[State 1042, 10]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y > 15
value = 307

;slide in ground
[Statedef 307]
type = S
movetype = H
physics = N
velset = -5,0
ctrl = 0

[State 307, 1]
type = changeanim2
trigger1 = time = 0
value = 307

[State 307, 0]
type = posset
trigger1 = time = 0
y = 0

[State 307, veladd]
type = veladd
trigger1 = time >= 0
trigger1 = time <= 14
x = 0.32

[State 307, veladd]
type = velset
trigger1 = animelem = 2
x = 0

[State 307, self]
type = selfstate
trigger1 = alive
trigger1 = animtime = 0
value = 5120

[State 307, self]
type = selfstate
trigger1 = !alive
trigger1 = animtime = 0
value = 5150

;----------------------------
[Statedef 3500]
type    = S
movetype= A
physics = S
;anim = 0
ctrl = 0

;arregla el bug del tiempo
[State 9873, 1]
type = AssertSpecial
trigger1 = 1
flag = timerfreeze

[State 430, 31sdaa]
type = helper
trigger1 = time = 0
stateno = 3501
postype = p1

[State 430, 31sdaa]
type = changestate
trigger1 = Time = 0;60
value = 3503

[State 430, 31sdaa]
type = NotHitBy
trigger1 = 1
value = SCA

; Golpeamos al oponente y lo mandamos al custom state sin control...
[Statedef 3501]
type    = S
movetype= A
physics = S
anim = 9000
ctrl = 0

[State 1200, BoltFat]
type = HitDef
trigger1 = p2statetype = S
attr = S, NT
hitflag = MAFD
guardflag = A
sparkno = -1
p2stateno = 3502

[State 200, 7]
type = destroyself
trigger1 = movehit

; El oponente queda sin control, la variable se pone en valor "hara kiri" y espera a que muera el otro para festejar.
[Statedef 3502]
movetype= H
ctrl = 0

[State 9130, SetFatal]
type = Varset
trigger1 = time = 0
V = 4
value = 6

[State 3105, end]
type = changeanim
trigger1 = time = 0
value = 0

[State 430, 31sdaa]
type = selfstate
trigger1 = p2life <=0
value = 0
ctrl = 1

[Statedef 9000]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 9000
ctrl = 0

[State 9000, 5]
type = HitDef
trigger1 = p2life < 2
trigger1 = p2movetype != H
attr = A, HT
numhits = -1
guardflag = A
hitflag = LAMF
;priority  = 7,Hit
sparkno = -1
p2stateno = 9001;9010
damage = 99999,9999
kill = 0
ground.velocity = 0,50
air.velocity = 0,50
air.recovery = 0
recovery = 0

[State 9000, 5.5]
type = ParentVarset
trigger1 = time = 0
V = 13
value = 400

[State 9000, 6d]
type = TargetState
trigger1 = 1
value = 9001;9010

[State 9000, 6]
type = Destroyself
trigger1 = time >= 1
trigger2 = p2stateno = 9001;9010
trigger3 = roundstate = 3
trigger4 = roundstate = 4

;---------------------------------------------------------------------------
;Fatality time
[Statedef 9001]
type    = S
movetype= H
physics = S
velset = 0,0
ctrl = 0

;
[State 987123, 1]
type = SelfState
trigger1 = time = 1
value = 9010

;-----------------------

;Fatality time
[Statedef 9010]
type    = S
movetype= H
physics = S
velset = 0,0
ctrl = 0

;FINISH SOUND music
[State 2, 5.999]
type = Playsnd
trigger1 = time = 0
value = F5, 22
Channel = 1
persistent = 3
volume = 50

; hara kiri humano/cpu
[State 987123, 1]
type = changestate
triggerall= p2stateno != [3000, 3999]
trigger1 = command = "harakiri"
trigger2 = var(50) = 1
trigger2 = time = 1
trigger2 = random%5 = 1
triggerall = animexist(3500)
value = 3500

[State 9873, 1]
type = LifeSet
trigger1 = Animelem = 1
value = 1

[State 9873, 1]
type = PosSet
trigger1 = 1
Y = 0

[State 9873, 1324]
type = LifeSet
trigger1 = time = 1
value = 1


[State 9873, 13234]
type = NotHitBy
value = , AP
trigger1 = 1

[State 987123, 1]
type = LifeAdd
triggerall = Time = 350
trigger1 = p2stateno != [3000,3999]
value = -500

; After 600 ticks and with no fatality, p2 falls down
[State 987123, 1]
type = changestate;SelfState
triggerall = Time = 350
trigger1 = p2stateno != [3000,3999]
value = 5050
ctrl = 0

[State 9010, 0.1]
type = Changeanim
trigger1 = statetype != A
trigger1 = animexist(5300)
trigger1 = anim != 5300
value = 5300

[State 9010, 1]
type = Changeanim2
trigger1 = !animexist(5300)
trigger1 = anim != 9010
trigger1 = statetype != A
value = 9010

[State 9010, 034.1]
type = PosSet
trigger1 = p2stateno =[0,9999]
Y = 0

;-------------------------------------------------------------------------------


[Statedef 9011]
type    = S
movetype= H
physics = S
juggle  = -10
ctrl = 0
velset = 0,0,0

[State 987123, 1]
type = LifesET
trigger1 = 1
value = 4

; Dizzying animation
[State 987124, 2]
type = ChangeAnim
trigger1 = AnimExist(5300)
trigger1 = Anim != 5300
value = 5300

;-------------------------------------------------------------------------------
;Shows Mercy bastardo!
[Statedef 3997]
type    = S
movetype= I
physics = S
anim = 0
ctrl = 0

;sonido de shows mercy
[State 210, 1]
type = Playsnd
trigger1 = time = 60
value = 6,2
volume = 60

;cartel de mercy
[State 181, cartel]
type = Explod
trigger1 = time = 60
ID = 200
anim = F200
pos = 156,0
postype = left
bindtime = -1
facing = 1
sprpriority = 2
ontop = 1
ownpal = 1
removetime = -2

;explod invisible, para que no se pueda hacer 2 veces la mercy
[State 181, cartel]
type = Explod
trigger1 = time = 0
ID = 3800
anim = 888
removetime = -1

;manda a custom sin control
[State 430, 31sdaa]
type = helper
trigger1 = time = 0
stateno = 3998
postype = p1

;previene fallo si tenemos poca energia
[State 9130, SetFatal]
type = lifeset
trigger1 = life < 2
value = 2

;variables de finish
[State 9130, SetFatal]
type = Varset
trigger1 = time = 0
V = 3
value = 0

[State 9130, SetFatal]
type = Varset
trigger1 = time = 0
V = 13
value = 0

[State 9130, SetFatal]
type = Varset
trigger1 = time = 0
V = 9
value = 0

[State 9130, SetFatal]
type = Varset
trigger1 = time = 0
V = 19
value = 0

[State 9130, SetFatal]
type = Varset
trigger1 = time = 0
V = 4
value = 0
;fin de cosas lokas de finish

[State 8000, sadsd]
type = BGPalFX
trigger1 = numexplod(200)=1
time = 9999
add = 0, 0, 0

;cuando termina la anim de mercy vuelve a tener control
[State 430, 31sdaa]
type = changestate
trigger1 = time > 60
trigger1 = numexplod(200)=0
value = 0
ctrl = 1

;helper que golpea a pl2
[Statedef 3998]
type    = S
movetype= A
physics = S
anim = 9000
ctrl = 0

;manda a custom (si no fallaba)
[State 1200, BoltFat]
type = HitDef
trigger1 = time = 0
attr = S, NT
hitflag = MAFD
guardflag = A
damage = -60
sparkno = -1
p2stateno = 3999

[State 430, 31sdaa]
type = destroyself
trigger1 = movehit

;custom state
[Statedef 3999]
type    = S
movetype= H
physics = S
ctrl = 0

;vuelve a tener control
[State 430, 31sdaa]
type = selfstate
trigger1 = time = 138
value = 0
ctrl = 1

;//////////////////////////////////////////
; Getting hit (lightning version)
[Statedef 43000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 9000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 9000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 9000, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype)

[State 9000, 5]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9000, 6]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 9000, 7]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 43001

[State 9000, 8]
type = ChangeState
trigger1 = HitShakeOver
value = 43030

[State 9000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 9000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 9000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
;--------------------------------------------
[Statedef 43001]
type    = S
movetype= H
physics = S

[State 9001, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9001, 3]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 9001, 4]
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 9001, 5]
type = VelSet
trigger1 = HitOver
x = 0

[State 9001, 6]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 9001, 7]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------
[Statedef 43010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 9010, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 9010, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 9010, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype)

[State 9010, 5]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 43011

[State 9010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 43030

[State 9010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 9010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 9010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;-----------------------------------------------
[Statedef 43011]
type    = C
movetype= H
physics = C

[State 9011, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 9011, 3]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 9011, 4]
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 9011, 5]
type = VelSet
trigger1 = HitOver
x = 0

[State 9011, 6]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 9011, 7]
type = SelfState
trigger1 = HitOver
value = 11
ctrl = 1

;---------------------------------------
[Statedef 43020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 9020, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 9020, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 9020, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype)

[State 9020, 5]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 9020, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 43030

[State 9020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 9020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 9020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;--------------------------------------------------------
[Statedef 43030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 9030, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 9030, 3]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 9030, 4]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 5040

[State 9030, 5]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 43050

[State 9030, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 43035

;-------------------------------------------------------
[Statedef 43035]
type    = A
movetype= H
physics = N

[State 9035, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059]
trigger1 = Anim != 5090
value = 5035

[State 9035, 3]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 9035, 4]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 10
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 5040

[State 9035, 5]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 10
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 43050

;--------------------------------------------------------
[Statedef 43050]
type    = A
movetype= H
physics = N

[State 9050, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090
value = 5050

[State 9050, 3]
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 9050, 4]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 9050, 5]
type = SelfState
triggerall = Vel Y > 0
triggerall = Pos Y >= -30
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 52000

[State 9050, 6]
type = SelfState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210

[State 9050, 7]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100

;------------------------
; carica aura
[Statedef 35000]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 35000
ctrl = 0

[State 730001, POLVERE]
type = Explod
triggerall = NumExplod(170) = 0
trigger1 = 1
pos = 12,0
anim = 13506
ID = 170
sprpriority = 0
ontop = 1
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 1
removeongethit = 1
scale = 1,1

[State 35000, StopSnd]
type = StopSnd
trigger1 = Time = 1
channel = 0

[State 191, 3]
type = PlaySnd
trigger1 = Animelem = 1
value = 99,5
Channel = 4

[State 730001, voceita]
type = playsnd
trigger1 = (Time % 50) = 0
Value = 99,5

[State 35000, StopSnd]
type = StopSnd
triggerall = Var(59) = 0
trigger1 = stateno = 901
trigger2 = command != "holdpowercosmos z"
trigger3 = command != "holdpowercosmos c"
channel = -1

[State 900,p ]
type = PowerAdd
trigger1 = Anim = 35000
value = 4

[State 900, ChangeState]
type = ChangeState
trigger1 = Power >= 3000
value = 35001
ctrl = 0

[State 900, ChangeState]
type = ChangeState
trigger1 = command != "holdpowercosmos z"
trigger2 = command != "holdpowercosmos c"
value = 35001

;---------------------------------------------------------------------------
; fine carica aura
[Statedef 35001]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 35001
ctrl = 0

[State 35001, 1]
type = PlaySnd
triggerAll = Power >= 3000
trigger1 = Time = 1
value = 99,39

[State 35001, shake]
type = EnvShake
triggerall = power >= 3000
trigger1 = time = 0
time = 64

[State 900, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

